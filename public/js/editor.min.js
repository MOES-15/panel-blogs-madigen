!function(){"use strict";function c(e){return{eq:e}}function u(o){return c(function(e,t){if(e.length!==t.length)return!1;for(var r=e.length,n=0;n<r;n++)if(!o.eq(e[n],t[n]))return!1;return!0})}function w(d){return c(function(e,t){var r,n,o=Object.keys(e),a=Object.keys(t);if(r=u(m),n=function(e){return Array.prototype.slice.call(e).sort(void 0)},!c(function(e,t){return r.eq(n(e),n(t))}).eq(o,a))return!1;for(var i=o.length,s=0;s<i;s++){var l=o[s];if(!d.eq(e[l],t[l]))return!1}return!0})}var n=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},m=c(function(e,t){return e===t}),k=c(function(e,t){if(e===t)return!0;var r=n(e);return r===n(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(r)?e===t:"array"===r?u(k).eq(e,t):"object"===r&&w(k).eq(e,t))});const r=Object.getPrototypeOf,o=(e,t,r)=>{return!!r(e,t.prototype)||(null==(r=e.constructor)?void 0:r.name)===t.name},a=t=>e=>(e=>{var t=typeof e;return null===e?"null":"object"==t&&Array.isArray(e)?"array":"object"==t&&o(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t})(e)===t,i=t=>e=>typeof e===t,s=t=>e=>t===e,b=(e,t)=>se(e)&&o(e,t,(e,t)=>r(e)===t),V=a("string"),se=a("object"),l=e=>b(e,Object),le=a("array"),d=s(null),E=i("boolean"),D=s(void 0),de=e=>null==e,H=e=>!de(e),q=i("function"),ce=i("number"),L=(r,n)=>{if(le(r)){for(let e=0,t=r.length;e<t;++e)if(!n(r[e]))return!1;return!0}return!1},$=()=>{},g=(t,r)=>(...e)=>t(r.apply(null,e)),f=(t,r)=>e=>t(r(e)),W=e=>()=>e,p=e=>e,M=(e,t)=>e===t;function N(t,...r){return(...e)=>{e=r.concat(e);return t.apply(null,e)}}const I=t=>e=>!t(e),F=e=>e(),U=e=>{e()},A=W(!1),y=W(!0);class P{constructor(e,t){this.tag=e,this.value=t}static some(e){return new P(!0,e)}static none(){return P.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?P.some(e(this.value)):P.none()}bind(e){return this.tag?e(this.value):P.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:P.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return H(e)?P.some(e):P.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}P.singletonNone=new P(!1);const z=Array.prototype.slice,j=Array.prototype.indexOf,ue=Array.prototype.push,me=(e,t)=>j.call(e,t),K=(e,t)=>-1<me(e,t),G=(r,n)=>{for(let e=0,t=r.length;e<t;e++)if(n(r[e],e))return!0;return!1},C=(t,r)=>{const n=t.length,o=new Array(n);for(let e=0;e<n;e++){const n=t[e];o[e]=r(n,e)}return o},Y=(r,n)=>{for(let e=0,t=r.length;e<t;e++)n(r[e],e)},ge=(t,r)=>{for(let e=t.length-1;0<=e;e--)r(t[e],e)},fe=(r,n)=>{const o=[],a=[];for(let e=0,t=r.length;e<t;e++){var i=r[e];(n(i,e)?o:a).push(i)}return{pass:o,fail:a}},T=(r,n)=>{const o=[];for(let e=0,t=r.length;e<t;e++){var a=r[e];n(a,e)&&o.push(a)}return o},pe=(e,r,n)=>(ge(e,(e,t)=>{n=r(n,e,t)}),n),he=(e,r,n)=>(Y(e,(e,t)=>{n=r(n,e,t)}),n),ve=(r,n,o)=>{for(let e=0,t=r.length;e<t;e++){var a=r[e];if(n(a,e))return P.some(a);if(o(a,e))break}return P.none()},be=(e,t)=>ve(e,t,A),ye=(r,n)=>{for(let e=0,t=r.length;e<t;e++)if(n(r[e],e))return P.some(e);return P.none()},Ce=r=>{var n=[];for(let e=0,t=r.length;e<t;++e){if(!le(r[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+r);ue.apply(n,r[e])}return n},we=(e,t)=>Ce(C(e,t)),xe=(r,n)=>{for(let e=0,t=r.length;e<t;++e)if(!0!==n(r[e],e))return!1;return!0},ke=e=>{const t=z.call(e,0);return t.reverse(),t},Se=(e,t)=>T(e,e=>!K(t,e)),_e=(r,n)=>{const o={};for(let e=0,t=r.length;e<t;e++){var a=r[e];o[String(a)]=n(a,e)}return o},Ee=(e,t)=>{const r=z.call(e,0);return r.sort(t),r},Ne=(e,t)=>0<=t&&t<e.length?P.some(e[t]):P.none(),Ae=e=>Ne(e,0),Re=e=>Ne(e,e.length-1),Te=q(Array.from)?Array.from:e=>z.call(e),Oe=(t,r)=>{for(let e=0;e<t.length;e++){const n=r(t[e],e);if(n.isSome())return n}return P.none()},Be=Object.keys,Pe=Object.hasOwnProperty,X=(r,n)=>{var o=Be(r);for(let e=0,t=o.length;e<t;e++){var a=o[e];n(r[a],a)}},De=(e,r)=>Me(e,(e,t)=>({k:t,v:r(e,t)})),Me=(e,r)=>{const n={};return X(e,(e,t)=>{e=r(e,t);n[e.k]=e.v}),n},Ie=r=>(e,t)=>{r[t]=e},Fe=(e,r,n,o)=>(X(e,(e,t)=>{(r(e,t)?n:o)(e,t)}),{}),Ue=(e,t)=>{var r={};return Fe(e,t,Ie(r),$),r},ze=(e,r)=>{const n=[];return X(e,(e,t)=>{n.push(r(e,t))}),n},je=e=>ze(e,p),R=(e,t)=>Q(e,t)?P.from(e[t]):P.none(),Q=(e,t)=>Pe.call(e,t),Ve=(e,t)=>Q(e,t)&&void 0!==e[t]&&null!==e[t],He=e=>{const t={};return Y(e,e=>{t[e]={}}),Be(t)},qe=Array.isArray,$e=(e,t,r)=>{let n,o;if(!e)return!1;if(r=r||e,void 0!==e.length){for(n=0,o=e.length;n<o;n++)if(!1===t.call(r,e[n],n,e))return!1}else for(n in e)if(Q(e,n)&&!1===t.call(r,e[n],n,e))return!1;return!0},We=(r,n)=>{const o=[];return $e(r,(e,t)=>{o.push(n(e,t,r))}),o},Ke=(r,n)=>{const o=[];return $e(r,(e,t)=>{n&&!n(e,t,r)||o.push(e)}),o},Ge=(r,n)=>{if(r)for(let e=0,t=r.length;e<t;e++)if(r[e]===n)return e;return-1},Ye=(t,r,e,n)=>{let o=D(e)?t[0]:e;for(let e=0;e<t.length;e++)o=r.call(n,o,t[e],e);return o},Xe=(e,t,r)=>{let n,o;for(n=0,o=e.length;n<o;n++)if(t.call(r,e[n],n,e))return n;return-1},Qe=e=>e[e.length-1],Je=t=>{let r,n=!1;return(...e)=>(n||(n=!0,r=t.apply(null,e)),r)},Ze=()=>et(0,0),et=(e,t)=>({major:e,minor:t}),tt={nu:et,detect:(e,t)=>{t=String(t).toLowerCase();if(0===e.length)return Ze();{var r=t;const n=((t,r)=>{for(let e=0;e<t.length;e++){const n=t[e];if(n.test(r))return n}})(e,r);if(!n)return{major:0,minor:0};t=e=>Number(r.replace(n,"$"+e));return et(t(1),t(2))}},unknown:Ze},rt=(e,t)=>{const r=String(t).toLowerCase();return be(e,e=>e.search(r))},nt=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,ot=(e,t)=>-1!==e.indexOf(t),at=(e,t)=>nt(e,t,0),it=(e,t)=>nt(e,t,e.length-t.length),st=t=>e=>e.replace(t,""),lt=st(/^\s+|\s+$/g),dt=st(/^\s+/g),ct=st(/\s+$/g),ut=e=>0<e.length,mt=e=>!ut(e),gt=(e,t=10)=>{e=parseInt(e,t);return isNaN(e)?P.none():P.some(e)},ft=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,pt=t=>e=>ot(e,t),ht=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>ot(e,"edge/")&&ot(e,"chrome")&&ot(e,"safari")&&ot(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ft],search:e=>ot(e,"chrome")&&!ot(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>ot(e,"msie")||ot(e,"trident")},{name:"Opera",versionRegexes:[ft,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pt("firefox")},{name:"Safari",versionRegexes:[ft,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(ot(e,"safari")||ot(e,"mobile/"))&&ot(e,"applewebkit")}],vt=[{name:"Windows",search:pt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>ot(e,"iphone")||ot(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:pt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pt("linux"),versionRegexes:[]},{name:"Solaris",search:pt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],bt={browsers:W(ht),oses:W(vt)},yt="Chromium",Ct="Firefox",wt=e=>{const t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n("Edge"),isChromium:n(yt),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(Ct),isSafari:n("Safari")}},xt=()=>wt({current:void 0,version:tt.unknown()}),kt=wt,St=(W("Edge"),W(yt),W("IE"),W("Opera"),W(Ct),W("Safari"),"Windows"),_t="Android",Et="Solaris",Nt="FreeBSD",At="ChromeOS",Rt=e=>{const t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(St),isiOS:n("iOS"),isAndroid:n(_t),isMacOS:n("macOS"),isLinux:n("Linux"),isSolaris:n(Et),isFreeBSD:n(Nt),isChromeOS:n(At)}},Tt=()=>Rt({current:void 0,version:tt.unknown()}),Ot=Rt,Bt=(W(St),W("iOS"),W(_t),W("Linux"),W("macOS"),W(Et),W(Nt),W(At),e=>window.matchMedia(e).matches);let Pt=Je(()=>{{var e=navigator.userAgent,t=P.from(navigator.userAgentData),r=Bt,n,o,a,i,s,l,d;const c=bt.browsers(),u=bt.oses(),m=t.bind(e=>((e,t)=>Oe(t.brands,t=>{const r=t.brand.toLowerCase();return be(e,e=>{return r===(null==(e=e.brand)?void 0:e.toLowerCase())}).map(e=>({current:e.name,version:tt.nu(parseInt(t.version,10),0)}))}))(c,e)).orThunk(()=>((e,r)=>rt(e,r).map(e=>{var t=tt.detect(e.versionRegexes,r);return{current:e.name,version:t}}))(c,e)).fold(xt,kt),g=(t=u,d=e,rt(t,d).map(e=>{var t=tt.detect(e.versionRegexes,d);return{current:e.name,version:t}}).fold(Tt,Ot)),f=(t=m,o=e,r=r,a=(n=g).isiOS()&&!0===/ipad/i.test(o),i=n.isiOS()&&!a,s=n.isiOS()||n.isAndroid(),l=s||r("(pointer:coarse)"),r=a||!i&&s&&r("(min-device-width:768px)"),s=i||s&&!r,t=t.isSafari()&&n.isiOS()&&!1===/safari/i.test(o),o=!s&&!r&&!t,{isiPad:W(a),isiPhone:W(i),isTablet:W(r),isPhone:W(s),isTouch:W(l),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:W(t),isDesktop:W(o)});return{browser:m,os:g,deviceType:f}}});function Dt(e,r,n,o){o=o||this,e&&(n&&(e=e[n]),$e(e,(e,t)=>{if(!1===r.call(o,e,t,n))return!1;Dt(e,r,n,o)}))}const Lt=()=>Pt(),Mt=navigator.userAgent,It=Lt(),Ft=It.browser,Ut=It.os,zt=It.deviceType,jt=-1!==Mt.indexOf("Windows Phone"),J={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ft.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ft.isIE(),windowsPhone:jt,browser:{current:Ft.current,version:Ft.version,isChromium:Ft.isChromium,isEdge:Ft.isEdge,isFirefox:Ft.isFirefox,isIE:Ft.isIE,isOpera:Ft.isOpera,isSafari:Ft.isSafari},os:{current:Ut.current,version:Ut.version,isAndroid:Ut.isAndroid,isChromeOS:Ut.isChromeOS,isFreeBSD:Ut.isFreeBSD,isiOS:Ut.isiOS,isLinux:Ut.isLinux,isMacOS:Ut.isMacOS,isSolaris:Ut.isSolaris,isWindows:Ut.isWindows},deviceType:{isDesktop:zt.isDesktop,isiPad:zt.isiPad,isiPhone:zt.isiPhone,isPhone:zt.isPhone,isTablet:zt.isTablet,isTouch:zt.isTouch,isWebView:zt.isWebView}},Vt=/^\s*|\s*$/g,Ht=e=>null==e?"":(""+e).replace(Vt,""),qt=(e,t)=>t?!("array"!==t||!qe(e))||typeof e===t:void 0!==e,Z={trim:Ht,isArray:qe,is:qt,toArray:r=>{if(qe(r))return r;{const n=[];for(let e=0,t=r.length;e<t;e++)n[e]=r[e];return n}},makeMap:(e,t,r)=>{let n;for(t=t||",","string"==typeof(e=e||[])&&(e=e.split(t)),r=r||{},n=e.length;n--;)r[e[n]]={};return r},each:$e,map:We,grep:Ke,inArray:Ge,hasOwn:Q,extend:(t,...r)=>{for(let e=0;e<r.length;e++){var n,o=r[e];for(const r in o)!Q(o,r)||void 0!==(n=o[r])&&(t[r]=n)}return t},walk:Dt,resolve:(e,t)=>{let r,n;for(t=t||window,r=0,n=(e=e.split(".")).length;r<n&&(t=t[e[r]]);r++);return t},explode:(e,t)=>!e||qt(e,"array")?e:We(e.split(t||","),Ht),_addCacheSuffix:e=>{var t=J.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},$t=(e,t,r=M)=>e.exists(e=>r(e,t)),Wt=(e,t,r)=>e.isSome()&&t.isSome()?P.some(r(e.getOrDie(),t.getOrDie())):P.none(),Kt=(e,t)=>e?P.some(t):P.none(),ee=("undefined"!=typeof window||Function("return this;")(),e=>e.dom.nodeName.toLowerCase()),Gt=e=>e.dom.nodeType,Yt=t=>e=>Gt(e)===t,Xt=Yt(1),Qt=Yt(3),Jt=Yt(9),Zt=Yt(11),er=(e,t,r)=>{if(!(V(r)||E(r)||ce(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},tr=(e,t,r)=>{er(e.dom,t,r)},rr=(e,t)=>{const r=e.dom;X(t,(e,t)=>{er(r,t,e)})},nr=(e,t)=>{e=e.dom.getAttribute(t);return null===e?void 0:e},or=(e,t)=>P.from(nr(e,t)),ar=(e,t)=>{const r=e.dom;return!(!r||!r.hasAttribute)&&r.hasAttribute(t)},ir=(e,t)=>{e.dom.removeAttribute(t)},sr=e=>he(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),lr=(e,t)=>{const r=nr(e,t);return void 0===r||""===r?[]:r.split(" ")},dr=e=>void 0!==e.dom.classList,cr=e=>lr(e,"class"),ur=(e,t)=>{{const r=lr(e,"class").concat([t]);return tr(e,"class",r.join(" ")),!0}},mr=(e,t)=>{{var r="class",n=t;const o=T(lr(e,r),e=>e!==n);return 0<o.length?tr(e,r,o.join(" ")):ir(e,r),!1}},gr=(e,t)=>{dr(e)?e.dom.classList.add(t):ur(e,t)},fr=e=>{0===(dr(e)?e.dom.classList:cr(e)).length&&ir(e,"class")},pr=(e,t)=>{dr(e)?e.dom.classList.remove(t):mr(e,t),fr(e)},hr=(e,t)=>dr(e)&&e.dom.classList.contains(t),vr=e=>void 0!==e.style&&q(e.style.getPropertyValue),br=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},yr=(e,t)=>{const r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||1<r.childNodes.length){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return br(r.childNodes[0])},te=(e,t)=>{t=(t||document).createElement(e);return br(t)},Cr=(e,t)=>{t=(t||document).createTextNode(e);return br(t)},re=br,wr=(e,t)=>{const r=[],n=e=>(r.push(e),t(e));let o=t(e);for(;(o=o.bind(n)).isSome(););return r},xr=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;{const e=r;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},kr=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,S=(e,t)=>e.dom===t.dom,Sr=(e,t)=>{const r=e.dom,n=t.dom;return r!==n&&r.contains(n)},_r=e=>re(e.dom.ownerDocument),Er=e=>Jt(e)?e:_r(e),Nr=e=>re(Er(e).dom.defaultView),Ar=e=>P.from(e.dom.parentNode).map(re),Rr=e=>P.from(e.dom.previousSibling).map(re),Tr=e=>P.from(e.dom.nextSibling).map(re),Or=e=>ke(wr(e,Rr)),Br=e=>wr(e,Tr),Pr=e=>C(e.dom.childNodes,re),Dr=(e,t)=>{e=e.dom.childNodes;return P.from(e[t]).map(re)},Lr=e=>Dr(e,0),Mr=e=>Dr(e,e.dom.childNodes.length-1),Ir=e=>e.dom.childNodes.length,Fr=e=>Zt(e)&&H(e.dom.host),Ur=q(Element.prototype.attachShadow)&&q(Node.prototype.getRootNode),zr=W(Ur),jr=Ur?e=>re(e.dom.getRootNode()):Er,Vr=e=>{if(Fr(e))return e;e=Er(e).dom.head;if(null==e)throw new Error("Head is not available yet");return re(e)},Hr=e=>re(e.dom.host),qr=e=>{if(zr()&&H(e.target)){var t=re(e.target);if(Xt(t)&&$r(t)&&e.composed&&e.composedPath){t=e.composedPath();if(t)return Ae(t)}}return P.from(e.target)},$r=e=>H(e.dom.shadowRoot),Wr=e=>{const t=Qt(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const r=t.ownerDocument;return(e=>{e=jr(e);return Fr(e)?P.some(e):P.none()})(re(t)).fold(()=>r.body.contains(t),f(Wr,Hr))},Kr=(e,t,r)=>{if(!V(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);vr(e)&&e.style.setProperty(t,r)},Gr=(e,t,r)=>{e=e.dom;Kr(e,t,r)},Yr=(e,t)=>{const r=e.dom;X(t,(e,t)=>{Kr(r,t,e)})},Xr=(e,t)=>{var r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||Wr(e)?n:Qr(r,t)},Qr=(e,t)=>vr(e)?e.style.getPropertyValue(t):"",Jr=(e,t)=>{e=e.dom,e=Qr(e,t);return P.from(e).filter(e=>0<e.length)},Zr=e=>{const t={},r=e.dom;if(vr(r))for(let e=0;e<r.style.length;e++){var n=r.style.item(e);t[n]=r.style[n]}return t},en=(e,t)=>{var r;r=e.dom,t=t,vr(r)&&r.style.removeProperty(t),$t(or(e,"style").map(lt),"")&&ir(e,"style")},tn=(t,r)=>{Ar(t).each(e=>{e.dom.insertBefore(r.dom,t.dom)})},rn=(e,t)=>{Tr(e).fold(()=>{Ar(e).each(e=>{on(e,t)})},e=>{tn(e,t)})},nn=(t,r)=>{Lr(t).fold(()=>{on(t,r)},e=>{t.dom.insertBefore(r.dom,e.dom)})},on=(e,t)=>{e.dom.appendChild(t.dom)},an=(t,e)=>{Y(e,e=>{on(t,e)})},sn=e=>{e.dom.textContent="",Y(Pr(e),e=>{ne(e)})},ne=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},ln=e=>{var r,n,t=Pr(e);0<t.length&&(r=e,Y(n=t,(e,t)=>{t=0===t?r:n[t-1];rn(t,e)})),ne(e)},dn=e=>e.dom.innerHTML,cn=(e,t)=>{const r=_r(e).dom,n=re(r.createDocumentFragment()),o=(e=>{const t=(r||document).createElement("div");return t.innerHTML=e,Pr(re(t))})(t);an(n,o),sn(e),on(e,n)},un=(e,t,r,n)=>{s=r,l=n;var s,l,r=e=>{var t,r,n,o,a,i;s(e)&&l((t=e,e=re(qr(t).getOr(t.target)),o=()=>t.stopPropagation(),a=()=>t.preventDefault(),i=g(a,o),r=t.clientX,n=t.clientY,{target:e,x:r,y:n,stop:o,prevent:a,kill:i,raw:t}))};return e.dom.addEventListener(t,r,!1),{unbind:N(mn,e,t,r,!1)}},mn=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},gn=(r,n)=>({left:r,top:n,translate:(e,t)=>gn(r+e,n+t)}),fn=gn,pn=(e,t)=>void 0!==e?e:void 0!==t?t:0,hn=e=>{var t=e.dom,r=t.ownerDocument.body;return r===t?fn(r.offsetLeft,r.offsetTop):Wr(e)?(r=t.getBoundingClientRect(),fn(r.left,r.top)):fn(0,0)},vn=e=>{var e=void 0!==e?e.dom:document,t=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop;return fn(t,e)},bn=(e,t,r)=>{const n=(void 0!==r?r.dom:document).defaultView;n&&n.scrollTo(e,t)},yn=(e,t)=>{Lt().browser.isSafari()&&q(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},Cn=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),wn=e=>{const r=void 0===e?window:e,t=r.document,n=vn(re(t));return(e=>{e=void 0===e?window:e;return Lt().browser.isFirefox()?P.none():P.from(e.visualViewport)})(r).fold(()=>{var e=r.document.documentElement,t=e.clientWidth,e=e.clientHeight;return Cn(n.left,n.top,t,e)},e=>Cn(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height))},xn=t=>e=>!!e&&e.nodeType===t,kn=e=>!!e&&!Object.getPrototypeOf(e),oe=xn(1),Sn=e=>{const t=e.map(e=>e.toLowerCase());return e=>{return!(!e||!e.nodeName)&&(e=e.nodeName.toLowerCase(),K(t,e))}},_n=(n,e)=>{const o=e.toLowerCase().split(" ");return t=>{if(oe(t))for(let e=0;e<o.length;e++){const r=t.ownerDocument.defaultView.getComputedStyle(t,null);if((r?r.getPropertyValue(n):null)===o[e])return!0}return!1}},En=t=>e=>oe(e)&&e.hasAttribute(t),Nn=e=>oe(e)&&e.hasAttribute("data-mce-bogus"),An=e=>oe(e)&&"TABLE"===e.tagName,Rn=t=>e=>{if(oe(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1},Tn=Sn(["textarea","input"]),O=xn(3),On=xn(4),Bn=xn(7),Pn=xn(8),Dn=xn(9),Ln=xn(11),x=Sn(["br"]),Mn=Sn(["img"]),In=Rn("true"),_=Rn("false"),Fn=Sn(["td","th"]),Un=Sn(["video","audio","object","embed"]),zn=Lt().browser,jn=e=>be(e,Xt),Vn=(e,t)=>e.children&&K(e.children,t);var Hn,qn,$n=(e,t,r,n,o)=>e(r,n)?P.some(r):q(o)&&o(r)?P.none():t(r,n,o);const Wn=(e,t,r)=>{let n=e.dom;const o=q(r)?r:A;for(;n.parentNode;){n=n.parentNode;const e=re(n);if(t(e))return P.some(e);if(o(e))break}return P.none()},Kn=(e,t,r)=>$n((e,t)=>t(e),Wn,e,t,r),Gn=(e,t,r)=>Wn(e,e=>xr(e,t),r),Yn=(e,t)=>{{const r=void 0===e?document:e.dom;return kr(r)?P.none():P.from(r.querySelector(t)).map(re)}},Xn=(e,t,r)=>$n((e,t)=>xr(e,t),Gn,e,t,r),Qn=(m,g={})=>{let f=0;const p={},h=re(m),v=Er(h),b=g.maxLoadTime||5e3,t=u=>new Promise((e,t)=>{let r;const n=Z._addCacheSuffix(u),o=(d=n,R(p,d).getOrThunk(()=>({id:"mce-u"+f++,passed:[],failed:[],count:0})));(p[n]=o).count++;const a=(e,t)=>{Y(e,U),o.status=t,o.passed=[],o.failed=[],r&&(r.onload=null,r.onerror=null,r=null)},i=()=>a(o.passed,2),s=()=>a(o.failed,3),l=()=>{var e=l;(()=>{var e=m.styleSheets;let t=e.length;for(;t--;){const m=e[t].ownerNode;if(m&&m.id===r.id)return i(),!0}return!1})()||(Date.now()-c<b?setTimeout(e):s())};if(e&&o.passed.push(e),t&&o.failed.push(t),1===o.status)return;if(2===o.status)return void i();if(3===o.status)return void s();o.status=1;var d=te("link",v.dom);rr(d,{rel:"stylesheet",type:"text/css",id:o.id});const c=Date.now();g.contentCssCors&&tr(d,"crossOrigin","anonymous"),g.referrerPolicy&&tr(d,"referrerpolicy",g.referrerPolicy),(r=d.dom).onload=l,r.onerror=s,e=d,on(Vr(h),e),tr(d,"href",n)}),r=e=>{const r=Z._addCacheSuffix(e);R(p,r).each(e=>{var t;0==--e.count&&(delete p[r],e=e.id,t=Vr(h),Yn(t,"#"+e).each(ne))})};return{load:t,loadAll:e=>Promise.allSettled(C(e,e=>t(e).then(W(e)))).then(e=>{e=fe(e,e=>"fulfilled"===e.status);return 0<e.fail.length?Promise.reject(C(e.fail,e=>e.reason)):C(e.pass,e=>e.value)}),unload:r,unloadAll:e=>{Y(e,e=>{r(e)})},_setReferrerPolicy:e=>{g.referrerPolicy=e}}},Jn=(()=>{const n=new WeakMap;return{forElement:(e,t)=>{const r=jr(e).dom;return P.from(n.get(r)).getOrThunk(()=>{var e=Qn(r,t);return n.set(r,e),e})}}})();class Zn{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",e),this.node}findSibling(e,t,r,n){let o,a;if(e){if(!n&&e[t])return e[t];if(e!==this.rootNode){if(o=e[r])return o;for(a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(o=a[r])return o}}}findPreviousNode(e,t,r,n){let o,a,i;if(e&&(o=e[r],!this.rootNode||o!==this.rootNode)){if(o){if(!n)for(i=o[t];i;i=i[t])if(!i[t])return i;return o}return(a=e.parentNode)&&a!==this.rootNode?a:void 0}}}const eo=t=>{let r;return e=>(r=r||_e(t,y),Q(r,ee(e)))},to=eo(["h1","h2","h3","h4","h5","h6"]),ro=eo(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),no=e=>Xt(e)&&!ro(e),oo=e=>Xt(e)&&"br"===ee(e),ao=eo(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),io=eo(["ul","ol","dl"]),so=eo(["li","dd","dt"]),lo=eo(["thead","tbody","tfoot"]),co=eo(["td","th"]),uo=eo(["pre","script","textarea","style"]),mo="\ufeff",go=" ",fo=e=>e===mo,po=mo,ho=fo,vo=e=>e.replace(/\uFEFF/g,""),bo=oe,yo=O,Co=e=>(yo(e)&&(e=e.parentNode),bo(e)&&e.hasAttribute("data-mce-caret")),wo=e=>yo(e)&&ho(e.data),xo=e=>Co(e)||wo(e),ko=e=>e.firstChild!==e.lastChild||!x(e.firstChild),So=e=>{const t=e.container();return!!O(t)&&(t.data.charAt(e.offset())===po||e.isAtStart()&&wo(t.previousSibling))},_o=e=>{const t=e.container();return!!O(t)&&(t.data.charAt(e.offset()-1)===po||e.isAtEnd()&&wo(t.nextSibling))},Eo=e=>yo(e)&&e.data[0]===po,No=e=>yo(e)&&e.data[e.data.length-1]===po,Ao=e=>{{if(e&&e.hasAttribute("data-mce-caret")){{const t=e.getElementsByTagName("br"),r=t[t.length-1];Nn(r)&&r.parentNode.removeChild(r)}return e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e}return null}},Ro=e=>Co(e.startContainer),To=In,Oo=_,Bo=x,Po=O,Do=Sn(["script","style","textarea"]),Lo=Sn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Mo=Sn(["table"]),Io=xo,Fo=e=>!Io(e)&&(Po(e)?!Do(e.parentNode):Lo(e)||Bo(e)||Mo(e)||Uo(e)),Uo=e=>!1===(e=>oe(e)&&"true"===e.getAttribute("unselectable"))(e)&&Oo(e),zo=(e,t)=>Fo(e)&&((e,t)=>{for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Uo(e))return!1;if(To(e))return!0}return!0})(e,t),jo=/^[ \t\r\n]*$/,Vo=e=>jo.test(e),Ho=e=>"\n"===e||"\r"===e,qo=(e,t=4,r=!0,n=!0)=>{const o=t<=0?"":new Array(t+1).join(" "),a=e.replace(/\t/g,o),i=he(a,(e,t)=>-1!==" \f\t\v".indexOf(t)||t===go?e.pcIsSpace||""===e.str&&r||e.str.length===a.length-1&&n||((e,t)=>t<e.length&&0<=t&&Ho(e[t]))(a,e.str.length+1)?{pcIsSpace:!1,str:e.str+go}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:Ho(t),str:e.str+t},{pcIsSpace:!1,str:""});return i.str},$o=(e,t)=>Fo(e)&&!1===((e,t)=>O(e)&&Vo(e.data)&&!1===((e,t)=>{var t=re(t),e=re(e),t=N(S,t);return Gn(e,"pre,code",t).isSome()})(e,t))(e,t)||(e=>oe(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")))(e)||Wo(e),Wo=En("data-mce-bookmark"),Ko=En("data-mce-bogus"),Go=(e,r=!0)=>{{var n=e.dom,o=r,a;let t=0;if($o(n,n))return!1;{let e=n.firstChild;if(!e)return!0;const i=new Zn(e,n);do{if(o){if(a=e,oe(a)&&"all"===a.getAttribute("data-mce-bogus")){e=i.next(!0);continue}if(Ko(e)){e=i.next();continue}}if(x(e))t++,e=i.next();else{if($o(e,n))return!1;e=i.next()}}while(e);return t<=1}}},Yo=(e,t)=>H(e)&&($o(e,t)||no(re(e))),Xo=e=>"span"===e.nodeName.toLowerCase()&&"bookmark"===e.getAttribute("data-mce-type"),Qo=(t,e,r)=>{var n=r||e;if(oe(e)&&Xo(e))return e;var o,a=e.childNodes;for(let e=a.length-1;0<=e;e--)Qo(t,a[e],n);if(oe(e)){const t=e.childNodes;1===t.length&&Xo(t[0])&&e.parentNode.insertBefore(t[0],e)}return r=e,Ln(r)||Dn(r)||$o(e,n)||(r=e,!!oe(r)&&0<r.childNodes.length)||(r=e,o=n,O(r)&&0<r.data.length&&((e,t)=>{var r=new Zn(e,t).prev(!1),e=new Zn(e,t).next(!1),r=D(r)||Yo(r,t),e=D(e)||Yo(e,t);return r&&e})(r,o))||t.remove(e),e},Jo=Z.makeMap,Zo=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ea=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ta=/[<>&\"\']/g,ra=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,na={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},oa={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},aa={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ia=(e,t)=>{let r,n,o;const a={};if(e){for(e=e.split(","),t=t||10,r=0;r<e.length;r+=2)n=String.fromCharCode(parseInt(e[r],t)),oa[n]||(o="&"+e[r+1]+";",a[n]=o,a[o]=n);return a}},sa=ia("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),la=(e,t)=>e.replace(t?Zo:ea,e=>oa[e]||e),da=(e,t)=>e.replace(t?Zo:ea,e=>1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":oa[e]||"&#"+e.charCodeAt(0)+";"),ca=(e,t,r)=>(r=r||sa,e.replace(t?Zo:ea,e=>oa[e]||r[e]||e)),ua={encodeRaw:la,encodeAllRaw:e=>(""+e).replace(ta,e=>oa[e]||e),encodeNumeric:da,encodeNamed:ca,getEncodeFunc:(e,t)=>{const r=ia(t)||sa,n=Jo(e.replace(/\+/g,","));return n.named&&n.numeric?(e,t)=>e.replace(t?Zo:ea,e=>void 0!==oa[e]?oa[e]:void 0!==r[e]?r[e]:1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"):n.named?t?(e,t)=>ca(e,t,r):ca:n.numeric?da:la},decode:e=>e.replace(ra,(e,t)=>t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):na[t]||String.fromCharCode(t):aa[e]||sa[e]||(e=>{const t=te("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e})(e))},ma={},ga={},fa=Z.makeMap,pa=Z.each,ha=Z.extend,va=Z.explode,ba=Z.inArray,ya=(e,t)=>(e=Z.trim(e))?e.split(t||" "):[],Ca=(e,r)=>{let n;return e&&(n={},"string"==typeof e&&(e={"*":e}),pa(e,(e,t)=>{n[t]=n[t.toUpperCase()]=("map"===r?fa:va)(e,/[, ]/)})),n},wa=o=>{const k={},i={};let S=[];const s={},t={},e=(e,t,r)=>{let n=o[e];return n?n=fa(n,/[, ]/,fa(n.toUpperCase(),/[, ]/)):(n=ma[e])||(n=fa(t," ",fa(t.toUpperCase()," ")),n=ha(n,r),ma[e]=n),n},r=null!=(A=(o=o||{}).schema)?A:"html5",n=(e=>{const i={};let s,t,r,n,o,a;const l=(e,t="",r="")=>{var n=ya(r),o=ya(e);let a=o.length;for(;a--;){const e=ya([s,t].join(" "));i[o[a]]={attributes:_e(e,()=>({})),attributesOrder:e,children:_e(n,W(ga))}}},d=(r,e)=>{var t=ya(r),n=ya(e);let o=t.length;for(;o--;){const r=i[t[o]];for(let e=0,t=n.length;e<t;e++)r.attributes[n[e]]={},r.attributesOrder.push(n[e])}};return ma[e]||(s="id accesskey class dir lang style tabindex title role",t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(s+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",t+=" article aside details dialog figure main header footer hgroup section nav",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(s+=" xml:lang",a="acronym applet basefont big font strike tt",r=[r,a].join(" "),pa(ya(a),e=>{l(e,"",r)}),o="center dir isindex noframes",t=[t,o].join(" "),n=[t,r].join(" "),pa(ya(o),e=>{l(e,"",n)})),n=n||[t,r].join(" "),l("html","manifest","head body"),l("head","","base command link meta noscript script style title"),l("title hr noscript br"),l("base","href target"),l("link","href rel media hreflang type sizes hreflang"),l("meta","name http-equiv content charset"),l("style","media type scoped"),l("script","src async defer type charset"),l("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",n),l("address dt dd div caption","",n),l("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),l("blockquote","cite",n),l("ol","reversed start type","li"),l("ul","","li"),l("li","value",n),l("dl","","dt dd"),l("a","href target rel media hreflang type",r),l("q","cite",r),l("ins del","cite datetime",n),l("img","src sizes srcset alt usemap ismap width height"),l("iframe","src name width height",n),l("embed","src type width height"),l("object","data type typemustmatch name usemap form width height",[n,"param"].join(" ")),l("param","name value"),l("map","name",[n,"area"].join(" ")),l("area","alt coords shape href target rel media hreflang type"),l("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),l("colgroup","span","col"),l("col","span"),l("tbody thead tfoot","","tr"),l("tr","","td th"),l("td","colspan rowspan headers",n),l("th","colspan rowspan headers scope abbr",n),l("form","accept-charset action autocomplete enctype method name novalidate target",n),l("fieldset","disabled form name",[n,"legend"].join(" ")),l("label","form for",r),l("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),l("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?n:r),l("select","disabled form multiple name required size","option optgroup"),l("optgroup","disabled label","option"),l("option","disabled label selected value"),l("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),l("menu","type label",[n,"li"].join(" ")),l("noscript","",n),"html4"!==e&&(l("wbr"),l("ruby","",[r,"rt rp"].join(" ")),l("figcaption","",n),l("mark rt rp summary bdi","",r),l("canvas","width height",n),l("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[n,"track source"].join(" ")),l("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[n,"track source"].join(" ")),l("picture","","img source"),l("source","src srcset type media sizes"),l("track","kind src srclang label default"),l("datalist","",[r,"option"].join(" ")),l("article section nav aside main header footer","",n),l("hgroup","","h1 h2 h3 h4 h5 h6"),l("figure","",[n,"figcaption"].join(" ")),l("time","datetime",r),l("dialog","open",n),l("command","type label icon disabled checked radiogroup command"),l("output","for form name",r),l("progress","value max",r),l("meter","value min max low high optimum",r),l("details","open",[n,"summary"].join(" ")),l("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(d("script","language xml:space"),d("style","xml:space"),d("object","declare classid code codebase codetype archive standby align border hspace vspace"),d("embed","align name hspace vspace"),d("param","valuetype type"),d("a","charset name rev shape coords"),d("br","clear"),d("applet","codebase archive code object alt name width height align hspace vspace"),d("img","name longdesc align border hspace vspace"),d("iframe","longdesc frameborder marginwidth marginheight scrolling align"),d("font basefont","size color face"),d("input","usemap align"),d("select"),d("textarea"),d("h1 h2 h3 h4 h5 h6 div p legend caption","align"),d("ul","type compact"),d("li","type"),d("ol dl menu dir","compact"),d("pre","width xml:space"),d("hr","align noshade size width"),d("isindex","prompt"),d("table","summary width frame rules cellspacing cellpadding align bgcolor"),d("col","width align char charoff valign"),d("colgroup","width align char charoff valign"),d("thead","align char charoff valign"),d("tr","align char charoff valign bgcolor"),d("th","axis align char charoff valign nowrap bgcolor width height"),d("form","accept"),d("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),d("tfoot","align char charoff valign"),d("tbody","align char charoff valign"),d("area","nohref"),d("body","background bgcolor text link vlink alink")),"html4"!==e&&(d("input button select textarea","autofocus"),d("input textarea","placeholder"),d("a","download"),d("link script img","crossorigin"),d("img","loading"),d("iframe","sandbox seamless allowfullscreen loading")),"html4"!==e&&Y([i.video,i.audio],e=>{delete e.children.audio,delete e.children.video}),pa(ya("a form meter progress dfn"),e=>{i[e]&&delete i[e].children[e]}),delete i.caption.children.table,delete i.script,ma[e]=i)})(r),a=(!1===o.verify_html&&(o.valid_elements="*[*]"),Ca(o.valid_styles)),l=Ca(o.invalid_styles,"map"),d=Ca(o.valid_classes,"map"),c=e("whitespace_elements","pre script noscript style textarea video audio iframe object code"),u=e("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),m=e("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),g=e("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),f="td th iframe video audio object script code",p=e("non_empty_elements",f+" pre",m),h=e("move_caret_before_on_enter_elements",f+" table",m),v=e("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),b=e("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",v),y=e("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),_=(pa("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),e=>{t[e]=new RegExp("</"+e+"[^>]*>","gi")}),e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")),C=e=>{let t,r,n,o,a,i,s,l,d,c,u,m,g,f,p,h,v,b;const y=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,C=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,w=/[*?+]/;if(e){var x=ya(e,",");for(k["@"]&&(h=k["@"].attributes,v=k["@"].attributesOrder),t=0,r=x.length;t<r;t++)if(a=y.exec(x[t])){if(f=a[1],d=a[2],p=a[3],l=a[5],m={},g=[],i={attributes:m,attributesOrder:g},"#"===f&&(i.paddEmpty=!0),"-"===f&&(i.removeEmpty=!0),"!"===a[4]&&(i.removeEmptyAttrs=!0),h&&(X(h,(e,t)=>{m[t]=e}),g.push.apply(g,v)),l)for(l=ya(l,"|"),n=0,o=l.length;n<o;n++)if(a=C.exec(l[n])){if(s={},u=a[1],c=a[2].replace(/[\\:]:/g,":"),f=a[3],b=a[4],"!"===u&&(i.attributesRequired=i.attributesRequired||[],i.attributesRequired.push(c),s.required=!0),"-"===u){delete m[c],g.splice(ba(g,c),1);continue}f&&("="===f&&(i.attributesDefault=i.attributesDefault||[],i.attributesDefault.push({name:c,value:b}),s.defaultValue=b),"~"===f&&(i.attributesForced=i.attributesForced||[],i.attributesForced.push({name:c,value:b}),s.forcedValue=b),"<"===f&&(s.validValues=fa(b,"?"))),w.test(c)?(i.attributePatterns=i.attributePatterns||[],s.pattern=_(c),i.attributePatterns.push(s)):(m[c]||g.push(c),m[c]=s)}h||"@"!==d||(h=m,v=g),p&&(i.outputName=d,k[p]=i),w.test(d)?(i.pattern=_(d),S.push(i)):k[d]=i}}},w=e=>{S=[],Y(Be(k),e=>{delete k[e]}),C(e),pa(n,(e,t)=>{i[t]=e.children})},x=e=>{const a=/^(~)?(.+)$/;e&&(ma.text_block_elements=ma.block_elements=null,pa(ya(e,","),e=>{const t=a.exec(e),r="~"===t[1],n=r?"span":"div",o=t[2];if(i[o]=i[n],s[o]=n,r||(b[o.toUpperCase()]={},b[o]={}),!k[o]){let e=k[n];delete(e=ha({},e)).removeEmptyAttrs,delete e.removeEmpty,k[o]=e}pa(i,(e,t)=>{e[n]&&(i[t]=e=ha({},i[t]),e[o]=e[n])})}))},E=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;ma[r]=null,e&&pa(ya(e,","),e=>{e=n.exec(e);let t,r;e&&(r=e[1],t=r?i[e[2]]:i[e[2]]={"#comment":{}},t=i[e[2]],pa(ya(e[3],"|"),e=>{"-"===r?delete t[e]:t[e]={}}))})},N=e=>{let t,r=k[e];if(r)return r;for(t=S.length;t--;)if((r=S[t]).pattern.test(e))return r};o.valid_elements?w(o.valid_elements):(pa(n,(e,t)=>{k[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},i[t]=e.children}),pa(ya("strong/b em/i"),e=>{e=ya(e,"/");k[e[1]].outputName=e[0]}),pa(ya("ol ul sub sup blockquote span font a table tbody strong em b i"),e=>{k[e]&&(k[e].removeEmpty=!0)}),pa(ya("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),e=>{k[e].paddEmpty=!0}),pa(ya("span"),e=>{k[e].removeEmptyAttrs=!0})),x(o.custom_elements),E(o.valid_children),C(o.extended_valid_elements),E("+ol[ul|ol],+ul[ul|ol]"),pa({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(e,t)=>{k[t]&&(k[t].parentsRequired=ya(e))}),o.invalid_elements&&pa(va(o.invalid_elements),e=>{k[e]&&delete k[e]}),N("span")||C("span[!data-mce-type|*]");var A=W(a),R=W(l),T=W(d),O=W(g),B=W(b),P=W(v),D=W(y),L=W(Object.seal(m)),M=W(u),I=W(p),F=W(h),U=W(c),z=W(Object.seal(t)),j=W(s);return{type:r,children:i,elements:k,getValidStyles:A,getValidClasses:T,getBlockElements:B,getInvalidStyles:R,getVoidElements:L,getTextBlockElements:P,getTextInlineElements:D,getBoolAttrs:O,getElementRule:N,getSelfClosingElements:M,getNonEmptyElements:I,getMoveCaretBeforeOnEnterElements:F,getWhitespaceElements:U,getSpecialElements:z,isValidChild:(e,t)=>{e=i[e.toLowerCase()];return!(!e||!e[t.toLowerCase()])},isValid:(e,t)=>{let r,n;e=N(e);if(e){if(!t)return!0;if(e.attributes[t])return!0;if(r=e.attributePatterns)for(n=r.length;n--;)if(r[n].pattern.test(t))return!0}return!1},getCustomElements:j,addValidElements:C,setValidElements:w,addCustomElements:x,addValidChildren:E}},xa=(b,e)=>{const y=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,C=/\s*([^:]+):\s*([^;]+);?/g,w=/\s+$/;let x;const k={};let t,n;b=b||{},e&&(t=e.getValidStyles(),n=e.getInvalidStyles());var r="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(x=0;x<r.length;x++)k[r[x]]="\ufeff"+x,k["\ufeff"+x]=r[x];const S={parse:e=>{const l={};let t,r,n,o;const i=b.url_converter,s=b.url_converter_scope||S,a=(e,t,r)=>{var n=l[e+"-top"+t];if(n){var o=l[e+"-right"+t];if(o){var a=l[e+"-bottom"+t];if(a){var i=l[e+"-left"+t];if(i){const s=[n,o,a,i];for(x=s.length-1;x--&&s[x]===s[x+1];);-1<x&&r||(l[e+t]=-1===x?s[0]:s.join(" "),delete l[e+"-top"+t],delete l[e+"-right"+t],delete l[e+"-bottom"+t],delete l[e+"-left"+t])}}}}},d=e=>{let t,r=l[e];if(r){for(r=r.split(" "),t=r.length;t--;)if(r[t]!==r[0])return!1;return l[e]=r[0],!0}},c=e=>(o=!0,k[e]),u=(e,t)=>(o&&(e=e.replace(/\uFEFF[0-9]/g,e=>k[e])),e=t?e:e.replace(/\\([\'\";:])/g,"$1")),m=e=>String.fromCharCode(parseInt(e.slice(1),16)),g=e=>e.replace(/\\[0-9a-f]+/gi,m),f=(e,t,r,n,o,a)=>{if(o=o||a)return"'"+(o=u(o)).replace(/\'/g,"\\'")+"'";if(t=u(t||r||n),!b.allow_script_urls){const e=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(e))return"";if(!b.allow_svg_data_urls&&/^data:image\/svg/i.test(e))return""}return"url('"+(t=i?i.call(s,t,"style"):t).replace(/\'/g,"\\'")+"')"};if(e){for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,c).replace(/\"[^\"]+\"|\'[^\']+\'/g,e=>e.replace(/[;:]/g,c));t=C.exec(e);)if(C.lastIndex=t.index+t[0].length,r=t[1].replace(w,"").toLowerCase(),n=t[2].replace(w,""),r&&n){if(r=g(r),n=g(n),-1!==r.indexOf("\ufeff")||-1!==r.indexOf('"'))continue;if(!b.allow_script_urls&&("behavior"===r||/expression\s*\(|\/\*|\*\//.test(n)))continue;"font-weight"===r&&"700"===n?n="bold":"color"!==r&&"background-color"!==r||(n=n.toLowerCase()),n=n.replace(y,f),l[r]=o?u(n,!0):n}a("border","",!0),a("border","-width"),a("border","-color"),a("border","-style"),a("padding",""),a("margin",""),h="border-style",v="border-color",d(p="border-width")&&d(h)&&d(v)&&(l.border=l[p]+" "+l[h]+" "+l[v],delete l[p],delete l[h],delete l[v]),"medium none"===l.border&&delete l.border,"none"===l["border-image"]&&delete l["border-image"]}var p,h,v;return l},serialize:(a,r)=>{let i="";var e=r=>{var n,o=t[r];if(o)for(let e=0,t=o.length;e<t;e++)r=o[e],(n=a[r])&&(i+=(0<i.length?" ":"")+r+": "+n+";")};return r&&t?(e("*"),e(r)):X(a,(e,t)=>{!e||n&&!((e,t)=>{let r=n["*"];return!(r&&r[e]||(r=n[t])&&r[e])})(t,r)||(i+=(0<i.length?" ":"")+t+": "+e+";")}),i}};return S},ka={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Sa=(e,t)=>{const r=null!=t?t:{};for(const t in e)Q(ka,t)||(r[t]=e[t]);return H(r.composedPath)&&(r.composedPath=()=>e.composedPath()),r},_a=(e,t,r,n)=>{const o=Sa(t,n);return o.type=e,de(o.target)&&(o.target=null!=(n=o.srcElement)?n:r),e=t,(de(e.preventDefault)||(e=>e instanceof Event||q(e.initEvent))(e))&&(o.preventDefault=()=>{o.defaultPrevented=!0,o.isDefaultPrevented=y,q(t.preventDefault)&&t.preventDefault()},o.stopPropagation=()=>{o.cancelBubble=!0,o.isPropagationStopped=y,q(t.stopPropagation)&&t.stopPropagation()},o.stopImmediatePropagation=()=>{o.isImmediatePropagationStopped=y,o.stopPropagation()},(n=o).isDefaultPrevented!==y&&n.isDefaultPrevented!==A&&(o.isDefaultPrevented=!0===o.defaultPrevented?y:A,o.isPropagationStopped=!0===o.cancelBubble?y:A,o.isImmediatePropagationStopped=A)),o},Ea=/^(?:mouse|contextmenu)|click/,Na=(e,t,r,n)=>{e.addEventListener?e.addEventListener(t,r,n||!1):e.attachEvent&&e.attachEvent("on"+t,r)},Aa=(e,t,r,n)=>{e.removeEventListener?e.removeEventListener(t,r,n||!1):e.detachEvent&&e.detachEvent("on"+t,r)},Ra=(e,t)=>{var r=_a(e.type,e,document,t);if(t=e,H(t)&&Ea.test(t.type)&&D(e.pageX)&&!D(e.clientX)){const t=r.target.ownerDocument||document,n=t.documentElement,o=t.body,a=r;a.pageX=e.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),a.pageY=e.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)}return r};class Ta{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,t,r,n){const o=this;let a,i,s,l,d,c,u;const m=window,g=e=>{o.executeHandlers(Ra(e||m.event),a)};if(e&&3!==e.nodeType&&8!==e.nodeType){e[o.expando]?a=e[o.expando]:(a=o.count++,e[o.expando]=a,o.events[a]={}),n=n||e;var f=t.split(" ");for(s=f.length;s--;)l=f[s],c=g,d=u=!1,"DOMContentLoaded"===l&&(l="ready"),o.domLoaded&&"ready"===l&&"complete"===e.readyState?r.call(n,Ra({type:l})):(o.hasMouseEnterLeave||(d=o.mouseEnterLeave[l])&&(c=e=>{const t=e.currentTarget;let r=e.relatedTarget;if(r&&t.contains)r=t.contains(r);else for(;r&&r!==t;)r=r.parentNode;r||((e=Ra(e||m.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,o.executeHandlers(e,a))}),o.hasFocusIn||"focusin"!==l&&"focusout"!==l||(u=!0,d="focusin"===l?"focus":"blur",c=e=>{(e=Ra(e||m.event)).type="focus"===e.type?"focusin":"focusout",o.executeHandlers(e,a)}),(i=o.events[a][l])?"ready"===l&&o.domLoaded?r(Ra({type:l})):i.push({func:r,scope:n}):(o.events[a][l]=i=[{func:r,scope:n}],i.fakeName=d,i.capture=u,i.nativeHandler=c,"ready"===l?((e,t,r)=>{const n=e.document,o={type:"ready"};if(r.domLoaded)t(o);else{const a=()=>{Aa(e,"DOMContentLoaded",a),Aa(e,"load",a),r.domLoaded||(r.domLoaded=!0,t(o)),e=null};"complete"===n.readyState||"interactive"===n.readyState&&n.body?a():Na(e,"DOMContentLoaded",a),r.domLoaded||Na(e,"load",a)}})(e,c,o):Na(e,d||l,c,u)));return e=i=null,r}}unbind(r,e,t){let n,o,a,i,s;if(!r||3===r.nodeType||8===r.nodeType)return this;const l=r[this.expando];if(l){if(s=this.events[l],e){const l=e.split(" ");for(o=l.length;o--;)if(i=l[o],n=s[i]){if(t)for(a=n.length;a--;)if(n[a].func===t){const r=n.nativeHandler,e=n.fakeName,t=n.capture;(n=n.slice(0,a).concat(n.slice(a+1))).nativeHandler=r,n.fakeName=e,n.capture=t,s[i]=n}t&&0!==n.length||(delete s[i],Aa(r,n.fakeName||i,n.nativeHandler,n.capture))}}else X(s,(e,t)=>{Aa(r,e.fakeName||t,e.nativeHandler,e.capture)}),s={};for(i in s)if(Q(s,i))return this;delete this.events[l];try{delete r[this.expando]}catch(e){r[this.expando]=null}}return this}fire(e,t,r){return this.dispatch(e,t,r)}dispatch(e,t,r){var n;if(!e||3===e.nodeType||8===e.nodeType)return this;const o=Ra({type:t,target:e},r);for(;(n=e[this.expando])&&this.executeHandlers(o,n),(e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow)&&!o.isPropagationStopped(););return this}clean(e){let t,r;if(!e||3===e.nodeType||8===e.nodeType)return this;if(e[this.expando]&&this.unbind(e),(e=e.getElementsByTagName?e:e.document)&&e.getElementsByTagName)for(this.unbind(e),r=e.getElementsByTagName("*"),t=r.length;t--;)(e=r[t])[this.expando]&&this.unbind(e);return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(r,e){const n=this.events[e],o=n&&n[r.type];if(o)for(let e=0,t=o.length;e<t;e++){const n=o[e];if(n&&!1===n.func.call(n.scope,r)&&r.preventDefault(),r.isImmediatePropagationStopped())return}}}Ta.Event=new Ta;const Oa=Z.each,Ba=Z.grep,Pa="data-mce-style",Da=(e,t,r)=>{de(r)||""===r?ir(e,t):tr(e,t,r)},La=(e,t)=>{let r,n,o=0;if(e)for(r=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)n=e.nodeType,(!t||3!==n||n!==r&&e.nodeValue.length)&&(o++,r=n);return o},Ma=Z.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Ia=e=>e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),ae=(s,l={})=>{const n={},a=window,r={};let I=0;const o=Jn.forElement(re(s),{contentCssCors:l.contentCssCors,referrerPolicy:l.referrerPolicy}),i=[],d=l.schema||wa({}),c=xa({url_converter:l.url_converter,url_converter_scope:l.url_converter_scope},l.schema),u=l.ownEvents?new Ta:Ta.Event,t=d.getBlockElements(),m=e=>e&&s&&V(e)?s.getElementById(e):e,g=e=>{e=m(e);return H(e)?re(e):null},f=(e,t,r)=>{let n;var o=g(e);if(H(o)&&Xt(o)){const e=j[t];n=e&&e.get?e.get(o.dom,t):nr(o,t)}return H(n)?n:null!=r?r:""},p=e=>{e=m(e);return de(e)?[]:e.attributes},h=(e,n,o)=>{_(e,e=>{if(oe(e)){e=re(e);""===o&&(o=null);const t=nr(e,n),r=j[n];r&&r.set?r.set(e.dom,o,n):Da(e,n,o),t!==o&&l.onSetAttrib&&l.onSetAttrib({attrElm:e,attrName:n,attrValue:o})}})},v=()=>l.root_element||s.body,b=(n,o)=>{{var a=s.body,i=(n=m(n),o);let t=0,r=0;if(o=a.ownerDocument,i=i||a,n){if(i===a&&n.getBoundingClientRect&&"static"===Xr(re(a),"position")){const i=n.getBoundingClientRect();return t=i.left+(o.documentElement.scrollLeft||a.scrollLeft)-o.documentElement.clientLeft,r=i.top+(o.documentElement.scrollTop||a.scrollTop)-o.documentElement.clientTop,{x:t,y:r}}let e=n;for(;e&&e!==i&&e.nodeType&&!Vn(e,i);){const a=e;t+=a.offsetLeft||0,r+=a.offsetTop||0,e=a.offsetParent}for(e=n.parentNode;e&&e!==i&&e.nodeType&&!Vn(e,i);)t-=e.scrollLeft||0,r-=e.scrollTop||0,e=e.parentNode;r+=(a=re(n),zn.isFirefox()&&"table"===ee(a)?jn(Pr(a)).filter(e=>"caption"===ee(e)).bind(n=>jn(Br(n)).map(e=>{var e=e.dom.offsetTop,t=n.dom.offsetTop,r=n.dom.offsetHeight;return e<=t?-r:0})).getOr(0):0)}return{x:t,y:r}}},y=(e,o,a)=>{const n=(e,t)=>V(e)?e:ce(e)?Q(Ma,t)?e+"":e+"px":De(e,n),i=(e,t,r)=>{t=Ia(t);de(r)||""===r?en(e,t):Gr(e,t,n(r,t))};_(e,e=>{const r=re(e);var t,n;V(o)?i(r,o,a):X(o,(e,t)=>{i(r,t,e)}),l.update_styles&&(e=c,t=r,n=nr(t,"style"),e=e.serialize(e.parse(n),ee(t)),Da(t,Pa,e))})},C=(e,t,r)=>{e=m(e);if(!de(e)&&oe(e))return r?Xr(re(e),Ia(t)):("float"===(t=t.replace(/-(\D)/g,(e,t)=>t.toUpperCase()))&&(t="cssFloat"),e.style?e.style[t]:void 0)},w=e=>{let t,r;e=m(e);return t=C(e,"width"),r=C(e,"height"),-1===t.indexOf("px")&&(t=0),-1===r.indexOf("px")&&(r=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight}},x=(e,t)=>{if(!e)return!1;e=le(e)?e:[e];return G(e,e=>xr(re(e),t))},k=(e,t,r,n)=>{const o=[];let a,i=m(e);for(n=void 0===n,r=r||("BODY"!==v().nodeName?v().parentNode:null),V(t)&&(t="*"===(a=t)?oe:e=>x(e,a));i&&!(i===r||de(i.nodeType)||Dn(i)||Ln(i));){if(!t||t(i)){if(!n)return[i];o.push(i)}i=i.parentNode}return n?o:null},S=(e,t,r)=>{let n=t;if(e)for(V(t)&&(n=e=>x(e,t)),e=e[r];e;e=e[r])if(q(n)&&n(e))return e;return null},_=function(r,n,e){const o=null!=e?e:this,t=V(r)?m(r):r;if(!t)return!1;if(!le(t)||!t.length&&0!==t.length)return n.call(o,t);{const r=[];return Oa(t,(e,t)=>{e&&r.push(n.call(o,V(e)?m(e):e,t))}),r}},E=(e,t)=>{_(e,r=>{X(t,(e,t)=>{h(r,t,e)})})},N=(e,t)=>{_(e,e=>{e=re(e);cn(e,t)})},A=(e,r,n,o,a)=>_(e,e=>{const t=V(r)?s.createElement(r):r;return H(n)&&E(t,n),o&&(!V(o)&&o.nodeType?t.appendChild(o):V(o)&&N(t,o)),a?t:e.appendChild(t)}),R=(e,t,r)=>A(s.createElement(e),e,t,r,!0),T=ua.encodeAllRaw,O=(e,r)=>_(e,e=>{const t=re(e);return r&&Y(Pr(t),e=>{Qt(e)&&0===e.dom.length?ne(e):tn(t,e)}),ne(t),t.dom}),B=(e,n,o)=>{_(e,e=>{if(oe(e)){const t=re(e),r=n.split(" ");Y(r,e=>{(H(o)?o?gr:pr:(e,t)=>{var r;dr(e)?e.dom.classList.toggle(t):(r=e,t=t,(K(cr(r),t)?mr:ur)(r,t));fr(e)})(t,e)})}})},P=(t,e,r)=>_(e,e=>(le(e)&&(t=t.cloneNode(!0)),r&&Oa(Ba(e.childNodes),e=>{t.appendChild(e)}),e.parentNode.replaceChild(t,e))),D=e=>{if(oe(e)){var t="a"===e.nodeName.toLowerCase()&&!f(e,"href")&&f(e,"id");if(f(e,"name")||f(e,"data-mce-bookmark")||t)return!0}return!1},L=()=>s.createRange(),F=(t,r,n,o)=>{if(le(t)){let e=t.length;const l=[];for(;e--;)l[e]=F(t[e],r,n,o);return l}return!l.collect||t!==s&&t!==a||i.push([t,r,n,o]),u.bind(t,r,n,o||M)},U=(t,r,n)=>{if(le(t)){let e=t.length;const a=[];for(;e--;)a[e]=U(t[e],r,n);return a}if(0<i.length&&(t===s||t===a)){let e=i.length;for(;e--;){const a=i[e];t!==a[0]||r&&r!==a[1]||n&&n!==a[2]||u.unbind(a[0],a[1],a[2])}}return u.unbind(t,r,n)},z=e=>{var t;return e&&oe(e)?(t=e.getAttribute("data-mce-contenteditable"))&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null:null},M={doc:s,settings:l,win:a,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:o,boundEvents:i,styles:c,schema:d,events:u,isBlock:e=>V(e)?Q(t,e):oe(e)&&Q(t,e.nodeName),root:null,clone:(e,t)=>e.cloneNode(t),getRoot:v,getViewPort:e=>{e=wn(e);return{x:e.x,y:e.y,w:e.width,h:e.height}},getRect:e=>{var e=m(e),t=b(e),e=w(e);return{x:t.x,y:t.y,w:e.w,h:e.h}},getSize:w,getParent:(e,t,r)=>{e=k(e,t,r,!1);return e&&0<e.length?e[0]:null},getParents:k,get:m,getNext:(e,t)=>S(e,t,"nextSibling"),getPrev:(e,t)=>S(e,t,"previousSibling"),select:(e,t)=>{const r=null!=(t=null!=(t=m(t))?t:l.root_element)?t:s;return Te(r.querySelectorAll(e))},is:x,add:A,create:R,createHTML:(e,t,r="")=>{let n,o="";for(n in o+="<"+e,t)Ve(t,n)&&(o+=" "+n+'="'+T(t[n])+'"');return mt(r)&&Q(d.getVoidElements(),e)?o+" />":o+">"+r+"</"+e+">"},createFragment:e=>{var t;const r=s.createElement("div"),n=s.createDocumentFragment();for(n.appendChild(r),e&&(r.innerHTML=e);t=r.firstChild;)n.appendChild(t);return n.removeChild(r),n},remove:O,setStyle:y,getStyle:C,setStyles:(e,t)=>{y(e,t)},removeAllAttribs:e=>_(e,t=>{const r=t.attributes;for(let e=r.length-1;0<=e;e--)t.removeAttributeNode(r.item(e))}),setAttrib:h,setAttribs:E,getAttrib:f,getPos:b,parseStyle:e=>c.parse(e),serializeStyle:(e,t)=>c.serialize(e,t),addStyle:e=>{let t,r;if(M!==ae.DOM&&s===document){if(n[e])return;n[e]=!0}(r=s.getElementById("mceDefaultStyles"))||((r=s.createElement("style")).id="mceDefaultStyles",r.type="text/css",(t=s.getElementsByTagName("head")[0]).firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(s.createTextNode(e))},loadCSS:e=>{e=e||"",Y(e.split(","),e=>{r[e]=!0,o.load(e).catch($)})},addClass:(e,t)=>{B(e,t,!0)},removeClass:(e,t)=>{B(e,t,!1)},hasClass:(e,t)=>{const r=g(e),n=t.split(" ");return xe(n,e=>hr(r,e))},toggleClass:B,show:e=>{_(e,e=>en(re(e),"display"))},hide:e=>{_(e,e=>Gr(re(e),"display","none"))},isHidden:e=>{e=g(e);return $t(Jr(e,"display"),"none")},uniqueId:e=>(e||"mce_")+I++,setHTML:N,getOuterHTML:e=>{var t,e=g(e);return oe(e.dom)?e.dom.outerHTML:(e=e,t=te("div"),e=re(e.dom.cloneNode(!0)),on(t,e),dn(t))},setOuterHTML:(e,t)=>{_(e,e=>{oe(e)&&(e.outerHTML=t)})},decode:ua.decode,encode:T,insertAfter:(e,t)=>{const n=m(t);return _(e,e=>{const t=n.parentNode,r=n.nextSibling;return r?t.insertBefore(e,r):t.appendChild(e),e})},replace:P,rename:(t,e)=>{let r;return t.nodeName!==e.toUpperCase()&&(r=R(e),Oa(p(t),e=>{h(r,e.nodeName,f(t,e.nodeName))}),P(r,t,!0)),r||t},findCommonAncestor:(e,t)=>{let r,n=e;for(;n;){for(r=t;r&&n!==r;)r=r.parentNode;if(n===r)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},run:_,getAttribs:p,isEmpty:(e,t)=>{let r,n,o=0;if(D(e))return!1;if(e=e.firstChild){const a=new Zn(e,e.parentNode),i=d?d.getWhitespaceElements():{};t=t||(d?d.getNonEmptyElements():null);do{if(r=e.nodeType,oe(e)){const r=e.getAttribute("data-mce-bogus");if(r){e=a.next("all"===r);continue}if(n=e.nodeName.toLowerCase(),t&&t[n]){if("br"!==n)return!1;o++,e=a.next();continue}if(D(e))return!1}if(8===r)return!1;if(3===r&&!Vo(e.nodeValue))return!1;if(3===r&&e.parentNode&&i[e.parentNode.nodeName]&&Vo(e.nodeValue))return!1;e=a.next()}while(e)}return o<=1},createRng:L,nodeIndex:La,split:(e,t,r)=>{let n,o,a,i=L();if(e&&t)return i.setStart(e.parentNode,La(e)),i.setEnd(t.parentNode,La(t)),n=i.extractContents(),(i=L()).setStart(t.parentNode,La(t)+1),i.setEnd(e.parentNode,La(e)+1),o=i.extractContents(),(a=e.parentNode).insertBefore(Qo(M,n),e),r?a.insertBefore(r,e):a.insertBefore(t,e),a.insertBefore(Qo(M,o),e),O(e),r||t},bind:F,unbind:U,fire:(e,t,r)=>u.dispatch(e,t,r),dispatch:(e,t,r)=>u.dispatch(e,t,r),getContentEditable:z,getContentEditableParent:e=>{var t=v();let r=null;for(;e&&e!==t&&null===(r=z(e));e=e.parentNode);return r},destroy:()=>{if(0<i.length){let e=i.length;for(;e--;){var t=i[e];u.unbind(t[0],t[1],t[2])}}X(r,(e,t)=>{o.unload(t),delete r[t]})},isChildOf:(e,t)=>e===t||t.contains(e),dumpRng:e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},j=((r,o,a)=>{const n=o.keep_values,e={set:(e,t,r)=>{var n=re(e);q(o.url_converter)&&H(t)&&(t=o.url_converter.call(o.url_converter_scope||a(),t,r,e[0])),Da(n,"data-mce-"+r,t),Da(n,r,t)},get:(e,t)=>{e=re(e);return nr(e,"data-mce-"+t)||nr(e,t)}},t={style:{set:(e,t)=>{e=re(e);se(t)?Yr(e,t):(n&&Da(e,Pa,t),ir(e,"style"),V(t)&&Yr(e,r.parse(t)))},get:e=>{var e=re(e),t=nr(e,Pa)||nr(e,"style");return r.serialize(r.parse(t),ee(e))}}};return n&&(t.href=t.src=e),t})(c,l,W(M));return M},Fa=(ae.DOM=ae(document),ae.nodeIndex=La,ae.DOM);class Ua{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(i){return new Promise((e,t)=>{const r=Fa;let n;const o=()=>{r.remove(a),n&&(n.onerror=n.onload=n=null)},a=r.uniqueId();(n=document.createElement("script")).id=a,n.type="text/javascript",n.src=Z._addCacheSuffix(i),this.settings.referrerPolicy&&r.setAttrib(n,"referrerpolicy",this.settings.referrerPolicy),n.onload=()=>{o(),e()},n.onerror=()=>{o(),t("Failed to load script: "+i)},(document.getElementsByTagName("head")[0]||document.body).appendChild(n)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(r){const n=this;return n.queue.push(r),void 0===n.states[r]&&(n.states[r]=0),new Promise((e,t)=>{n.scriptLoadedCallbacks[r]||(n.scriptLoadedCallbacks[r]=[]),n.scriptLoadedCallbacks[r].push({resolve:e,reject:t})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){var e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,r=(t,r)=>{R(n.scriptLoadedCallbacks,r).each(e=>{Y(e,e=>e[t](r))}),delete n.scriptLoadedCallbacks[r]},o=e=>{e=T(e,e=>"rejected"===e.status);return 0<e.length?Promise.reject(we(e,({reason:e})=>le(e)?e:[e])):Promise.resolve()},a=e=>Promise.allSettled(C(e,t=>2===n.states[t]?(r("resolve",t),Promise.resolve()):3===n.states[t]?(r("reject",t),Promise.reject(t)):(n.states[t]=1,n.loadScript(t).then(()=>{n.states[t]=2,r("resolve",t);var e=n.queue;if(0<e.length)return n.queue=[],a(e).then(o)},()=>(n.states[t]=3,r("reject",t),Promise.reject(t)))))),i=e=>(n.loading=!0,a(e).then(e=>{n.loading=!1;var t=n.queueLoadedCallbacks.shift();return P.from(t).each(U),o(e)})),s=He(e);return n.loading?new Promise((e,t)=>{n.queueLoadedCallbacks.push(()=>i(s).then(e,t))}):i(s)}}Ua.ScriptLoader=new Ua;const za=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},ja={},Va=za("en"),Ha=()=>R(ja,Va.get()),qa={getData:()=>De(ja,e=>({...e})),setCode:e=>{e&&Va.set(e)},getCode:()=>Va.get(),add:(e,t)=>{let r=ja[e];r||(ja[e]=r={}),X(t,(e,t)=>{r[t.toLowerCase()]=e})},translate:e=>{const r=Ha().getOr({}),n=e=>q(e)?Object.prototype.toString.call(e):t(e)?"":""+e,t=e=>""===e||null==e,o=e=>{const t=n(e);return R(r,t.toLowerCase()).map(n).getOr(t)},a=e=>e.replace(/{context:\w+}$/,"");if(t(e))return"";if(se(i=e)&&Q(i,"raw"))return n(e.raw);var i;if(i=e,le(i)&&1<i.length){const r=e.slice(1);return a(o(e[0]).replace(/\{([0-9]+)\}/g,(e,t)=>Q(r,t)?n(r[t]):e))}return a(o(e))},isRtl:()=>Ha().bind(e=>R(e,"_dir")).exists(e=>"rtl"===e),hasCode:e=>Q(ja,e)},$a=()=>{const r=[],n={},o={},a=[],i=(t,r)=>{var e=T(a,e=>e.name===t&&e.state===r);Y(e,e=>e.resolve())},s=e=>Q(n,e),l=(e,t)=>{var r=qa.getCode();!r||t&&-1===(","+(t||"")+",").indexOf(","+r+",")||Ua.ScriptLoader.add(n[e]+"/langs/"+r+".js")},d=(t,r="added")=>"added"===r&&(e=>Q(o,e))(t)||"loaded"===r&&s(t)?Promise.resolve():new Promise(e=>{a.push({name:t,state:r,resolve:e})});return{items:r,urls:n,lookup:o,get:e=>{if(o[e])return o[e].instance},requireLangPack:(e,t)=>{!1!==$a.languageLoad&&(s(e)?l(e,t):d(e,"loaded").then(()=>l(e,t)))},add:(e,t)=>(r.push(t),o[e]={instance:t},i(e,"added"),t),remove:e=>{delete n[e],delete o[e]},createUrl:(e,t)=>V(t)?V(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,load:(e,t)=>{if(n[e])return Promise.resolve();let r=V(t)?t:t.prefix+t.resource+t.suffix;0!==r.indexOf("/")&&-1===r.indexOf("://")&&(r=$a.baseURL+"/"+r),n[e]=r.substring(0,r.lastIndexOf("/"));t=()=>(i(e,"loaded"),Promise.resolve());return o[e]?t():Ua.ScriptLoader.add(r).then(t)},waitFor:d}},Wa=($a.languageLoad=!0,$a.baseURL="",$a.PluginManager=$a(),$a.ThemeManager=$a(),$a.ModelManager=$a(),()=>{const t=(e=>{const t=za(P.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(P.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(P.some(e))}}})($);return{...t,on:e=>t.get().each(e)}}),Ka=(t,r)=>{let n=null;return{cancel:()=>{d(n)||(clearTimeout(n),n=null)},throttle:(...e)=>{d(n)&&(n=setTimeout(()=>{n=null,t.apply(null,e)},r))}}},Ga=(t,r)=>{let n=null;const o=()=>{d(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...e)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,e)},r)}}},Ya=(e,t)=>{let r=[];return Y(Pr(e),e=>{r=(r=t(e)?r.concat([e]):r).concat(Ya(e,t))}),r},Xa=(e,t)=>{{const r=void 0===e?document:e.dom;return kr(r)?[]:C(r.querySelectorAll(t),re)}},Qa=W("mce-annotation"),Ja=W("data-mce-annotation"),Za=W("data-mce-annotation-uid"),ei=W("data-mce-annotation-active"),ti=(n,e)=>{const t=n.selection.getRng(),r=re(t.startContainer),o=re(n.getBody()),a=e.fold(()=>"."+Qa(),e=>`[${Ja()}="${e}"]`),i=Dr(r,t.startOffset).getOr(r),s=Xn(i,a,e=>S(e,o)),l=(e,t)=>ar(e,t)?P.some(nr(e,t)):P.none();return s.bind(e=>l(e,""+Za()).bind(r=>l(e,""+Ja()).map(e=>{var t=ri(n,r);return{uid:r,name:e,elements:t}})))},ri=(e,t)=>{e=re(e.getBody());return Xa(e,`[${Za()}="${t}"]`)},ni=(e,t)=>{const r=re(e.getBody()),n=Xa(r,`[${Ja()}="${t}"]`),o={};return Y(n,e=>{const t=nr(e,Za()),r=R(o,t).getOr([]);o[t]=r.concat([e])}),o};let oi=0;const ai=e=>{var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++oi+String(t)},ii=(e,t)=>re(e.dom.cloneNode(t)),si=e=>ii(e,!1),li=e=>ii(e,!0),di=(e,t,r=A)=>{const n=new Zn(e,t),o=e=>{let t;for(;(t=n[e]())&&!O(t)&&!r(t););return P.from(t).filter(O)};return{current:()=>P.from(n.current()).filter(O),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},ci=(t,e)=>{const a=e||(e=>t.isBlock(e)||x(e)||_(e)),i=(e,t,r,n)=>{if(O(e)){const r=n(e,t,e.data);if(-1!==r)return P.some({container:e,offset:r})}return r().bind(e=>i(e.container,e.offset,r,n))};return{backwards:(e,t,r,n)=>{const o=di(e,n,a);return i(e,t,()=>o.prev().map(e=>({container:e,offset:e.length})),r).getOrNull()},forwards:(e,t,r,n)=>{const o=di(e,n,a);return i(e,t,()=>o.next().map(e=>({container:e,offset:0})),r).getOrNull()}}},ui=Math.round,mi=e=>e?{left:ui(e.left),top:ui(e.top),bottom:ui(e.bottom),right:ui(e.right),width:ui(e.width),height:ui(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},gi=(e,t)=>(e=mi(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),fi=(e,t,r)=>0<=e&&e<=Math.min(t.height,r.height)/2,pi=(e,t)=>{var r=Math.min(t.height/2,e.height/2);return e.bottom-r<t.top||!(e.top>t.bottom)&&fi(t.top-e.bottom,e,t)},hi=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&fi(t.bottom-e.top,e,t),vi=(e,t,r)=>{var n=Math.max(Math.min(t,e.left+e.width),e.left),e=Math.max(Math.min(r,e.top+e.height),e.top);return Math.sqrt((t-n)*(t-n)+(r-e)*(r-e))},bi=e=>{const t=e.startContainer,r=e.startOffset;return t.hasChildNodes()&&e.endOffset===r+1?t.childNodes[r]:null},yi=(e,t)=>{var r,n;return oe(e)&&e.hasChildNodes()?(r=e.childNodes,n=r.length-1,r[Math.min(Math.max(t,0),n)]):e},Ci=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),wi=e=>"string"==typeof e&&768<=e.charCodeAt(0)&&Ci.test(e),xi=oe,ki=Fo,Si=_n("display","block table"),_i=_n("float","left right"),Ei=(Hn=[xi,ki,I(_i)],t=>{for(let e=0;e<Hn.length;e++)if(!Hn[e](t))return!1;return!0}),Ni=I(_n("white-space","pre pre-line pre-wrap")),Ai=O,Ri=x,Ti=ae.nodeIndex,Oi=(e,t)=>t<0&&oe(e)&&e.hasChildNodes()?void 0:yi(e,t),Bi=e=>"createRange"in e?e.createRange():ae.DOM.createRng(),Pi=e=>e&&/[\r\n\t ]/.test(e),Di=e=>!!e.setStart&&!!e.setEnd,Li=e=>{var t=e.startContainer,r=e.startOffset;if(Pi(e.toString())&&Ni(t.parentNode)&&O(t)){const e=t.data;if(Pi(e[r-1])||Pi(e[r+1]))return!0}return!1},Mi=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,Ii=e=>{var t=e.getClientRects(),t=0<t.length?mi(t[0]):mi(e.getBoundingClientRect());if(!Di(e)&&Ri(e)&&Mi(t)){var r=e;const n=r.ownerDocument,o=Bi(n),a=n.createTextNode(go),i=r.parentNode;return i.insertBefore(a,r),o.setStart(a,0),o.setEnd(a,1),r=mi(o.getBoundingClientRect()),i.removeChild(a),r}if(Mi(t)&&Di(e)){r=e;const s=r.startContainer,l=r.endContainer,d=r.startOffset,c=r.endOffset;if(s===l&&O(l)&&0===d&&1===c){const s=r.cloneRange();return s.setEndAfter(l),Ii(s)}return null}return t},Fi=(e,t)=>{const r=gi(e,t);return r.width=1,r.right=r.left+1,r},B=(t,r,e)=>{const n=()=>e=e||(e=>{const n=[],o=e=>{var t,r;0===e.height||0<n.length&&(t=e,r=n[n.length-1],t.left===r.left&&t.top===r.top&&t.bottom===r.bottom&&t.right===r.right)||n.push(e)},t=(e,t)=>{const r=Bi(e.ownerDocument);if(t<e.data.length){if(wi(e.data[t]))return n;if(wi(e.data[t-1])&&(r.setStart(e,t),r.setEnd(e,t+1),!Li(r)))return o(Fi(Ii(r),!1)),n}0<t&&(r.setStart(e,t-1),r.setEnd(e,t),Li(r)||o(Fi(Ii(r),!1))),t<e.data.length&&(r.setStart(e,t),r.setEnd(e,t+1),Li(r)||o(Fi(Ii(r),!0)))},r=e.container(),a=e.offset();if(Ai(r))return t(r,a),n;if(xi(r))if(e.isAtEnd()){const e=Oi(r,a);Ai(e)&&t(e,e.data.length),Ei(e)&&!Ri(e)&&o(Fi(Ii(e),!1))}else{var i=Oi(r,a);if(Ai(i)&&t(i,0),Ei(i)&&e.isAtEnd())return o(Fi(Ii(i),!1)),n;e=Oi(e.container(),e.offset()-1);!Ei(e)||Ri(e)||!Si(e)&&!Si(i)&&Ei(i)||o(Fi(Ii(e),!1)),Ei(i)&&o(Fi(Ii(i),!0))}return n})(B(t,r));return{container:W(t),offset:W(r),toRange:()=>{const e=Bi(t.ownerDocument);return e.setStart(t,r),e.setEnd(t,r),e},getClientRects:n,isVisible:()=>0<n().length,isAtStart:()=>(Ai(t),0===r),isAtEnd:()=>Ai(t)?r>=t.data.length:r>=t.childNodes.length,isEqual:e=>e&&t===e.container()&&r===e.offset(),getNode:e=>Oi(t,e?r-1:r)}},Ui=(B.fromRangeStart=e=>B(e.startContainer,e.startOffset),B.fromRangeEnd=e=>B(e.endContainer,e.endOffset),B.after=e=>B(e.parentNode,Ti(e)+1),B.before=e=>B(e.parentNode,Ti(e)),B.isAbove=(e,t)=>Wt(Ae(t.getClientRects()),Re(e.getClientRects()),pi).getOr(!1),B.isBelow=(e,t)=>Wt(Re(t.getClientRects()),Ae(e.getClientRects()),hi).getOr(!1),B.isAtStart=e=>!!e&&e.isAtStart(),B.isAtEnd=e=>!!e&&e.isAtEnd(),B.isTextPosition=e=>!!e&&O(e.container()),B.isElementPosition=e=>!1===B.isTextPosition(e),(e,t)=>{O(t)&&0===t.data.length&&e.remove(t)}),zi=(e,t,r)=>{if(Ln(r)){var n=e,o=t,a=r;const i=P.from(a.firstChild),s=P.from(a.lastChild);o.insertNode(a),i.each(e=>Ui(n,e.previousSibling)),s.each(e=>Ui(n,e.nextSibling))}else o=e,a=r,t.insertNode(a),Ui(o,a.previousSibling),Ui(o,a.nextSibling)},ji=O,Vi=Nn,Hi=ae.nodeIndex,qi=e=>{e=e.parentNode;return Vi(e)?qi(e):e},$i=e=>e?Ye(e.childNodes,(e,t)=>(Vi(t)&&"BR"!==t.nodeName?e=e.concat($i(t)):e.push(t),e),[]):[],Wi=t=>e=>t===e,Ki=e=>{return(ji(e)?"text()":e.nodeName.toLowerCase())+"["+(e=>{let n,t;n=$i(qi(e)),t=Xe(n,Wi(e),e),n=n.slice(0,t+1);var r=Ye(n,(e,t,r)=>(ji(t)&&ji(n[r-1])&&e++,e),0);return n=Ke(n,Sn([e.nodeName])),Xe(n,Wi(e),e)-r})(e)+"]"},Gi=(e,t)=>{let r,n,o,a,i,s=[];return r=t.container(),n=t.offset(),ji(r)?o=((e,t)=>{for(;(e=e.previousSibling)&&ji(e);)t+=e.data.length;return t})(r,n):(a=r.childNodes,n>=a.length?(o="after",n=a.length-1):o="before",r=a[n]),s.push(Ki(r)),i=((e,t)=>{const r=[];for(t=t.parentNode;t!==e;t=t.parentNode)r.push(t);return r})(e,r),i=Ke(i,I(Nn)),(s=s.concat(We(i,e=>Ki(e)))).reverse().join("/")+","+o},Yi=(e,n)=>{let o;if(!n)return null;const t=n.split(","),r=t[0].split("/");o=1<t.length?t[1]:"before";n=Ye(r,(e,t)=>{const n=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);if(n){"text()"===n[1]&&(n[1]="#text");{var t=e,e=n[1],o=parseInt(n[2],10);let r=$i(t);return r=Ke(r,(e,t)=>!ji(e)||!ji(r[t-1])),(r=Ke(r,Sn([e])))[o]}}return null},e);{if(n){if(ji(n)){var a=n,i=parseInt(o,10);let e,t=a,r=0;for(;ji(t);){if(e=t.data.length,i>=r&&i<=r+e){a=t,i-=r;break}if(!ji(t.nextSibling)){a=t,i=e;break}r+=e,t=t.nextSibling}return ji(a)&&i>a.data.length&&(i=a.data.length),B(a,i)}return o="after"===o?Hi(n)+1:Hi(n),B(n.parentNode,o)}return null}},Xi=_,Qi=(e,t,r,n,o)=>{let a=n[o?"startContainer":"endContainer"],i=n[o?"startOffset":"endOffset"];const s=[];let l,d=0;var c=e.getRoot();for(O(a)?s.push(r?((e,t,r)=>{let n,o;for(o=e(t.data.slice(0,r)).length,n=t.previousSibling;n&&O(n);n=n.previousSibling)o+=e(n.data).length;return o})(t,a,i):i):(l=a.childNodes,i>=l.length&&l.length&&(d=1,i=Math.max(0,l.length-1)),s.push(e.nodeIndex(l[i],r)+d));a&&a!==c;a=a.parentNode)s.push(e.nodeIndex(a,r));return s},Ji=(e,t,r)=>{let n=0;return Z.each(e.select(t),e=>{if("all"!==e.getAttribute("data-mce-bogus"))return e!==r&&void n++}),n},Zi=(e,t)=>{let r,n,o;var a=t?"start":"end";r=e[a+"Container"],n=e[a+"Offset"],oe(r)&&"TR"===r.nodeName&&(o=r.childNodes,(r=o[Math.min(t?n:n-1,o.length-1)])&&(n=t?0:r.childNodes.length,e["set"+(t?"Start":"End")](r,n)))},es=e=>(Zi(e,!0),Zi(e,!1),e),ts=(e,t)=>{let r;return oe(e)&&(e=yi(e,t),Xi(e))?e:xo(e)?(O(e)&&Co(e)&&(e=e.parentNode),r=e.previousSibling,Xi(r)?r:(r=e.nextSibling,Xi(r)?r:void 0)):void 0},rs=(e,t,r)=>{var n=r.getNode();let o=n?n.nodeName:null;var a=r.getRng();if(Xi(n)||"IMG"===o)return{name:o,index:Ji(r.dom,o,n)};n=a;n=ts(n.startContainer,n.startOffset)||ts(n.endContainer,n.endOffset);if(n)return{name:o=n.tagName,index:Ji(r.dom,o,n)};{n=e,e=r,r=t,t=a;const i=e.dom,s={};return s.start=Qi(i,n,r,t,!0),e.isCollapsed()||(s.end=Qi(i,n,r,t,!1)),Ro(t)&&(s.isFakeCaret=!0),s}},ns=(e,t,r)=>{t={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return r?e.create("span",t,"&#xFEFF;"):e.create("span",t)},os=(e,t)=>{const r=e.dom;let n=e.getRng();var o=r.uniqueId(),a=e.isCollapsed(),i=e.getNode(),s=i.nodeName;if("IMG"===s)return{name:s,index:Ji(r,s,i)};const l=es(n.cloneRange());if(!a){l.collapse(!1);const e=ns(r,o+"_end",t);zi(r,l,e)}(n=es(n)).collapse(!0);s=ns(r,o+"_start",t);return zi(r,n,s),e.moveToBookmark({id:o,keep:!0}),{id:o}},as=N(rs,p,!0),is=r=>{const e=e=>e(r),t=W(r),n=()=>o,o={tag:!0,inner:r,fold:(e,t)=>t(r),isValue:y,isError:A,map:e=>ls.value(e(r)),mapError:n,bind:e,exists:e,forall:e,getOr:t,or:n,getOrThunk:t,orThunk:n,getOrDie:t,each:e=>{e(r)},toOptional:()=>P.some(r)};return o},ss=r=>{const e=()=>t,t={tag:!1,inner:r,fold:(e,t)=>e(r),isValue:A,isError:y,map:e,mapError:e=>ls.error(e(r)),bind:e,exists:A,forall:y,getOr:p,or:p,getOrThunk:F,orThunk:F,getOrDie:(n=String(r),()=>{throw new Error(n)}),each:$,toOptional:P.none};var n;return t},ls={value:is,error:ss,fromOption:(e,t)=>e.fold(()=>ss(t),is)},ds=a=>{if(!le(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");const i=[],s={};return Y(a,(e,t)=>{var r=Be(e);if(1!==r.length)throw new Error("one and only one name per case");const n=r[0],o=e[n];if(void 0!==s[n])throw new Error("duplicate key detected:"+n);if("cata"===n)throw new Error("cannot have a case named cata (sorry)");if(!le(o))throw new Error("case arguments must be an array");i.push(n),s[n]=(...r)=>{var e=r.length;if(e!==o.length)throw new Error("Wrong number of arguments to case "+n+". Expected "+o.length+" ("+o+"), got "+e);return{fold:(...e)=>{if(e.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+e.length);return e[t].apply(null,r)},match:e=>{const t=Be(e);if(i.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+i.join(",")+"\nActual: "+t.join(","));if(xe(i,e=>K(t,e)))return e[n].apply(null,r);throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+i.join(", "))},log:e=>{console.log(e,{constructors:i,constructor:n,params:r})}}}}),s},cs=(ds([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),e=>"inline-command"===e.type||"inline-format"===e.type),us=e=>"block-command"===e.type||"block-format"===e.type,ms=o=>{const a=e=>ls.error({message:e,pattern:o}),e=(t,r,e)=>{if(void 0===o.format)return void 0!==o.cmd?V(o.cmd)?ls.value(e(o.cmd,o.value)):a(t+" pattern has non-string `cmd` parameter"):a(t+" pattern is missing both `format` and `cmd` parameters");{let e;if(le(o.format)){if(!xe(o.format,V))return a(t+" pattern has non-string items in the `format` array");e=o.format}else{if(!V(o.format))return a(t+" pattern has non-string `format` parameter");e=[o.format]}return ls.value(r(e))}};if(!se(o))return a("Raw pattern is not an object");if(!V(o.start))return a("Raw pattern is missing `start` parameter");if(void 0===o.end)return void 0!==o.replacement?V(o.replacement)?0===o.start.length?a("Replacement pattern has empty `start` parameter"):ls.value({type:"inline-command",start:"",end:o.start,cmd:"mceInsertContent",value:o.replacement}):a("Replacement pattern has non-string `replacement` parameter"):0===o.start.length?a("Block pattern has empty `start` parameter"):e("Block",e=>({type:"block-format",start:o.start,format:e[0]}),(e,t)=>({type:"block-command",start:o.start,cmd:e,value:t}));{if(!V(o.end))return a("Inline pattern has non-string `end` parameter");if(0===o.start.length&&0===o.end.length)return a("Inline pattern has empty `start` and `end` parameters");let r=o.start,n=o.end;return 0===n.length&&(n=r,r=""),e("Inline",e=>({type:"inline-format",start:r,end:n,format:e}),(e,t)=>({type:"inline-command",start:r,end:n,cmd:e,value:t}))}},gs=e=>T(e,cs),fs=Lt().deviceType,ps=fs.isTouch(),hs=ae.DOM,vs=e=>b(e,RegExp),e=t=>e=>e.options.get(t),bs=e=>V(e)||se(e),ys=(n,o="")=>e=>{var t,r=V(e);return r?-1!==e.indexOf("=")?(t=(e=>{e=0<e.indexOf("=")?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return he(e,(e,t)=>{var t=t.split("="),r=t[0],t=1<t.length?t[1]:r;return e[lt(r)]=lt(t),e},{})})(e),{value:R(t,n.id).getOr(o),valid:r}):{value:e,valid:r}:{valid:!1,message:"Must be a string."}},Cs=e("iframe_attrs"),ws=e("doctype"),xs=e("document_base_url"),ks=e("body_id"),Ss=e("body_class"),_s=e("content_security_policy"),Es=e("br_in_pre"),Ns=e("forced_root_block"),As=e("forced_root_block_attrs"),Rs=e("br_newline_selector"),Ts=e("no_newline_selector"),Os=e("keep_styles"),Bs=e("end_container_on_empty_block"),Ps=e("automatic_uploads"),Ds=e("images_reuse_filename"),Ls=e("images_replace_blob_uris"),Ms=e("icons"),Is=e("icons_url"),Fs=e("images_upload_url"),Us=e("images_upload_base_path"),zs=e("images_upload_credentials"),js=e("images_upload_handler"),Vs=e("content_css_cors"),Hs=e("referrer_policy"),qs=e("language"),$s=e("language_url"),Ws=e("indent_use_margin"),Ks=e("indentation"),Gs=e("content_css"),Ys=e("content_style"),Xs=e("font_css"),Qs=e("directionality"),Js=e("inline_boundaries_selector"),Zs=e("object_resizing"),el=e("resize_img_proportional"),tl=e("placeholder"),rl=e("event_root"),nl=e("service_message"),ol=e("theme"),al=e("theme_url"),il=e("model"),sl=e("model_url"),ll=e("inline_boundaries"),dl=e("formats"),cl=e("preview_styles"),ul=e("format_empty_lines"),ml=e("custom_ui_selector"),gl=e("inline"),fl=e("hidden_input"),pl=e("submit_patch"),hl=e("add_form_submit_trigger"),vl=e("add_unload_trigger"),bl=e("custom_undo_redo_levels"),yl=e("disable_nodechange"),Cl=e("readonly"),wl=e("content_css_cors"),xl=e("plugins"),kl=e("external_plugins"),Sl=e("block_unsupported_drop"),_l=e("visual"),El=e("visual_table_class"),Nl=e("visual_anchor_class"),Al=e("iframe_aria_text"),Rl=e("setup"),Tl=e("init_instance_callback"),Ol=e("urlconverter_callback"),Bl=e("auto_focus"),Pl=e("browser_spellcheck"),Dl=e("protect"),Ll=e("paste_block_drop"),Ml=e("paste_data_images"),Il=e("paste_preprocess"),Fl=e("paste_postprocess"),Ul=e("paste_webkit_styles"),zl=e("paste_remove_styles_if_webkit"),jl=e("paste_merge_formats"),Vl=e("smart_paste"),Hl=e("paste_as_text"),ql=e("paste_tab_spaces"),$l=e("allow_html_data_urls"),Wl=e("text_patterns"),Kl=e("noneditable_class"),Gl=e("editable_class"),Yl=e("noneditable_regexp"),Xl=e=>Z.explode(e.options.get("images_file_types")),Ql=e("table_tab_navigation"),Jl=oe,Zl=O,ed=e=>{const t=e.parentNode;t&&t.removeChild(e)},td=e=>{var t=vo(e);return{count:e.length-t.length,text:t}},rd=e=>{for(var t;-1!==(t=e.data.lastIndexOf(po));)e.deleteData(t,1)},nd=(e,t)=>(od(e),t),od=e=>{Jl(e)&&xo(e)&&(ko(e)?e.removeAttribute("data-mce-caret"):ed(e)),Zl(e)&&(rd(e),0===e.data.length&&ed(e))},ad=_,id=Un,sd=Fn,ld=(e,t,r)=>{const n=gi(t.getBoundingClientRect(),r);let o,a;if("BODY"===e.tagName){const t=e.ownerDocument.documentElement;o=e.scrollLeft||t.scrollLeft,a=e.scrollTop||t.scrollTop}else{const t=e.getBoundingClientRect();o=e.scrollLeft-t.left,a=e.scrollTop-t.top}n.left+=o,n.right+=o,n.top+=a,n.bottom+=a,n.width=1;let i=t.offsetWidth-t.clientWidth;return 0<i&&(r&&(i*=-1),n.left+=i,n.right+=i),n},dd=(e,a,n,o)=>{const i=Wa();let s,l;const d=Ns(e),c=e.dom,u=()=>{var r=a,n=Xa(re(r),"*[contentEditable=false],video,audio,embed,object");for(let t=0;t<n.length;t++){var o=n[t].dom;let e=o.previousSibling;if(No(e)){const r=e.data;1===r.length?e.parentNode.removeChild(e):e.deleteData(r.length-1,1)}e=o.nextSibling,Eo(e)&&(1===e.data.length?e.parentNode.removeChild(e):e.deleteData(0,1))}l&&(od(l),l=null),i.on(e=>{c.remove(e.caret),i.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(e,t)=>{let r;if(u(),sd(t))return null;if(!n(t))return l=((e,t)=>{const r=e.ownerDocument.createTextNode(po),n=e.parentNode;if(t){const t=e.previousSibling;if(yo(t)){if(xo(t))return t;if(No(t))return t.splitText(t.data.length-1)}n.insertBefore(r,e)}else{const t=e.nextSibling;if(yo(t)){if(xo(t))return t;if(Eo(t))return t.splitText(1),t}e.nextSibling?n.insertBefore(r,e.nextSibling):n.appendChild(r)}return r})(t,e),r=t.ownerDocument.createRange(),ud(l.nextSibling)?(r.setStart(l,0),r.setEnd(l,0)):(r.setStart(l,1),r.setEnd(l,1)),r;{l=((e,t,r)=>{const n=t.ownerDocument.createElement(e),o=(n.setAttribute("data-mce-caret",r?"before":"after"),n.setAttribute("data-mce-bogus","all"),n.appendChild((()=>{const e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e})()),t.parentNode);return r?o.insertBefore(n,t):t.nextSibling?o.insertBefore(n,t.nextSibling):o.appendChild(n),n})(d,t,e);const n=ld(a,t,e),u=(c.setStyle(l,"top",n.top),c.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"}));c.setStyles(u,{...n}),c.add(a,u),i.set({caret:u,element:t,before:e}),e&&c.addClass(u,"mce-visual-caret-before"),s=setInterval(()=>{i.on(e=>{o()?c.toggleClass(e.caret,"mce-visual-caret-hidden"):c.addClass(e.caret,"mce-visual-caret-hidden")})},500),(r=t.ownerDocument.createRange()).setStart(l,0),r.setEnd(l,0)}return r},hide:u,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on(e=>{var t=ld(a,e.element,e.before);c.setStyles(e.caret,{...t})})},destroy:()=>clearInterval(s)}},cd=()=>J.browser.isFirefox(),ud=e=>ad(e)||id(e),md=e=>ud(e)||An(e)&&cd(),gd=In,fd=_,pd=Un,hd=_n("display","block table table-cell table-caption list-item"),vd=xo,bd=Co,yd=oe,Cd=Fo,wd=e=>0<e,xd=e=>e<0,kd=(e,t)=>{for(var r;r=e(t);)if(!bd(r))return r;return null},Sd=(e,t,r,n,o)=>{const a=new Zn(e,n),i=fd(e)||bd(e);if(xd(t)){if(i&&r(e=kd(a.prev.bind(a),!0)))return e;for(;e=kd(a.prev.bind(a),o);)if(r(e))return e}if(wd(t)){if(i&&r(e=kd(a.next.bind(a),!0)))return e;for(;e=kd(a.next.bind(a),o);)if(r(e))return e}return null},_d=(e,t)=>{for(;e&&e!==t;){if(hd(e))return e;e=e.parentNode}return null},Ed=(e,t,r)=>_d(e.container(),r)===_d(t.container(),r),Nd=(e,t)=>{if(!t)return null;var r=t.container(),t=t.offset();return yd(r)?r.childNodes[t+e]:null},Ad=(e,t)=>{const r=t.ownerDocument.createRange();return e?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),r},Rd=(e,t,r)=>{for(var n,o,a,i=e?"previousSibling":"nextSibling";r&&r!==t;){let e=r[i];if(vd(e)&&(e=e[i]),fd(e)||pd(e)){if(n=t,o=e,a=r,_d(o,n)===_d(a,n))return e;break}if(Cd(e))break;r=r.parentNode}return null},Td=N(Ad,!0),Od=N(Ad,!1),Bd=(e,t,r)=>{let n;const o=N(Rd,!0,t),a=N(Rd,!1,t);let i=r.startContainer;t=r.startOffset;if(Co(i)){const e=(i=yd(i)?i:i.parentNode).getAttribute("data-mce-caret");if("before"===e&&(n=i.nextSibling,md(n)))return Td(n);if("after"===e&&(n=i.previousSibling,md(n)))return Od(n)}if(!r.collapsed)return r;if(O(i)){if(vd(i)){if(1===e){if(n=a(i))return Td(n);if(n=o(i))return Od(n)}if(-1===e){if(n=o(i))return Od(n);if(n=a(i))return Td(n)}return r}if(No(i)&&t>=i.data.length-1)return 1===e&&(n=a(i))?Td(n):r;if(Eo(i)&&t<=1)return-1===e&&(n=o(i))?Od(n):r;if(t===i.data.length)return(n=a(i))?Td(n):r;if(0===t)return(n=o(i))?Od(n):r}return r},Pd=(e,t)=>P.from(Nd(e?0:-1,t)).filter(fd),Dd=(e,t,r)=>{t=Bd(e,t,r);return-1===e?B.fromRangeStart(t):B.fromRangeEnd(t)},Ld=e=>P.from(e.getNode()).map(re),Md=(e,t)=>{for(;t=e(t);)if(t.isVisible())return t;return t},Id=(e,t)=>{t=Ed(e,t);return!(t||!x(e.getNode()))||t},Fd=((t=qn=qn||{})[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards",_),Ud=O,zd=oe,jd=x,Vd=Fo,Hd=e=>Lo(e)||(e=>!!Uo(e)&&!0!==he(Te(e.getElementsByTagName("*")),(e,t)=>e||To(t),!1))(e),qd=zo,$d=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,Wd=(e,t)=>{if(wd(e)){if(Vd(t.previousSibling)&&!Ud(t.previousSibling))return B.before(t);if(Ud(t))return B(t,0)}if(xd(e)){if(Vd(t.nextSibling)&&!Ud(t.nextSibling))return B.after(t);if(Ud(t))return B(t,t.data.length)}return!xd(e)||jd(t)?B.before(t):B.after(t)},Kd=(e,t,r)=>{let n,o,a,i;if(!zd(r)||!t)return null;if(t.isEqual(B.after(r))&&r.lastChild){if(i=B.after(r.lastChild),xd(e)&&Vd(r.lastChild)&&zd(r.lastChild))return jd(r.lastChild)?B.before(r.lastChild):i}else i=t;var s,l,d,t=i.container();let c=i.offset();if(Ud(t)){if(xd(e)&&0<c)return B(t,--c);if(wd(e)&&c<t.length)return B(t,++c);n=t}else{if(xd(e)&&0<c&&(o=$d(t,c-1),Vd(o)))return!Hd(o)&&(a=Sd(o,e,qd,o))?Ud(a)?B(a,a.data.length):B.after(a):Ud(o)?B(o,o.data.length):B.before(o);if(wd(e)&&c<t.childNodes.length&&(o=$d(t,c),Vd(o)))return jd(o)?(s=r,l=o,(d=l.nextSibling)&&Vd(d)?Ud(d)?B(d,0):B.before(d):Kd(qn.Forwards,B.after(l),s)):!Hd(o)&&(a=Sd(o,e,qd,o))?Ud(a)?B(a,0):B.before(a):Ud(o)?B(o,0):B.after(o);n=o||i.getNode()}if((wd(e)&&i.isAtEnd()||xd(e)&&i.isAtStart())&&(n=Sd(n,e,y,r,!0),qd(n,r)))return Wd(e,n);o=Sd(n,e,qd,r);const u=Qe(T(((e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r})(t,r),Fd));return!u||o&&u.contains(o)?o?Wd(e,o):null:i=wd(e)?B.after(u):B.before(u)},Gd=t=>({next:e=>Kd(qn.Forwards,e,t),prev:e=>Kd(qn.Backwards,e,t)}),Yd=e=>B.isTextPosition(e)?0===e.offset():Fo(e.getNode()),Xd=e=>{var t;return B.isTextPosition(e)?(t=e.container(),e.offset()===t.data.length):Fo(e.getNode(!0))},Qd=(e,t)=>!B.isTextPosition(e)&&!B.isTextPosition(t)&&e.getNode()===t.getNode(!0),Jd=(e,t,r)=>{const n=Gd(t);return P.from(e?n.next(r):n.prev(r))},Zd=(n,t,r)=>Jd(n,t,r).bind(e=>Ed(r,e,t)&&((e,t)=>{return n?!Qd(e,t)&&(r=e,!(!B.isTextPosition(r)&&x(r.getNode())))&&Xd(e)&&Yd(t):!Qd(t,e)&&Yd(e)&&Xd(t);var r})(r,e)?Jd(n,t,e):P.some(e)),ec=(t,r,e,n)=>Zd(t,r,e).bind(e=>n(e)?ec(t,r,e,n):P.some(e)),tc=(e,t)=>{var r=e?t.firstChild:t.lastChild;{var n;if(O(r))return P.some(B(r,e?0:r.data.length));else return r?Fo(r)?P.some(e?B.before(r):x(n=r)?B.before(n):B.after(n)):(n=e,e=t,t=r,t=n?B.before(t):B.after(t),Jd(n,e,t)):P.none()}},rc=N(Jd,!0),nc=N(Jd,!1),oc=N(tc,!0),ac=N(tc,!1),ic="_mce_caret",sc=e=>oe(e)&&e.id===ic,lc=(e,t)=>{for(;t&&t!==e;){if(t.id===ic)return t;t=t.parentNode}return null},dc=e=>Z.isArray(e.start),cc=(e,t)=>(oe(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),uc=(e,t,r)=>!(!1!==t.hasChildNodes()||!lc(e,t)||(((e,t)=>{var r=e.ownerDocument.createTextNode(po);e.appendChild(r),t.setStart(r,0),t.setEnd(r,0)})(t,r),0)),mc=(e,t,r,n)=>{var o=r[t?"start":"end"];let a,i,s,l;var d=e.getRoot();if(o){for(s=o[0],i=d,a=o.length-1;1<=a;a--){if(l=i.childNodes,uc(d,i,n))return!0;if(o[a]>l.length-1)return!!uc(d,i,n)||((e,t)=>ac(e).fold(A,e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0)))(i,n);i=l[o[a]]}3===i.nodeType&&(s=Math.min(o[0],i.nodeValue.length)),1===i.nodeType&&(s=Math.min(o[0],i.childNodes.length)),t?n.setStart(i,s):n.setEnd(i,s)}return!0},gc=e=>O(e)&&0<e.data.length,fc=(e,t,r)=>{let n,o,a,i,s=e.get(r.id+"_"+t);var l=r.keep;let d,c;if(s){if(n=s.parentNode,c=(d=(o="start"===t?l?s.hasChildNodes()?(n=s.firstChild,1):gc(s.nextSibling)?(n=s.nextSibling,0):gc(s.previousSibling)?(n=s.previousSibling,s.previousSibling.data.length):(n=s.parentNode,e.nodeIndex(s)+1):e.nodeIndex(s):l?s.hasChildNodes()?(n=s.firstChild,1):gc(s.previousSibling)?(n=s.previousSibling,s.previousSibling.data.length):(n=s.parentNode,e.nodeIndex(s)):e.nodeIndex(s),n),o),!l){for(i=s.previousSibling,a=s.nextSibling,Z.each(Z.grep(s.childNodes),e=>{O(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});s=e.get(r.id+"_"+t);)e.remove(s,!0);i&&a&&i.nodeType===a.nodeType&&O(i)&&!J.browser.isOpera()&&(o=i.nodeValue.length,i.appendData(a.nodeValue),e.remove(a),d=i,c=o)}return P.some(B(d,c))}return P.none()},pc=(e,t,r)=>{var n;return 2===t?rs(vo,r,e):3===t?(n=(r=e).getRng(),{start:Gi(r.dom.getRoot(),B.fromRangeStart(n)),end:Gi(r.dom.getRoot(),B.fromRangeEnd(n))}):t?{rng:e.getRng()}:os(e,!1)},hc=(c,e)=>{(e=>{var r,t,n,o,a=c.dom;if(e){if(dc(e))return o=e,s=(n=a).createRng(),mc(n,!0,o,s)&&mc(n,!1,o,s)?P.some(s):P.none();if(n=e,V(n.start))return P.some(((e,t)=>{let r;const n=e.createRng();return r=Yi(e.getRoot(),t.start),n.setStart(r.container(),r.offset()),r=Yi(e.getRoot(),t.end),n.setEnd(r.container(),r.offset()),n})(a,e));if(o=e,Q(o,"id")){var i=a;var s=e;const l=fc(i,"start",s),d=fc(i,"end",s);return Wt(l,d.or(l),(e,t)=>{const r=i.createRng();return r.setStart(cc(i,e.container()),e.offset()),r.setEnd(cc(i,t.container()),t.offset()),r});return}if(t=e,Q(t,"name"))return r=a,t=e,P.from(r.select(t.name)[t.index]).map(e=>{const t=r.createRng();return t.selectNode(e),t});if(a=e,Q(a,"rng"))return P.some(e.rng)}return P.none()})(e).each(e=>{c.setRng(e)})},vc=e=>oe(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),bc=(go,e=>" "===e),yc=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),Cc=e=>!yc(e)&&!bc(e)&&!fo(e),wc=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},xc=e=>({value:wc(e.red)+wc(e.green)+wc(e.blue)}),kc=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Sc=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,_c=(e,t,r,n)=>({red:e,green:t,blue:r,alpha:n}),Ec=(e,t,r,n)=>{e=parseInt(e,10),t=parseInt(t,10),r=parseInt(r,10),n=parseFloat(n);return _c(e,t,r,n)},Nc=e=>(e=>{if("transparent"===e)return P.some(_c(0,0,0,0));var t=kc.exec(e);if(null!==t)return P.some(Ec(t[1],t[2],t[3],"1"));t=Sc.exec(e);return null!==t?P.some(Ec(t[1],t[2],t[3],t[4])):P.none()})(e).map(xc).map(e=>"#"+e.value).getOr(e),Ac=e=>!!e.nodeType,Rc=(e,r,n)=>{var o,a=n.startOffset;let i=n.startContainer;if((i!==n.endContainer||!(o=i.childNodes[a])||!/^(IMG)$/.test(o.nodeName))&&oe(i)){const o=i.childNodes;let t;a<o.length?(i=o[a],t=new Zn(i,e.getParent(i,e.isBlock))):(i=o[o.length-1],(t=new Zn(i,e.getParent(i,e.isBlock))).next(!0));for(let e=t.current();e;e=t.next())if(O(e)&&!Pc(e))return n.setStart(e,0),void r.setRng(n)}},Tc=(e,t,r)=>{if(e){var n=t?"nextSibling":"previousSibling";for(e=r?e:e[n];e;e=e[n])if(oe(e)||!Pc(e))return e}},Oc=(e,t)=>(Ac(t)&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]),Bc=(e,t,r)=>e.schema.isValidChild(t,r),Pc=(e,t=!1)=>{return!(!H(e)||!O(e))&&(t=t?e.data.replace(/ /g," "):e.data,Vo(t))},Dc=(e,r)=>(q(e)?e=e(r):H(r)&&(e=e.replace(/%(\w+)/g,(e,t)=>r[t]||e)),e),Lc=(e,t)=>(e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()),Mc=(e,t)=>("color"!==t&&"backgroundColor"!==t||(e=Nc(e)),"fontWeight"===t&&700===e&&(e="bold"),""+(e="fontFamily"===t?e.replace(/[\'\"]/g,"").replace(/,\s+/g,","):e)),Ic=(e,t,r)=>Mc(e.getStyle(t,r),r),Fc=(t,e)=>{let r;return t.getParent(e,e=>(r=t.getStyle(e,"text-decoration"))&&"none"!==r),r},Uc=(e,t,r)=>e.getParents(t,r,e.getRoot()),zc=e=>Ve(e,"block"),jc=e=>Ve(e,"selector"),Vc=e=>Ve(e,"inline"),Hc=e=>jc(e)&&!1!==e.expand&&!Vc(e),qc=vc,$c=Uc,Wc=Pc,Kc=Oc,Gc=(e,t)=>{let r=t;for(;r;){if(oe(r)&&e.getContentEditable(r))return"false"===e.getContentEditable(r)?r:t;r=r.parentNode}return t},Yc=(t,e,r,n)=>{const o=e.data;for(let e=r;t?0<=e:e<o.length;t?e--:e++)if(n(o.charAt(e)))return t?e+1:e;return-1},Xc=(e,t,r)=>Yc(e,t,r,e=>bc(e)||yc(e)),Qc=(e,t,r)=>Yc(e,t,r,Cc),Jc=(a,e,t,r,i,n)=>{let s;const l=a.getParent(t,a.isBlock)||e,o=(e,t,r)=>{const n=ci(a),o=i?n.backwards:n.forwards;return P.from(o(e,t,(e,t)=>qc(e.parentNode)?-1:(s=e,r(i,e,t)),l))};return o(t,r,Xc).bind(e=>n?o(e.container,e.offset+(i?-1:0),Qc):P.some(e)).orThunk(()=>s?P.some({container:s,offset:i?0:s.length}):P.none())},Zc=(r,n,o,e,t)=>{O(e)&&mt(e.data)&&e[t]&&(e=e[t]);var a=$c(r,e);for(let t=0;t<a.length;t++)for(let e=0;e<n.length;e++){var i=n[e];if((!H(i.collapsed)||i.collapsed===o.collapsed)&&jc(i)&&r.is(a[t],i.selector))return a[t]}return e},eu=(t,e,r,n)=>{let o=r;const a=t.dom,i=a.getRoot(),s=e[0];if(!(o=zc(s)?s.wrapper?null:a.getParent(r,s.block,i):o)){const e=a.getParent(r,"LI,TD,TH");o=a.getParent(O(r)?r.parentNode:r,e=>e!==i&&Kc(t,e),e)}if(!(o=o&&zc(s)&&s.wrapper?$c(a,o,"ul,ol").reverse()[0]||o:o))for(o=r;o[n]&&!a.isBlock(o[n])&&(o=o[n],!Lc(o,"br")););return o||r},tu=(e,t,r,n)=>{var o=r.parentNode;return!H(r[n])&&(!(o!==t&&!de(o)&&!e.isBlock(o))||tu(e,t,o,n))},ru=(t,e,r,n,o)=>{let a=r;var i,s=o?"previousSibling":"nextSibling",l=t.getRoot();if(O(r)&&!Wc(r)&&(o?0<n:n<r.data.length))return r;for(;;){if(!e[0].block_expand&&t.isBlock(a))return a;for(let e=a[s];e;e=e[s]){const r=O(e)&&!tu(t,l,e,s);if(!qc(e)&&(!x(i=e)||!i.getAttribute("data-mce-bogus")||i.nextSibling)&&!Wc(e,r))return a}if(a===l||a.parentNode===l){r=a;break}a=a.parentNode}return r},nu=e=>qc(e.parentNode)||qc(e),ou=(e,t,r,n=!1)=>{let{startContainer:o,startOffset:a,endContainer:i,endOffset:s}=t;const l=e.dom,d=r[0];return oe(o)&&o.hasChildNodes()&&(o=yi(o,a),O(o)&&(a=0)),oe(i)&&i.hasChildNodes()&&(i=yi(i,t.collapsed?s:s-1),O(i)&&(s=i.nodeValue.length)),o=Gc(l,o),i=Gc(l,i),nu(o)&&(o=qc(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,O(o)&&(a=t.collapsed?o.length:0)),nu(i)&&(i=qc(i)?i:i.parentNode,i=t.collapsed?i.nextSibling||i:i.previousSibling||i,O(i)&&(s=t.collapsed?0:i.length)),t.collapsed&&(Jc(l,e.getBody(),o,a,!0,n).each(({container:e,offset:t})=>{o=e,a=t}),Jc(l,e.getBody(),i,s,!1,n).each(({container:e,offset:t})=>{i=e,s=t})),(Vc(d)||d.block_expand)&&(Vc(d)&&O(o)&&0!==a||(o=ru(l,r,o,a,!0)),Vc(d)&&O(i)&&s!==i.nodeValue.length||(i=ru(l,r,i,s,!1))),Hc(d)&&(o=Zc(l,r,t,o,"previousSibling"),i=Zc(l,r,t,i,"nextSibling")),(zc(d)||jc(d))&&(o=eu(e,r,o,"previousSibling"),i=eu(e,r,i,"nextSibling"),zc(d)&&(l.isBlock(o)||(o=ru(l,r,o,a,!0)),l.isBlock(i)||(i=ru(l,r,i,s,!1)))),oe(o)&&(a=l.nodeIndex(o),o=o.parentNode),oe(i)&&(s=l.nodeIndex(i)+1,i=i.parentNode),{startContainer:o,startOffset:a,endContainer:i,endOffset:s}},au=(r,e,i)=>{const n=e.startOffset,o=yi(e.startContainer,n),a=e.endOffset,s=yi(e.endContainer,a-1),l=e=>{var t=e[0],t=(O(t)&&t===o&&n>=t.data.length&&e.splice(0,1),e[e.length-1]);return 0===a&&0<e.length&&t===s&&O(t)&&e.splice(e.length-1,1),e},d=(e,t,r)=>{const n=[];for(;e&&e!==r;e=e[t])n.push(e);return n},t=(e,t)=>r.getParent(e,e=>e.parentNode===t,t),c=(r,n,o)=>{var a=o?"nextSibling":"previousSibling";for(let e=r,t=void e.parentNode;e&&e!==n;e=t){t=e.parentNode;const n=d(e===r?e:e[a],a);n.length&&(o||n.reverse(),i(l(n)))}};if(o===s)return i(l([o]));e=r.findCommonAncestor(o,s);if(r.isChildOf(o,s))return c(o,e,!0);if(r.isChildOf(s,o))return c(s,e);var u=t(o,e)||o,e=t(s,e)||s,u=(c(o,u,!0),d(u===o?u:u.nextSibling,"nextSibling",e===s?e.nextSibling:e));u.length&&i(l(u)),c(s,e)},iu=t=>{const r=[];if(t)for(let e=0;e<t.rangeCount;e++)r.push(t.getRangeAt(e));return r},su=(e,t)=>{var t=Xa(t,"td[data-mce-selected],th[data-mce-selected]");return 0<t.length?t:(t=e,T((e=>we(e,e=>{e=bi(e);return e?[re(e)]:[]}))(t),co))},lu=e=>su(iu(e.selection.getSel()),re(e.getBody())),du=(e,t)=>Gn(e,"table",t),cu=t=>Lr(t).fold(W([t]),e=>[t].concat(cu(e))),uu=t=>Mr(t).fold(W([t]),e=>"br"===ee(e)?Rr(e).map(e=>[t].concat(uu(e))).getOr([]):[t].concat(uu(e))),mu=(o,r)=>Wt((()=>{var e=r.startContainer,t=r.startOffset;return O(e)?0===t?P.some(re(e)):P.none():P.from(e.childNodes[t]).map(re)})(),(()=>{var e=r.endContainer,t=r.endOffset;return O(e)?t===e.data.length?P.some(re(e)):P.none():P.from(e.childNodes[t-1]).map(re)})(),(e,t)=>{const r=be(cu(o),N(S,e)),n=be(uu(o),N(S,t));return r.isSome()&&n.isSome()}).getOr(!1),gu=(e,t,r,n)=>{const o=r,a=new Zn(r,o),i=Ue(e.schema.getMoveCaretBeforeOnEnterElements(),(e,t)=>!K(["td","th","table"],t.toLowerCase()));do{if(O(r)&&0!==Z.trim(r.nodeValue).length)return void(n?t.setStart(r,0):t.setEnd(r,r.nodeValue.length));if(i[r.nodeName])return void(n?t.setStartBefore(r):"BR"===r.nodeName?t.setEndBefore(r):t.setEndAfter(r))}while(r=n?a.next():a.prev());"BODY"===o.nodeName&&(n?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},fu=e=>{e=e.selection.getSel();return e&&0<e.rangeCount},pu=(n,o)=>{var e=lu(n);0<e.length?Y(e,e=>{const t=e.dom,r=n.dom.createRng();r.setStartBefore(t),r.setEndAfter(t),o(r,!0)}):o(n.selection.getRng(),!1)},hu=(e,t,r)=>{t=os(e,t);r(t),e.moveToBookmark(t)},vu=(r=>{const t=e=>r(e)?P.from(e.dom.nodeValue):P.none();return{get:e=>{if(r(e))return t(e).getOr("");throw new Error("Can only get text value of a text node")},getOption:t,set:(e,t)=>{if(!r(e))throw new Error("Can only set raw text value of a text node");e.dom.nodeValue=t}}})(Qt),bu=e=>vu.get(e),yu=e=>vu.getOption(e),Cu=(e,{uid:t=ai("mce-annotation"),...r},n,o)=>{var a,e=te("span",e),{attributes:n={},classes:o=[]}=(gr(e,Qa()),tr(e,""+Za(),t),tr(e,""+Ja(),n),o(t,r));return rr(e,n),a=e,t=o,Y(t,e=>{gr(a,e)}),e},wu=(i,e,t,r,n)=>{const s=[],l=Cu(i.getDoc(),n,t,r),d=Wa(),c=()=>{d.clear()},u=e=>{Y(e,o)},o=e=>{switch(n=i,o=e,a=ee(e),Ar(o).fold(()=>"skipping",e=>"br"===a||(e=>Qt(e)&&bu(e)===po)(o)?"valid":(e=>Xt(e)&&hr(e,Qa()))(o)?"existing":sc(o.dom)?"caret":Bc(n,"span",a)&&Bc(n,ee(e),"span")?"valid":"invalid-child")){case"invalid-child":{c();const i=Pr(e);u(i),c();break}case"valid":{const i=d.get().getOrThunk(()=>{var e=si(l);return s.push(e),d.set(e),e});t=e,r=i,tn(t,r),on(r,t);break}}var t,r,n,o,a};return au(i.dom,e,e=>{c();e=C(e,re),u(e)}),s},xu=n=>{const o=(()=>{const r={};return{register:(e,t)=>{r[e]={name:e,settings:t}},lookup:e=>R(r,e).map(e=>e.settings),getNames:()=>Be(r)}})();var e,r;e=n,r=o,e.serializer.addTempAttr(ei()),e.serializer.addNodeFilter("span",e=>{Y(e,t=>{var e;e=t,P.from(e.attr(Ja())).bind(r.lookup).each(e=>{!1===e.persistent&&t.unwrap()})})});const a=((n,t)=>{const o=za({}),a=()=>({listeners:[],previous:Wa()}),l=(e,t)=>{i(e,e=>(t(e),e))},i=(e,t)=>{const r=o.get(),n=t(R(r,e).getOrThunk(a));r[e]=n,o.set(r)},d=(e,t)=>{Y(ri(n,e),e=>{t?tr(e,ei(),"true"):ir(e,ei())})},e=Ga(()=>{var e=Ee(t.getNames());Y(e,r=>{i(r,i=>{const s=i.previous.get();return ti(n,P.some(r)).fold(()=>{s.each(e=>{var t;t=r,l(t,e=>{Y(e.listeners,e=>e(!1,t))}),i.previous.clear(),d(e,!1)})},({uid:e,name:t,elements:r})=>{var n,o,a;$t(s,e)||(s.each(e=>d(e,!1)),n=t,o=e,a=r,l(n,e=>{Y(e.listeners,e=>e(!0,n,{uid:o,nodes:C(a,e=>e.dom)}))}),i.previous.set(e),d(e,!0))}),{previous:i.previous,listeners:i.listeners}})})},30);return n.on("remove",()=>{e.cancel()}),n.on("NodeChange",()=>{e.throttle()}),{addListener:(e,t)=>{i(e,e=>({previous:e.previous,listeners:e.listeners.concat([t])}))}}})(n,o);return{register:(e,t)=>{o.register(e,t)},annotate:(t,r)=>{o.lookup(t).each(e=>{var i,s,l,d;s=t,l=e,d=r,(i=n).undoManager.transact(()=>{const e=i.selection,t=e.getRng(),r=0<lu(i).length;if(t.collapsed&&!r&&(n=i,o=t,a=ou(n,o,[{inline:"span"}]),o.setStart(a.startContainer,a.startOffset),o.setEnd(a.endContainer,a.endOffset),n.selection.setRng(o)),e.getRng().collapsed&&!r){const t=Cu(i.getDoc(),d,s,l.decorate);cn(t,go),e.getRng().insertNode(t.dom),e.select(t.dom)}else hu(e,!1,()=>{pu(i,e=>{wu(i,e,s,l.decorate,d)})});var n,o,a})})},annotationChanged:(e,t)=>{a.addListener(e,t)},remove:e=>{var t=n.selection.getBookmark();ti(n,P.some(e)).each(({elements:e})=>{Y(e,ln)}),n.selection.moveToBookmark(t)},removeAll:e=>{var t=n.selection.getBookmark();X(ni(n,e),(e,t)=>Y(e,ln)),n.selection.moveToBookmark(t)},getAll:e=>{e=ni(n,e);return De(e,e=>C(e,e=>e.dom))}}},ku=e=>({getBookmark:N(pc,e),moveToBookmark:N(hc,e)}),Su=(ku.isBookmarkNode=vc,(t,r,e)=>!e.collapsed&&G(e.getClientRects(),e=>t>=e.left&&t<=e.right&&r>=e.top&&r<=e.bottom)),_u=(e,t,r)=>e.dispatch(t,r),Eu=(e,t,r,n)=>e.dispatch("FormatApply",{format:t,node:r,vars:n}),Nu=(e,t,r,n)=>e.dispatch("FormatRemove",{format:t,node:r,vars:n}),Au=(e,t)=>e.dispatch("SetContent",t),Ru=(e,t)=>e.dispatch("GetContent",t),Tu=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),ie={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ie.metaKeyPressed(e),metaKeyPressed:e=>J.os.isMacOS()||J.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Ou=(n,d)=>{const c="data-mce-selected",u=d.dom,m=Z.each;let g,f,p,h,v,b,y,C,w,x,k,S,_;const E=d.getDoc(),N=document,A=Math.abs,R=Math.round,T=d.getBody();let O,B;const P={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},D=e=>H(e)&&(Mn(e)||d.dom.is(e,"figure.image")),L=e=>Un(e)||u.hasClass(e,"mce-preview-object"),e=e=>{var t,r,n,o=e.target;t=e,r=d.selection.getRng(),("longpress"===t.type||0===t.type.indexOf("touch")?(n=t.touches[0],!D(t.target)||Su(n.clientX,n.clientY,r)):!D(t.target)||Su(t.clientX,t.clientY,r))||e.isDefaultPrevented()||d.selection.select(o)},M=e=>u.is(e,"figure.image")?[e.querySelector("img")]:u.hasClass(e,"mce-preview-object")&&H(e.firstElementChild)?[e,e.firstElementChild]:[e],I=e=>{var t=Zs(d);return!!t&&"false"!==e.getAttribute("data-mce-resize")&&e!==d.getBody()&&(u.hasClass(e,"mce-preview-object")?xr(re(e.firstElementChild),t):xr(re(e),t))},a=(e,t,r)=>{H(r)&&(e=M(e),Y(e,e=>{e.style[t]||!d.schema.isValid(e.nodeName.toLowerCase(),t)?u.setStyle(e,t,r):u.setAttrib(e,t,""+r)}))},V=(e,t,r)=>{a(e,"width",t),a(e,"height",r)},F=e=>{let t,r,n,o;var a,i,s,l;t=e.screenX-b,r=e.screenY-y,S=t*h[2]+C,_=r*h[3]+w,S=S<5?5:S,_=_<5?5:_,((D(g)||L(g))&&!1!==el(d)?!ie.modifierPressed(e):ie.modifierPressed(e))&&(A(t)>A(r)?(_=R(S*x),S=R(_/x)):(S=R(_/x),_=R(S*x))),V(f,S,_),n=h.startPos.x+t,o=h.startPos.y+r,n=0<n?n:0,o=0<o?o:0,u.setStyles(p,{left:n,top:o,display:"block"}),p.innerHTML=S+" &times; "+_,h[2]<0&&f.clientWidth<=S&&u.setStyle(f,"left",void 0+(C-S)),h[3]<0&&f.clientHeight<=_&&u.setStyle(f,"top",void 0+(w-_)),t=T.scrollWidth-O,r=T.scrollHeight-B,t+r!==0&&u.setStyles(p,{left:n-t,top:o-r}),k||(e=d,a=g,i=C,s=w,l="corner-"+h.name,e.dispatch("ObjectResizeStart",{target:a,width:i,height:s,origin:l}),k=!0)},U=()=>{var e,t,r,n,o=k;k=!1,o&&(a(g,"width",S),a(g,"height",_)),u.unbind(E,"mousemove",F),u.unbind(E,"mouseup",U),N!==E&&(u.unbind(N,"mousemove",F),u.unbind(N,"mouseup",U)),u.remove(f),u.remove(p),u.remove(v),i(g),o&&(o=d,e=g,t=S,r=_,n="corner-"+h.name,o.dispatch("ObjectResized",{target:e,width:t,height:r,origin:n}),u.setAttrib(g,"style",u.getAttrib(g,"style"))),d.nodeChanged()},i=e=>{j();const t=u.getPos(e,T),o=t.x,a=t.y,r=e.getBoundingClientRect(),i=r.width||r.right-r.left,s=r.height||r.bottom-r.top,n=(g!==e&&(z(),g=e,S=_=0),d.dispatch("ObjectSelected",{target:e})),l=u.getAttrib(g,c,"1");I(e)&&!n.isDefaultPrevented()?m(P,(r,n)=>{let e;(e=u.get("mceResizeHandle"+n))&&u.remove(e),e=u.add(T,"div",{id:"mceResizeHandle"+n,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+n+"-resize; margin:0; padding:0"}),u.bind(e,"mousedown",e=>{var t;e.stopImmediatePropagation(),e.preventDefault(),e=e,t=M(g)[0],b=e.screenX,y=e.screenY,C=t.clientWidth,w=t.clientHeight,x=w/C,(h=r).name=n,h.startPos={x:i*r[0]+o,y:s*r[1]+a},O=T.scrollWidth,B=T.scrollHeight,v=u.add(T,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),u.setStyles(v,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),f=L(e=g)?u.create("img",{src:J.transparentSrc}):e.cloneNode(!0),u.addClass(f,"mce-clonedresizable"),u.setAttrib(f,"data-mce-bogus","all"),f.contentEditable="false",u.setStyles(f,{left:o,top:a,margin:0}),V(f,i,s),f.removeAttribute(c),T.appendChild(f),u.bind(E,"mousemove",F),u.bind(E,"mouseup",U),N!==E&&(u.bind(N,"mousemove",F),u.bind(N,"mouseup",U)),p=u.add(T,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},C+" &times; "+w)}),r.elm=e,u.setStyles(e,{left:i*r[0]+o-e.offsetWidth/2,top:s*r[1]+a-e.offsetHeight/2})}):z(),u.getAttrib(g,c)||g.setAttribute(c,l)},z=()=>{j(),g&&g.removeAttribute(c),X(P,(e,t)=>{t=u.get("mceResizeHandle"+t);t&&(u.unbind(t),u.remove(t))})},r=e=>{var t,r=(e,t)=>{if(e)do{if(e===t)return!0}while(e=e.parentNode)};k||d.removed||(m(u.select("img[data-mce-selected],hr[data-mce-selected]"),e=>{e.removeAttribute(c)}),e="mousedown"===e.type?e.target:n.getNode(),r(e=null==(t=Xn(re(e),"table,img,figure.image,hr,video,span.mce-preview-object").getOrUndefined())?void 0:t.dom,T)&&(o(),r(n.getStart(!0),e)&&r(n.getEnd(!0),e))?i(e):z())},j=()=>{X(P,e=>{e.elm&&(u.unbind(e.elm),delete e.elm)})},o=()=>{try{d.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};return d.on("init",()=>{o();const t=Ka(e=>{d.composing||r(e)},0);d.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",t.throttle),d.on("keyup compositionend",e=>{g&&"TABLE"===g.nodeName&&t.throttle(e)}),d.on("hide blur",z),d.on("contextmenu longpress",e,!0)}),d.on("remove",j),{isResizable:I,showResizeRect:i,hideResizeRect:z,updateResizeRect:r,destroy:()=>{g=f=v=null}}},Bu=(e,t,r)=>{var n,e=e.document.createRange(),o=e;return t.fold(e=>{o.setStartBefore(e.dom)},(e,t)=>{o.setStart(e.dom,t)},e=>{o.setStartAfter(e.dom)}),n=e,r.fold(e=>{n.setEndBefore(e.dom)},(e,t)=>{n.setEnd(e.dom,t)},e=>{n.setEndAfter(e.dom)}),e},Pu=(e,t,r,n,o)=>{const a=e.document.createRange();return a.setStart(t.dom,r),a.setEnd(n.dom,o),a},Du=ds([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Lu=(e,t,r)=>t(re(r.startContainer),r.startOffset,re(r.endContainer),r.endOffset),Mu=(Du.ltr,Du.rtl,(e,t,r,n)=>({start:e,soffset:t,finish:r,foffset:n})),Iu=document.caretPositionFromPoint?(r,e,t)=>{var n,o;return P.from(null==(o=(n=r.dom).caretPositionFromPoint)?void 0:o.call(n,e,t)).bind(e=>{if(null===e.offsetNode)return P.none();const t=r.dom.createRange();return t.setStart(e.offsetNode,e.offset),t.collapse(),P.some(t)})}:document.caretRangeFromPoint?(e,t,r)=>{var n;return P.from(null==(n=(e=e.dom).caretRangeFromPoint)?void 0:n.call(e,t,r))}:P.none,Fu=ds([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Uu={before:Fu.before,on:Fu.on,after:Fu.after,cata:(e,t,r,n)=>e.fold(t,r,n),getStart:e=>e.fold(p,p,p)},zu=ds([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ju={domRange:zu.domRange,relative:zu.relative,exact:zu.exact,exactFromRange:e=>zu.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{e=e.match({domRange:e=>re(e.startContainer),relative:(e,t)=>Uu.getStart(e),exact:(e,t,r,n)=>e});return Nr(e)},range:Mu},Vu=(e,t)=>{var r=ee(e);return"input"===r?Uu.after(e):K(["br","img"],r)?0===t?Uu.before(e):Uu.after(e):Uu.on(e,t)},Hu=(e,t)=>{e=e.fold(Uu.before,Vu,Uu.after),t=t.fold(Uu.before,Vu,Uu.after);return ju.relative(e,t)},qu=(e,t,r,n)=>{e=Vu(e,t),t=Vu(r,n);return ju.relative(e,t)},$u=(e,t)=>{const r=(t||document).createDocumentFragment();return Y(e,e=>{r.appendChild(e.dom)}),re(r)},Wu=e=>{const o=ju.getWin(e).dom,t=(e,t,r,n)=>Pu(o,e,t,r,n),r=e.match({domRange:e=>{var t=re(e.startContainer),r=re(e.endContainer);return qu(t,e.startOffset,r,e.endOffset)},relative:Hu,exact:qu});return((e,t)=>{o=e;var o,e=t.match({domRange:e=>({ltr:W(e),rtl:P.none}),relative:(e,t)=>({ltr:Je(()=>Bu(o,e,t)),rtl:Je(()=>P.some(Bu(o,t,e)))}),exact:(e,t,r,n)=>({ltr:Je(()=>Pu(o,e,t,r,n)),rtl:Je(()=>P.some(Pu(o,r,n,e,t)))})});{const r=(t=e).ltr();return r.collapsed?t.rtl().filter(e=>!1===e.collapsed).map(e=>Du.rtl(re(e.endContainer),e.endOffset,re(e.startContainer),e.startOffset)).getOrThunk(()=>Lu(0,Du.ltr,r)):Lu(0,Du.ltr,r)}})(o,r).match({ltr:t,rtl:t})},Ku=(e,t,r)=>{return((e,t,r)=>{e=re(e.document);return Iu(e,t,r).map(e=>Mu(re(e.startContainer),e.startOffset,re(e.endContainer),e.endOffset))})(r.defaultView,e,t).map(e=>{const t=r.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t}).getOrUndefined()},Gu=(e,t)=>e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,Yu=(e,t,r)=>null!==((e,t,r)=>{for(;e&&e!==t;){if(r(e))return e;e=e.parentNode}return null})(e,t,r),Xu=e=>e&&"TABLE"===e.nodeName,Qu=(e,t,r)=>{const n=new Zn(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());for(;t=n[r?"prev":"next"]();)if(x(t))return!0},Ju=(e,t,r,n,o)=>{let a;var i=e.getRoot();let s;var l,d,c=e.schema.getNonEmptyElements(),u=e.getParent(o.parentNode,e.isBlock)||i;if(n&&x(o)&&t&&e.isEmpty(u))return P.some(B(o.parentNode,e.nodeIndex(o)));const m=new Zn(o,u);for(;s=m[n?"prev":"next"]();){if("false"===e.getContentEditableParent(s)||(l=s,d=i,xo(l)&&!1===Yu(l,d,sc)))return P.none();if(O(s)&&0<s.nodeValue.length)return!1===((e,t,r)=>Yu(e,t,e=>e.nodeName===r))(s,i,"A")?P.some(B(s,n?s.nodeValue.length:0)):P.none();if(e.isBlock(s)||c[s.nodeName.toLowerCase()])return P.none();a=s}return r&&a?P.some(B(a,0)):P.none()},Zu=(e,t,r,n)=>{let o,a;var i=e.getRoot();let s,l,d=!1;o=n[(r?"start":"end")+"Container"],a=n[(r?"start":"end")+"Offset"];var c,n=oe(o)&&a===o.childNodes.length,u=e.schema.getNonEmptyElements();if(l=r,xo(o))return P.none();if(oe(o)&&a>o.childNodes.length-1&&(l=!1),Dn(o)&&(o=i,a=0),o===i){if(l&&(s=o.childNodes[0<a?a-1:0])){if(xo(s))return P.none();if(u[s.nodeName]||Xu(s))return P.none()}if(o.hasChildNodes()){if(a=Math.min(!l&&0<a?a-1:a,o.childNodes.length-1),o=o.childNodes[a],a=O(o)&&n?o.data.length:0,!t&&o===i.lastChild&&Xu(o))return P.none();if(((e,t)=>{for(;t&&t!==e;){if(_(t))return!0;t=t.parentNode}return!1})(i,o)||xo(o))return P.none();if(o.hasChildNodes()&&!1===Xu(o)){s=o;const t=new Zn(o,i);do{if(_(s)||xo(s)){d=!1;break}if(O(s)&&0<s.nodeValue.length){a=l?0:s.nodeValue.length,o=s,d=!0;break}if(u[s.nodeName.toLowerCase()]&&(!(c=s)||!/^(TD|TH|CAPTION)$/.test(c.nodeName))){a=e.nodeIndex(s),o=s.parentNode,l||a++,d=!0;break}}while(s=l?t.next():t.prev())}}}return t&&(O(o)&&0===a&&Ju(e,n,t,!0,o).each(e=>{o=e.container(),a=e.offset(),d=!0}),oe(o)&&(!(s=(s=o.childNodes[a])||o.childNodes[a-1])||!x(s)||(r=s).previousSibling&&"A"===r.previousSibling.nodeName||Qu(e,s,!1)||Qu(e,s,!0)||Ju(e,n,t,!0,s).each(e=>{o=e.container(),a=e.offset(),d=!0}))),l&&!t&&O(o)&&a===o.nodeValue.length&&Ju(e,n,t,!1,o).each(e=>{o=e.container(),a=e.offset(),d=!0}),d?P.some(B(o,a)):P.none()},em=(e,t)=>{const r=t.collapsed,n=t.cloneRange(),o=B.fromRangeStart(t);return Zu(e,r,!0,n).each(e=>{r&&B.isAbove(o,e)||n.setStart(e.container(),e.offset())}),r||Zu(e,r,!1,n).each(e=>{n.setEnd(e.container(),e.offset())}),r&&n.collapse(!0),Gu(t,n)?P.none():P.some(n)},tm=(e,t)=>e.splitText(t),rm=e=>{let t=e.startContainer,r=e.startOffset,n=e.endContainer,o=e.endOffset;return t===n&&O(t)?0<r&&r<t.nodeValue.length&&(n=tm(t,r),t=n.previousSibling,o>r?(o-=r,t=n=tm(n,o).previousSibling,o=n.nodeValue.length,r=0):o=0):(O(t)&&0<r&&r<t.nodeValue.length&&(t=tm(t,r),r=0),O(n)&&0<o&&o<n.nodeValue.length&&(n=tm(n,o).previousSibling,o=n.nodeValue.length)),{startContainer:t,startOffset:r,endContainer:n,endOffset:o}},nm=r=>({walk:(e,t)=>au(r,e,t),split:rm,normalize:t=>em(r,t).fold(A,e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0))}),om=(nm.compareRanges=Gu,nm.getCaretRangeFromPoint=Ku,nm.getSelectedNode=bi,nm.getNode=yi,(n=>{const e=e=>{const t=(e=>{const t=e.dom;return Wr(e)?t.getBoundingClientRect().height:t.offsetHeight})(e);if(t<=0||null===t){const t=Xr(e,n);return parseFloat(t)||0}return t},o=(r,e)=>he(e,(e,t)=>{t=Xr(r,t),t=void 0===t?0:parseInt(t,10);return isNaN(t)?e:e+t},0);return{set:(e,t)=>{if(!ce(t)&&!t.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+t);const r=e.dom;vr(r)&&(r.style[n]=t+"px")},get:e,getOuter:e,aggregate:o,max:(e,t,r)=>{e=o(e,r);return e<t?t-e:0}}})("height")),am=()=>re(document),im=(r,e)=>r.view(e).fold(W([]),e=>{var t=r.owner(e),t=im(r,t);return[e].concat(t)});var sm=Object.freeze({__proto__:null,view:e=>{return(e.dom===document?P.none():P.from(null==(e=e.dom.defaultView)?void 0:e.frameElement)).map(re)},owner:e=>Er(e)});const lm=e=>"textarea"===ee(e),dm=(e,t)=>{var r=(e=>{var t=e.dom.ownerDocument,r=t.body,n=t.defaultView,t=t.documentElement;if(r===e.dom)return fn(r.offsetLeft,r.offsetTop);var o=pn(null==n?void 0:n.pageYOffset,t.scrollTop),n=pn(null==n?void 0:n.pageXOffset,t.scrollLeft),a=pn(t.clientTop,r.clientTop),t=pn(t.clientLeft,r.clientLeft);return hn(e).translate(n-t,o-a)})(e),n=(n=e,om.get(n));return{element:e,bottom:r.top+n,height:n,pos:r,cleanup:t}},cm=(d,c,u,m)=>{{var e=d,t=(e,t)=>{{var r=d,n=c,o=u,a=m;const i=re(r.getBody()),s=re(r.getDoc()),l=(i.dom.offsetWidth,(()=>{const e=((e,t)=>{var r=Pr(e);if(0===r.length||lm(e))return{element:e,offset:t};if(t<r.length&&!lm(r[t]))return{element:r[t],offset:0};r=r[r.length-1];return lm(r)?{element:e,offset:t}:"img"===ee(r)?{element:r,offset:1}:Qt(r)?{element:r,offset:bu(r).length}:{element:r,offset:Pr(r).length}})(re(o.startContainer),o.startOffset),t=yr('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return tn(e.element,t),dm(t,()=>ne(t))})());return um(r,s,n,l,a),void l.cleanup()}},r=u;const n=r.startContainer,o=r.startOffset,a=r.endContainer,i=r.endOffset,s=(t(re(n),re(a)),e.dom.createRng());return s.setStart(n,o),s.setEnd(a,i),void e.selection.setRng(r)}},um=(e,t,r,n,o)=>{var a={elm:n.element.dom,alignToTop:o};e.dispatch("ScrollIntoView",a).isDefaultPrevented()||(r(t,vn(t).top,n,o),e.dispatch("AfterScrollIntoView",a))},mm=(e,t,r,n)=>{var o=re(e.getDoc());um(e,o,r,(e=t,dm(re(e),$)),n)},gm=(e,t,r,n)=>{var o=e.pos;if(r)bn(o.left,o.top,n);else{const r=o.top-t+e.height;bn(o.left,r,n)}},fm=(e,t,r,n,o)=>{var a=r+t,i=n.pos.top,s=n.bottom,l=r<=s-i;i<t?gm(n,r,!1!==o,e):a<i?gm(n,r,l?!1!==o:!0===o,e):a<s&&!l&&gm(n,r,!0===o,e)},pm=(e,t,r,n)=>{var o=e.dom.defaultView.innerHeight;fm(e,t,o,r,n)},hm=(e,t,r,n)=>{var o,a=e.dom.defaultView.innerHeight,a=(fm(e,t,a,r,n),e=r.element,t=am(),t=vn(t),o=(a=sm).owner(e),a=im(a,o),o=hn(e),e=pe(a,(e,t)=>{t=hn(t);return{left:e.left+t.left,top:e.top+t.top}},{left:0,top:0}),fn(e.left+o.left+t.left,e.top+o.top+t.top)),e=wn(window);a.top<e.y?yn(r.element,!1!==n):a.top>e.bottom&&yn(r.element,!0===n)},vm=(e,t,r)=>cm(e,pm,t,r),bm=(e,t,r)=>mm(e,t,pm,r),ym=(e,t,r)=>cm(e,hm,t,r),Cm=(e,t,r)=>mm(e,t,hm,r),wm=(e,t,r)=>{(e.inline?vm:ym)(e,t,r)},xm=e=>e.dom.focus(),km=e=>{var t=jr(e).dom;return e.dom===t.activeElement},Sm=(e=am())=>P.from(e.dom.activeElement).map(re),_m=(e,t)=>{t=Qt(t)?bu(t).length:Pr(t).length+1;return t<e?t:e<0?0:e},Em=e=>ju.range(e.start,_m(e.soffset,e.start),e.finish,_m(e.foffset,e.finish)),Nm=(e,t)=>!kn(t.dom)&&(Sr(e,t)||S(e,t)),Am=t=>e=>Nm(t,e.start)&&Nm(t,e.finish),Rm=e=>ju.range(re(e.startContainer),e.startOffset,re(e.endContainer),e.endOffset),Tm=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),P.some(t)}catch(e){return P.none()}},Om=e=>{const t=e.inline?(r=re(e.getBody()),(()=>{const e=Nr(r).dom.getSelection();return(e&&0!==e.rangeCount?P.from(e.getRangeAt(0)):P.none()).map(Rm)})().filter(Am(r))):P.none();var r;e.bookmark=t.isSome()?t:e.bookmark},Bm=r=>(r.bookmark||P.none()).bind(e=>{return t=re(r.getBody()),e=e,P.from(e).filter(Am(t)).map(Em);var t}).bind(Tm),Pm={isEditorUIElement:e=>{const t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},Dm={setEditorTimeout:(t,r,e)=>(e=>(ce(e)||(e=0),setTimeout(()=>{t.removed||r()},e)))(e),setEditorInterval:(e,t,r)=>{r=r,ce(r)||(r=0);const n=setInterval(()=>{e.removed?clearInterval(n):t()},r);return n}};let Lm;const Mm=ae.DOM,Im=(t,e)=>{const r=ml(t),n=Mm.getParent(e,e=>(e=>Pm.isEditorUIElement(e))(e)||!!r&&t.dom.is(e,r));return null!==n},Fm=(r,e)=>{const t=e.editor;{var a=t;const i=Ka(()=>{Om(a)},0);a.on("init",()=>{if(a.inline){var e=a,t=i;const o=()=>{t.throttle()};ae.DOM.bind(document,"mouseup",o),e.on("remove",()=>{ae.DOM.unbind(document,"mouseup",o)})}var r,n;r=a,e=i,n=e,r.on("mouseup touchend",e=>{n.throttle()}),r.on("keyup NodeChange AfterSetSelectionRange",e=>{"nodechange"===e.type&&e.selectionChange||Om(r)})}),a.on("remove",()=>{i.cancel()})}t.on("focusin",()=>{const e=r.focusedEditor;e!==t&&(e&&e.dispatch("blur",{focusedEditor:t}),r.setActive(t),(r.focusedEditor=t).dispatch("focus",{blurredEditor:e}),t.focus(!0))}),t.on("focusout",()=>{Dm.setEditorTimeout(t,()=>{var e=r.focusedEditor;Im(t,(e=>{try{var t=jr(re(e.getElement()));return Sm(t).fold(()=>document.body,e=>e.dom)}catch(e){return document.body}})(t))||e!==t||(t.dispatch("blur",{focusedEditor:null}),r.focusedEditor=null)})}),Lm||(Lm=e=>{const t=r.activeEditor;t&&qr(e).each(e=>{e.ownerDocument!==document||e===document.body||Im(t,e)||r.focusedEditor!==t||(t.dispatch("blur",{focusedEditor:null}),r.focusedEditor=null)})},Mm.bind(document,"focusin",Lm))},Um=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(Mm.unbind(document,"focusin",Lm),Lm=null)},zm=(t,e)=>{var r;r=re(t.getBody()),(e=>e.collapsed?P.from(yi(e.startContainer,e.startOffset)).map(re):P.none())(e).bind(e=>lo(e)?P.some(e):!1===Sr(r,e)?P.some(r):P.none()).bind(e=>oc(e.dom)).fold(()=>{t.selection.normalize()},e=>t.selection.setRng(e.toRange()))},jm=t=>{if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},Vm=e=>{var t,r;return e.inline?(r=e.getBody(),r&&(r=re(r),km(r)||(t=r,Sm(jr(t)).filter(e=>t.dom.contains(e.dom)).isSome()))):(e=>e.iframeElement&&km(re(e.iframeElement)))(e)},Hm=e=>e.editorManager.setActive(e),qm=(e,t,r,n,o)=>{const a=r?t.startContainer:t.endContainer,i=r?t.startOffset:t.endOffset;return P.from(a).map(re).map(e=>n&&t.collapsed?e:Dr(e,o(e,i)).getOr(e)).bind(e=>Xt(e)?P.some(e):Ar(e).filter(Xt)).map(e=>e.dom).getOr(e)},$m=(e,t,r)=>qm(e,t,!0,r,(e,t)=>Math.min(Ir(e),t)),Wm=(e,t,r)=>qm(e,t,!1,r,(e,t)=>0<t?t-1:t),Km=(e,t)=>{for(var r=e;e&&O(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||r},Gm=(r,e)=>C(e,e=>{var t=r.dispatch("GetSelectionRange",{range:e});return t.range!==e?t.range:e}),Ym=["img","br"],Xm=e=>{return yu(e).filter(e=>0!==e.trim().length||-1<e.indexOf(go)).isSome()||K(Ym,ee(e))},Qm="[data-mce-autocompleter]",Jm=(r,e)=>{var t;Zm(re(r.getBody())).isNone()&&(t=yr('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',r.getDoc()),on(t,re(e.extractContents())),e.insertNode(t.dom),Ar(t).each(e=>e.dom.normalize()),((e,o)=>{const a=e=>{var t=Pr(e);for(let e=t.length-1;0<=e;e--){var r=t[e];if(o(r))return P.some(r);const n=a(r);if(n.isSome())return n}return P.none()};return a(e)})(t,Xm).map(e=>{var t;r.selection.setCursorLocation(e.dom,(t=e,"img"===ee(t)?1:yu(t).fold(()=>Pr(t).length,e=>e.length)))}))},Zm=e=>Yn(e,Qm),eg={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},tg=(r,n,e)=>{var t=e?"lastChild":"firstChild",o=e?"prev":"next";if(r[t])return r[t];if(r!==n){let t=r[o];if(t)return t;for(let e=r.parent;e&&e!==n;e=e.parent)if(t=e[o])return t}},rg=e=>{var t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class ng{constructor(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}static create(e,t){const r=new ng(e,eg[e]||1);return t&&X(t,(e,t)=>{r.attr(t,e)}),r}replace(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this}attr(t,r){const n=this;let o;if("string"!=typeof t)return null!=t&&X(t,(e,t)=>{n.attr(t,e)}),n;if(o=n.attributes){if(void 0===r)return o.map[t];if(null===r){if(t in o.map){delete o.map[t];let e=o.length;for(;e--;)if(o[e].name===t)return o.splice(e,1),n}return n}if(t in o.map){let e=o.length;for(;e--;)if(o[e].name===t){o[e].value=r;break}}else o.push({name:t,value:r});return o.map[t]=r,n}}clone(){const r=this,e=new ng(r.name,r.type);var n;if(n=r.attributes){const r=[];r.map={};for(let e=0,t=n.length;e<t;e++){var o=n[e];"id"!==o.name&&(r[r.length]={name:o.name,value:o.value},r.map[o.name]=o.value)}e.attributes=r}return e.value=r.value,e}wrap(e){return this.parent.insert(e,this),e.append(this),this}unwrap(){for(let e=this.firstChild;e;){var t=e.next;this.insert(e,this,!0),e=t}this.remove()}remove(){const e=this.parent,t=this.next,r=this.prev;return e&&(e.firstChild===this?(e.firstChild=t)&&(t.prev=null):r.next=t,e.lastChild===this?(e.lastChild=r)&&(r.next=null):t.prev=r,this.parent=this.next=this.prev=null),this}append(e){e.parent&&e.remove();const t=this.lastChild;return t?((t.next=e).prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e}insert(e,t,r){e.parent&&e.remove();const n=t.parent||this;return r?(t===n.firstChild?n.firstChild=e:t.prev.next=e,e.prev=t.prev,(e.next=t).prev=e):(t===n.lastChild?n.lastChild=e:t.next.prev=e,e.next=t.next,(e.prev=t).next=e),e.parent=n,e}getAll(t){const r=[];for(let e=this.firstChild;e;e=tg(e,this))e.name===t&&r.push(e);return r}children(){const t=[];for(let e=this.firstChild;e;e=e.next)t.push(e);return t}empty(){const t=this;if(t.firstChild){const r=[];for(let e=t.firstChild;e;e=tg(e,t))r.push(e);let e=r.length;for(;e--;){const t=r[e];t.parent=t.firstChild=t.lastChild=t.next=t.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(e,t={},r){let n=this.firstChild;if(rg(this))return!1;if(n)do{if(1===n.type){if(n.attr("data-mce-bogus"))continue;if(e[n.name])return!1;if(rg(n))return!1}if(8===n.type)return!1;if(3===n.type&&!(e=>{if(!Vo(e.value))return!1;const t=e.parent;return!t||"span"===t.name&&!t.attr("style")||!/^[ ]+$/.test(e.value)})(n))return!1;if(3===n.type&&n.parent&&t[n.parent.name]&&Vo(n.value))return!1;if(r&&r(n))return!1}while(n=tg(n,this));return!0}walk(e){return tg(this,null,e)}}const og=(e,t,r=0)=>{const n=e.toLowerCase();if(-1!==n.indexOf("[if ",r)&&(o=n,/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(o.substr(r)))){const e=n.indexOf("[endif]",r);return n.indexOf(">",e)}if(t){const e=n.indexOf(">",r);return-1!==e?e:n.length}{const t=/--!?>/g;t.lastIndex=r;var o=t.exec(e);return o?o.index+o[0].length:n.length}},ag=(e,t)=>{const r=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,n=e.schema;let o=((e,t)=>{e=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(e,"")})(e.getTempAttrs(),t);for(var a=n.getVoidElements();i=r.exec(o);){const e=r.lastIndex,t=i[0].length;var i=a[i[1]]?e:((e,t,r)=>{const n=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,o=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,a=e.getVoidElements();let i=1,s=r;for(;0!==i;)for(n.lastIndex=s;;){const e=n.exec(t);if(null===e)return s;if("!"===e[1]){s=at(e[2],"--")?og(t,!1,e.index+"!--".length):og(t,!0,e.index+1);break}{o.lastIndex=n.lastIndex;const r=o.exec(t);if(d(r)||r.index!==n.lastIndex)continue;"/"===e[1]?--i:Q(a,e[2])||(i+=1),s=n.lastIndex+r[0].length;break}}return s})(n,o,e);o=o.substring(0,e-t)+o.substring(i),r.lastIndex=e-t}return vo(o)},ig=ag,sg=Z.each,lg=o=>({compare:(e,t)=>{if(e.nodeName!==t.nodeName)return!1;var r=r=>{const n={};return sg(o.getAttribs(r),e=>{const t=e.nodeName.toLowerCase();0!==t.indexOf("_")&&"style"!==t&&0!==t.indexOf("data-")&&(n[t]=o.getAttrib(r,t))}),n},n=(e,t)=>{let r,n;for(n in e)if(Q(e,n)){if(void 0===(r=t[n]))return!1;if(e[n]!==r)return!1;delete t[n]}for(n in t)if(Q(t,n))return!1;return!0};return!(!n(r(e),r(t))||!n(o.parseStyle(o.getAttrib(e,"style")),o.parseStyle(o.getAttrib(t,"style")))||vc(e)||vc(t))}}),dg=Z.makeMap,cg=e=>{const s=[],l=(e=e||{}).indent,d=dg(e.indent_before||""),c=dg(e.indent_after||""),u=ua.getEncodeFunc(e.entity_encoding||"raw",e.entities),m="xhtml"!==e.element_format;return{start:(e,t,r)=>{let n,o,a,i;if(l&&d[e]&&0<s.length&&(0<(i=s[s.length-1]).length&&"\n"!==i&&s.push("\n")),s.push("<",e),t)for(n=0,o=t.length;n<o;n++)a=t[n],s.push(" ",a.name,'="',u(a.value,!0),'"');s[s.length]=!r||m?">":" />",r&&l&&c[e]&&0<s.length&&(0<(i=s[s.length-1]).length&&"\n"!==i&&s.push("\n"))},end:e=>{s.push("</",e,">"),l&&c[e]&&0<s.length&&(0<(e=s[s.length-1]).length&&"\n"!==e&&s.push("\n"))},text:(e,t)=>{0<e.length&&(s[s.length]=t?e:u(e))},cdata:e=>{s.push("<![CDATA[",e,"]]>")},comment:e=>{s.push("\x3c!--",e,"--\x3e")},pi:(e,t)=>{t?s.push("<?",e," ",u(t),"?>"):s.push("<?",e,"?>"),l&&s.push("\n")},doctype:e=>{s.push("<!DOCTYPE",e,">",l?"\n":"")},reset:()=>{s.length=0},getContent:()=>s.join("").replace(/\n$/,"")}},ug=(r,s=wa())=>{const l=cg(r);return(r=r||{}).validate=!("validate"in r)||r.validate,{serialize:e=>{const t=r.validate,a={3:e=>{l.text(e.value,e.raw)},8:e=>{l.comment(e.value)},7:e=>{l.pi(e.name,e.value)},10:e=>{l.doctype(e.value)},4:e=>{l.cdata(e.value)},11:e=>{if(e=e.firstChild)for(;i(e),e=e.next;);}},i=(l.reset(),n=>{const o=a[n.type];if(o)o(n);else{const o=n.name,a=o in s.getVoidElements();let r=n.attributes;if(t&&r&&1<r.length){const l=[],o=(l.map={},s.getElementRule(n.name));if(o){for(let e=0,t=o.attributesOrder.length;e<t;e++){const s=o.attributesOrder[e];if(s in r.map){const n=r.map[s];l.map[s]=n,l.push({name:s,value:n})}}for(let e=0,t=r.length;e<t;e++){const s=r[e].name;if(!(s in l.map)){const n=r.map[s];l.map[s]=n,l.push({name:s,value:n})}}r=l}}if(l.start(o,r,a),!a){let e=n.firstChild;if(e)for("pre"!==o&&"textarea"!==o||3!==e.type||"\n"!==e.value[0]||l.text("\n",!0);i(e),e=e.next;);l.end(o)}}});return 1!==e.type||r.inner?3===e.type?a[3](e):a[11](e):i(e),l.getContent()}}},mg=new Set,gg=(Y(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{mg.add(e)}),["font","text-decoration","text-emphasis"]),fg=(e,t)=>Be(e.parseStyle(e.getAttrib(t,"style"))),pg=(r,n,o)=>P.from(o.container()).filter(O).exists(e=>{var t=r?0:-1;return n(e.data.charAt(o.offset()+t))}),hg=N(pg,!0,yc),vg=N(pg,!1,yc),bg=e=>{e=e.container();return O(e)&&(0===e.data.length||ho(e.data)&&ku.isBookmarkNode(e.parentNode))},yg=(t,r)=>e=>P.from(Nd(t?0:-1,e)).filter(r).isSome(),Cg=e=>Mn(e)&&"block"===Xr(re(e),"display"),wg=e=>_(e)&&!(e=>oe(e)&&"all"===e.getAttribute("data-mce-bogus"))(e),xg=yg(!0,Cg),kg=yg(!1,Cg),Sg=yg(!0,Un),_g=yg(!1,Un),Eg=yg(!0,An),Ng=yg(!1,An),Ag=yg(!0,wg),Rg=yg(!1,wg),Tg=e=>{sn(e),on(e,yr('<br data-mce-bogus="1">'))},Og=r=>{Mr(r).each(t=>{Rr(t).each(e=>{ro(r)&&oo(t)&&ro(e)&&ne(t)})})},Bg=(e,t)=>{var r=t,n=A;return Sr(r,e)?((e,t)=>{const r=q(t)?t:A;let n=e.dom;const o=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,t=re(e);if(o.push(t),!0===r(t))break;n=e}return o})(e,e=>n(e)||S(e,r)).slice(0,-1):[]},Pg=(e,t)=>[e].concat(Bg(e,t)),Dg=(e,t,r)=>ec(e,t,r,bg),Lg=(e,t)=>be(Pg(re(t.container()),e),ro),Mg=(e,r,n)=>Dg(e,r.dom,n).forall(t=>Lg(r,n).fold(()=>!1===Ed(t,n,r.dom),e=>!1===Ed(t,n,r.dom)&&Sr(e,re(t.container())))),Ig=(t,r,n)=>Lg(r,n).fold(()=>Dg(t,r.dom,n).forall(e=>!1===Ed(e,n,r.dom)),e=>Dg(t,e.dom,n).isNone()),Fg=N(Ig,!1),Ug=N(Ig,!0),zg=N(Mg,!1),jg=N(Mg,!0),Vg=e=>Ld(e).exists(oo),Hg=(e,t,r)=>{var n=T(Pg(re(r.container()),t),ro),n=Ae(n).getOr(t);return Jd(e,n.dom,r).filter(Vg)},qg=(e,t)=>Ld(t).exists(oo)||Hg(!0,e,t).isSome(),$g=(e,t)=>(e=>P.from(e.getNode(!0)).map(re))(t).exists(oo)||Hg(!1,e,t).isSome(),Wg=N(Hg,!1),Kg=N(Hg,!0),Gg=e=>B.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Yg=(e,t)=>{t=T(Pg(re(t.container()),e),ro);return Ae(t).getOr(e)},Xg=(e,t)=>Gg(t)?vg(t):vg(t)||nc(Yg(e,t).dom,t).exists(vg),Qg=(e,t)=>Gg(t)?hg(t):hg(t)||rc(Yg(e,t).dom,t).exists(hg),Jg=e=>Ld(e).bind(e=>Kn(e,Xt)).exists(e=>(e=>K(["pre","pre-wrap"],e))(Xr(e,"white-space"))),Zg=(e,t)=>!Jg(t)&&(Fg(e,t)||zg(e,t)||$g(e,t)||Xg(e,t)),ef=(e,t)=>!Jg(t)&&(Ug(e,t)||jg(e,t)||qg(e,t)||Qg(e,t)),tf=(e,t)=>Zg(e,t)||ef(e,(e=>{var t=e.container(),r=e.offset();return O(t)&&r<t.data.length?B(t,r+1):e})(t)),rf=(e,t)=>bc(e.charAt(t)),nf=e=>{e=e.container();return O(e)&&ot(e.data,go)},of=(e,t,r)=>{var n,o,a;0!==r&&(a=re(e),a=Wn(a,ro).getOr(a),n=e.data.slice(t,t+r),o=t+r>=e.data.length&&ef(a,B(e,e.data.length)),a=0===t&&Zg(a,B(e,0)),e.replaceData(t,r,qo(n,4,a,o)))},af=(e,t)=>{var r=e.data.slice(t),r=r.length-dt(r).length;of(e,t,r)},sf=(e,t)=>{var r=e.data.slice(0,t),r=r.length-ct(r).length;of(e,t-r,r)},lf=(e,t,r,n=!0)=>{const o=ct(e.data).length,a=n?e:t,i=n?t:e;return n?a.appendData(i.data):a.insertData(0,i.data),ne(re(i)),r&&af(a,o),a},df=(e,t)=>((e,t)=>{var r=e.container(),n=e.offset();return!1===B.isTextPosition(e)&&r===t.parentNode&&n>B.before(t).offset()})(t,e)?B(t.container(),t.offset()-1):t,cf=e=>{return Fo(e.previousSibling)?P.some((t=e.previousSibling,O(t)?B(t,t.data.length):B.after(t))):e.previousSibling?ac(e.previousSibling):P.none();var t},uf=e=>{return Fo(e.nextSibling)?P.some((t=e.nextSibling,O(t)?B(t,0):B.before(t))):e.nextSibling?oc(e.nextSibling):P.none();var t},mf=(r,e,t)=>((e,t)=>(r?(e,t)=>uf(t).orThunk(()=>cf(t)).orThunk(()=>((e,t)=>rc(e,B.after(t)).fold(()=>nc(e,B.before(t)),P.some))(e,t)):(n,o)=>cf(o).orThunk(()=>uf(o)).orThunk(()=>{var e=n,t=o,r=B.before(t.previousSibling||t.parentNode);return nc(e,r).fold(()=>rc(e,B.after(t)),P.some)}))(e,t))(e,t).map(N(df,t)),gf=(t,r,e)=>{e.fold(()=>{t.focus()},e=>{t.selection.setRng(e.toRange(),r)})},ff=(e,t)=>t&&Q(e.schema.getBlockElements(),ee(t)),pf=e=>{var t;return Go(e)?(t=yr('<br data-mce-bogus="1">'),sn(e),on(e,t),P.some(B.before(t.dom))):P.none()},hf=(t,r,e,n=!0)=>{const o=mf(r,t.getBody(),e.dom),a=Wn(e,N(ff,t),(i=t.getBody(),e=>e.dom===i));var i,s;const l=((e,t,o)=>{const r=Rr(e).filter(Qt),n=Tr(e).filter(Qt);return ne(e),e=r,a=n,i=t,s=(e,t,r)=>{var e=e.dom,t=t.dom,n=e.data.length;return lf(e,t,o),r.container()===t?B(e,n):r},(e.isSome()&&a.isSome()&&i.isSome()?P.some(s(e.getOrDie(),a.getOrDie(),i.getOrDie())):P.none()).orThunk(()=>(o&&(r.each(e=>sf(e.dom,e.dom.length)),n.each(e=>af(e.dom,0))),t));var a,i,s})(e,o,(s=t,e=e,Q(s.schema.getTextInlineElements(),ee(e))));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):a.bind(pf).fold(()=>{n&&gf(t,r,l)},e=>{n&&gf(t,r,P.some(e))})},vf=e=>Xa(e,"td,th"),bf=(e,t)=>({start:e,end:t}),yf=ds([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Cf=(e,t)=>Xn(re(e),"td,th",t),wf=e=>!S(e.start,e.end),xf=(e,r)=>du(e.start,r).bind(t=>du(e.end,r).bind(e=>Kt(S(t,e),t))),kf=e=>t=>xf(t,e).map(e=>({rng:t,table:e,cells:vf(e)})),Sf=(e,t,r,n)=>{if(r.collapsed||!e.forall(wf))return P.none();if(t.isSameTable){const t=e.bind(kf(n));return P.some({start:t,end:t})}{const e=Cf(r.startContainer,n),t=Cf(r.endContainer,n),i=e.bind((a=n,t=>du(t,a).bind(e=>Re(vf(e)).map(e=>bf(t,e))))).bind(kf(n)),s=t.bind((o=n,t=>du(t,o).bind(e=>Ae(vf(e)).map(e=>bf(e,t))))).bind(kf(n));return P.some({start:i,end:s})}var o,a},_f=(e,t)=>ye(e,e=>S(e,t)),Ef=r=>Wt(_f(r.cells,r.rng.start),_f(r.cells,r.rng.end),(e,t)=>r.cells.slice(e,t+1)),Nf=(e,t)=>{const{startTable:r,endTable:n}=t,o=e.cloneRange();return r.each(e=>o.setStartAfter(e.dom)),n.each(e=>o.setEndBefore(e.dom)),o},Af=e=>{var t;return(8===Gt(t=e)||"#comment"===ee(t)?Rr:Mr)(e).bind(Af).orThunk(()=>P.some(e))},Rf=e=>Y(e,e=>{ir(e,"contenteditable"),Tg(e)}),Tf=(e,t,r,n)=>{const o=r.cloneRange();n?(o.setStart(r.startContainer,r.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(r.endContainer,r.endOffset)),Df(e,o,t,!1).each(e=>e())},Of=e=>{const t=lu(e),r=re(e.selection.getNode());Fn(r.dom)&&Go(r)?e.selection.setCursorLocation(r.dom,0):e.selection.collapse(!0),1<t.length&&G(t,e=>S(e,r))&&tr(r,"data-mce-selected","1")},Bf=(l,d,t)=>P.some(()=>{const s=l.selection.getRng(),e=t.bind(({rng:e,isStartInTable:t})=>{n=l,i=t?e.endContainer:e.startContainer;const r=P.from(n.dom.getParent(i,n.dom.isBlock)).map(re);e.deleteContents(),o=l,a=t,r.filter(Go).each(e=>{a?ne(e):(Tg(e),o.selection.setCursorLocation(e.dom,0))});var n,o,a,i=t?d[0]:d[d.length-1];return Tf(l,i,s,t),Go(i)?P.none():P.some(t?d.slice(1):d.slice(0,-1))}).getOr(d);Rf(e),Of(l)}),Pf=(a,i,s,l)=>P.some(()=>{var e=a.selection.getRng(),t=i[0],r=s[s.length-1];Tf(a,t,e,!0),Tf(a,r,e,!1);const n=Go(t)?i:i.slice(1),o=Go(r)?s:s.slice(0,-1);Rf(n.concat(o)),l.deleteContents(),Of(a)}),Df=(n,o,a,i=!0)=>P.some(()=>{o.deleteContents();const e=Af(a).getOr(a),t=re(n.dom.getParent(e.dom,n.dom.isBlock));if(Go(t)&&(Tg(t),i&&n.selection.setCursorLocation(t.dom,0)),!S(a,t)){const n=$t(Ar(t),a)?[]:Ar(r=t).map(Pr).map(e=>T(e,e=>!S(r,e))).getOr([]);Y(n.concat(Pr(a)),e=>{S(e,t)||Sr(e,t)||!Go(e)||ne(e)})}var r}),Lf=(e,t)=>P.some(()=>hf(e,!1,t)),Mf=(e,t)=>be(Pg(t,e),co),If=(e,t)=>be(Pg(t,e),e=>Xt(e)&&"caption"===ee(e)),Ff=(e,t)=>P.some(()=>{Tg(t),e.selection.setCursorLocation(t.dom,0)}),Uf=(e,t)=>(e?Eg:Ng)(t),zf=(c,u,e)=>{const m=re(c.getBody());return If(m,e).fold(()=>((t,r,n,e)=>{const o=B.fromRangeStart(t.selection.getRng());return Mf(n,e).bind(e=>Go(e)?Ff(t,e):((e,t,r,n,o)=>Zd(r,e.getBody(),o).bind(e=>Mf(t,re(e.getNode())).bind(e=>S(e,n)?P.none():P.some($))))(t,n,r,e,o))})(c,u,m,e).orThunk(()=>Kt(((e,t)=>{var r=B.fromRangeStart(e.selection.getRng());return Uf(t,r)||Jd(t,e.getBody(),r).exists(e=>Uf(t,e))})(c,u),$)),e=>{var t,r,n,o,a,i=c,s=u,l=m,d=B.fromRangeStart(i.selection.getRng());return Go(e)?Ff(i,e):(t=i,r=l,n=s,o=e,a=d,Zd(n,t.getBody(),a).fold(()=>P.some($),e=>((e,r,n,o)=>oc(e.dom).bind(t=>ac(e.dom).map(e=>r?n.isEqual(t)&&o.isEqual(e):n.isEqual(e)&&o.isEqual(t))).getOr(!0))(o,n,a,e)?((e,t)=>Ff(e,t))(t,o):((e,t,r)=>If(e,re(r.getNode())).fold(()=>P.some($),e=>Kt(!S(e,t),$)))(r,o,e)))})},jf=(e,t)=>{var r,n,o,a,i=re(e.selection.getStart(!0)),s=lu(e);return e.selection.isCollapsed()&&0===s.length?zf(e,t,i):(t=e,e=i,i=s,s=re(t.getBody()),a=t.selection.getRng(),0!==i.length?Bf(t,i,P.none()):(r=t,n=s,o=a,i=e,If(n,i).fold(()=>(t=>((e,t)=>{a=e;const r=e=>S(a,e),n=(e=t,u=r,l=Cf(e.startContainer,u),e=Cf(e.endContainer,u),Wt(l,e,bf)),o=((e,t)=>{const r=e=>du(re(e),t),n=r(e.startContainer),o=r(e.endContainer),a=n.isSome(),i=o.isSome(),s=Wt(n,o,S).getOr(!1);return{startTable:n,endTable:o,isStartInTable:a,isEndInTable:i,isSameTable:s,isMultiTable:!s&&a&&i}})(t,r);var a,i,s,l,d,c,u,m,g;return u=n,m=t,g=r,u.exists(e=>((e,t)=>!wf(e)&&xf(e,t).exists(e=>{e=e.dom.rows;return 1===e.length&&1===e[0].cells.length}))(e,g)&&mu(e.start,m))?n.map(e=>yf.singleCellTable(t,e.start)):o.isMultiTable?(l=n,d=o,c=t,e=r,Sf(l,d,c,e).bind(({start:e,end:t})=>{var r=e.bind(Ef).getOr([]),t=t.bind(Ef).getOr([]);if(0<r.length&&0<t.length){const e=Nf(c,d);return P.some(yf.multiTable(r,t,e))}return P.none()})):(u=n,i=o,s=t,l=r,Sf(u,i,s,l).bind(({start:e,end:t})=>e.or(t)).bind(e=>{var t=i["isSameTable"],r=Ef(e).getOr([]);if(t&&e.cells.length===r.length)return P.some(yf.fullTable(e.table));if(0<r.length){if(t)return P.some(yf.partialTable(r,P.none()));{const e=Nf(s,i);return P.some(yf.partialTable(r,P.some({...i,rng:e})))}}return P.none()}))})(n,o).bind(e=>e.fold(N(Df,t),N(Lf,t),N(Bf,t),N(Pf,t))))(r),e=>((e,t)=>Ff(e,t))(r,e))))},Vf=(e,t)=>{for(;t&&t!==e;){if(In(t)||_(t))return t;t=t.parentNode}return null},Hf=(e,t)=>{t(e),e.firstChild&&Hf(e.firstChild,t),e.next&&Hf(e.next,t)},qf=(r,n,o,a)=>{const i=o.name;for(let e=0,t=r.length;e<t;e++){var s=r[e];if(s.name===i){const r=a.nodes[i];r?r.nodes.push(o):a.nodes[i]={filter:s,nodes:[o]}}}if(o.attributes)for(let e=0,t=n.length;e<t;e++){const i=n[e],l=i.name;if(l in o.attributes.map){const r=a.attributes[l];r?r.nodes.push(o):a.attributes[l]={filter:i,nodes:[o]}}}},$f=(e,n)=>{var t=e=>{X(e,t=>{const r=T(t.nodes,e=>H(e.parent));Y(t.filter.callbacks,e=>{e(r,t.filter.name,n)})})};t(e.nodes),t(e.attributes)},Wf=(e,t,r,n={})=>{e=((t,r,e)=>{const n={nodes:{},attributes:{}};return e.firstChild&&Hf(e.firstChild,e=>{qf(t,r,e,n)}),n})(e,t,r);$f(e,n)},Kf=(e,t,r,n)=>{t.insert&&r[n.name]?n.empty().append(new ng("br",1)):n.empty().append(new ng("#text",3)).value=go},Gf=(e,t)=>e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t,Yf=(t,e,r,n)=>n.isEmpty(e,r,e=>{e=t.getElementRule(e.name);return e&&e.paddEmpty}),Xf=(e,t,r=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{var n=e.children();for(const e of n)t.isValidChild(r.name,e.name)||Xf(e,t,r);e.unwrap()}},Qf=(o,a,i=$)=>{const s=a.getTextBlockElements(),l=a.getNonEmptyElements(),d=a.getWhitespaceElements(),c=Z.makeMap("tr,td,th,tbody,thead,tfoot,table"),u=new Set;for(let e=0;e<o.length;e++){const m=o[e];let t,r,n;if(m.parent&&!u.has(m))if(s[m.name]&&"li"===m.parent.name){let e=m.next;for(;e&&s[e.name];)e.name="li",u.add(e),m.parent.insert(e,m.parent),e=e.next;m.unwrap()}else{const g=[m];for(t=m.parent;t&&!a.isValidChild(t.name,m.name)&&!c[t.name];t=t.parent)g.push(t);if(t&&1<g.length)if(a.isValidChild(t.name,m.name)){g.reverse(),i(r=g[0].clone());let e=r;for(let t=0;t<g.length-1;t++){a.isValidChild(e.name,g[t].name)?(i(n=g[t].clone()),e.append(n)):n=e;for(let e=g[t].firstChild;e&&e!==g[t+1];){const a=e.next;n.append(e),e=a}e=n}Yf(a,l,d,r)?t.insert(m,g[0],!0):(t.insert(r,g[0],!0),t.insert(m,r)),t=g[0],(Yf(a,l,d,t)||Gf(t,"br"))&&t.empty().remove()}else Xf(m,a);else if(m.parent)if("li"===m.name){let e=m.prev;if(e&&("ul"===e.name||"ol"===e.name)){e.append(m);continue}if((e=m.next)&&("ul"===e.name||"ol"===e.name)){e.insert(m,e.firstChild,!0);continue}const a=new ng("ul",1);i(a),m.wrap(a)}else if(a.isValidChild(m.parent.name,"div")&&a.isValidChild("div",m.name)){const o=new ng("div",1);i(o),m.wrap(o)}else Xf(m,a)}}},Jf=e=>{if(e.collapsed)return e;{var a=e;const i=B.fromRangeStart(a),s=B.fromRangeEnd(a),l=a.commonAncestorContainer;return Jd(!1,l,s).map(e=>{if(Ed(i,s,l)||!Ed(i,e,l))return a;{var t=i.container(),r=i.offset(),n=e.container(),e=e.offset();const o=document.createRange();return o.setStart(t,r),o.setEnd(n,e),o}}).getOr(a)}},Zf=(e,t)=>{t=e.getParent(t,e.isBlock);return t&&"LI"===t.nodeName?t:null},ep=(e,t)=>{const r=B.after(e),n=Gd(t).prev(r);return n?n.toRange():null},tp=(o,a,i,s)=>{const e=(e=>{var t=o.serialize(s);{const r=(e=e.createFragment(t)).firstChild,n=e.lastChild;return r&&"META"===r.nodeName&&r.parentNode.removeChild(r),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e}})(a),l=Zf(a,i.startContainer),t=(n=e.firstChild,0<(n=T(n.childNodes,e=>"LI"===e.nodeName)).length&&(!(r=n[n.length-1]).firstChild||r&&r.firstChild&&r.firstChild===r.lastChild&&((r=r.firstChild).data===go||x(r)))?n.slice(0,-1):n);var r=a.getRoot(),n=e=>{const t=B.fromRangeStart(i),r=Gd(a.getRoot()),n=1===e?r.prev(t):r.next(t);return!n||Zf(a,n.getNode())!==l};if(n(1)){var d=l,c=t,u=r;const f=d.parentNode;Z.each(c,e=>{f.insertBefore(e,d)});{c=d;const p=B.before(c),h=Gd(u).next(p);return h?h.toRange():null}}if(n(2))return c=l,u=t,n=r,a.insertAfter(u.reverse(),c),ep(u[0],n);{var m=l,n=t,g=r;const v=((e,t)=>{const r=t.cloneRange(),n=t.cloneRange();return r.setStartBefore(e),n.setEndAfter(e),[r.cloneContents(),n.cloneContents()]})(m,i),b=m.parentNode;return b.insertBefore(v[0],m),Z.each(n,e=>{b.insertBefore(e,m)}),b.insertBefore(v[1],m),b.removeChild(m),ep(n[n.length-1],g)}},rp=Fn,np=(t,e,r)=>{let n,o,a;const i=t.selection,s=t.dom,l=t.parser,d=r.merge,c=ug({validate:!0},t.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',m=(-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,u),(o=i.getRng()).startContainer||(o.parentElement?o.parentElement():null)),g=t.getBody();if(m===g&&i.isCollapsed()&&s.isBlock(g.firstChild)&&(f=t,(p=g.firstChild)&&!f.schema.getVoidElements()[p.nodeName])&&s.isEmpty(g.firstChild)&&((o=s.createRng()).setStart(g.firstChild,0),o.setEnd(g.firstChild,0),i.setRng(o)),!i.isCollapsed()){const _=(f=t).dom,E=Jf(f.selection.getRng());f.selection.setRng(E),p=_.getParent(E.startContainer,rp),h=_,b=E,null!==(v=p)&&v===h.getParent(b.endContainer,rp)&&mu(re(v),b)?Df(f,E,re(p)):f.getDoc().execCommand("Delete",!1,null)}var f,p,h,v,b,y,C;const w={context:(n=i.getNode()).nodeName.toLowerCase(),data:r.data,insert:!0},x=l.parse(e,w);if(!0===r.paste&&((e,t)=>{let r=t.firstChild,n=t.lastChild;return r&&"meta"===r.name&&(r=r.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),t=e,e=n,o=t.getNonEmptyElements(),e&&(e.isEmpty(o)||(o=e,t.getBlockElements()[o.name]&&o.firstChild&&o.firstChild===o.lastChild&&(e=>"br"===e.name||e.value===go)(o.firstChild)))&&(n=n.prev),!(!r||r!==n||"ul"!==r.name&&"ol"!==r.name);var o})(t.schema,x)&&(h=s,v=n,!!Zf(h,v)))return o=tp(c,s,i.getRng(),x),i.setRng(o),e;{let e=x;for(;e=e.walk();)1===e.type&&e.attr("data-mce-fragment","1")}if("mce_marker"===(a=x.lastChild).attr("id")){const e=a;for(a=a.prev;a;a=a.walk(!0))if(3===a.type||!s.isBlock(a.name)){t.schema.isValidChild(a.parent.name,"span")&&a.parent.insert(e,a,"br"===a.name);break}}if(t._selectionOverrides.showBlockCaretContainer(n),w.invalid){t.selection.setContent(u),n=i.getNode();const r=t.getBody();for(9===n.nodeType?n=a=r:a=n;a!==r;)a=(n=a).parentNode;e=n===r?r.innerHTML:s.getOuterHTML(n);const o=l.parse(e);for(let e=o;e;e=e.walk())if("mce_marker"===e.attr("id")){e.replace(x);break}const d=x.children(),m=x.parent.name,g=(x.unwrap(),T(d,e=>!t.schema.isValidChild(m,e.name)));Qf(g,t.schema),Wf(l.getNodeFilters(),l.getAttributeFilters(),o),e=c.serialize(o),n===r?s.setHTML(r,e):s.setOuterHTML(n,e)}else e=c.serialize(x),b=t,r=e,"all"===(C=n).getAttribute("data-mce-bogus")?C.parentNode.insertBefore(b.dom.createFragment(r),C):(y=C.firstChild,k=C.lastChild,!y||y===k&&"BR"===y.nodeName?b.dom.setHTML(C,r):b.selection.setContent(r,{no_events:!0}));{var k=t,S=d;const N=k.schema.getTextInlineElements(),A=k.dom;if(S){const S=k.getBody(),R=lg(A);Z.each(A.select("*[data-mce-fragment]"),t=>{if(H(N[t.nodeName.toLowerCase()])&&(e=A,r=t,xe(fg(e,r),e=>!(e=>mg.has(e))(e))))for(let e=t.parentNode;H(e)&&e!==S&&!((r,n,o)=>{const e=fg(r,n),a=fg(r,o),i=e=>{var t=null!=(t=r.getStyle(n,e))?t:"",e=null!=(e=r.getStyle(o,e))?e:"";return ut(t)&&ut(e)&&t!==e};return G(e,t=>{var e=e=>G(e,e=>e===t);if(e(a)||!e(gg))return i(t);{const t=T(a,t=>G(gg,e=>at(t,e)));return G(t,i)}})})(A,t,e);e=e.parentNode)if(R.compare(e,t)){A.remove(t,!0);break}var e,r})}}return((r,t)=>{let n;const o=r.dom,a=r.selection;if(t){a.scrollIntoView(t);var i=Vf(r.getBody(),t);if("false"===o.getContentEditable(i))return o.remove(t),a.select(i);let e=o.createRng();const s=t.previousSibling;if(O(s)){e.setStart(s,s.nodeValue.length);const r=t.nextSibling;O(r)&&(s.appendData(r.data),r.parentNode.removeChild(r))}else e.setStartBefore(t),e.setEndBefore(t);i=o.getParent(t,o.isBlock);o.remove(t),i&&o.isEmpty(i)&&(sn(re(i)),e.setStart(i,0),e.setEnd(i,0),rp(i)||i.getAttribute("data-mce-fragment")||!(n=(e=>{let t=B.fromRangeStart(e);if(t=Gd(r.getBody()).next(t))return t.toRange()})(e))?o.add(i,o.create("br",{"data-mce-bogus":"1"})):(e=n,o.remove(i))),a.setRng(e)}})(t,s.get("mce_marker")),y=t.getBody(),Z.each(y.getElementsByTagName("*"),e=>{e.removeAttribute("data-mce-fragment")}),C=s,r=i.getStart(),P.from(C.getParent(r,"td,th")).map(re).each(Og),e},op=e=>e instanceof ng,ap=(e,t,r)=>{var n;e.dom.setHTML(e.getBody(),t),!0!==r&&(n=e,Vm(n)&&oc(n.getBody()).each(e=>{const t=e.getNode(),r=An(t)?oc(t).getOr(e):e;n.selection.setRng(r.toRange())}))},ip=(e,t)=>((t,r)=>{var e=t.dom;return e.parentNode?(e=re(e.parentNode),be(e.dom.childNodes,e=>(e=>!S(t,e)&&r(e))(re(e))).map(re)):P.none()})(e,t).isSome(),sp=e=>q(e)?e:A,lp=(a,i,e)=>{const t=i(a),s=sp(e);return t.orThunk(()=>{if(s(a))return P.none();{var t=a,r=i,n=s;let e=t.dom;const o=sp(n);for(;e.parentNode;){e=e.parentNode;const t=re(e),n=r(t);if(n.isSome())return n;if(o(t))break}return P.none()}})},dp=Lc,cp=(t,r,e)=>{var n=t.formatter.get(e);if(n)for(let e=0;e<n.length;e++){var o=n[e];if(jc(o)&&!1===o.inherit&&t.dom.is(r,o.selector))return!0}return!1},up=(t,e,r,n,o)=>{const a=t.dom.getRoot();return e!==a&&(e=t.dom.getParent(e,e=>!!cp(t,e,r)||e.parentNode===a||!!fp(t,e,r,n,!0)),!!fp(t,e,r,n,o))},mp=(e,t,r)=>!(!Vc(r)||!dp(t,r.inline))||!(!zc(r)||!dp(t,r.block))||!!jc(r)&&oe(t)&&e.is(t,r.selector),gp=(t,r,e,n,o,a)=>{var i=e[n];if(q(e.onmatch))return e.onmatch(r,e,n);if(i)if(D(i.length)){for(const c in i)if(Q(i,c)){var s="attributes"===n?t.getAttrib(r,c):Ic(t,r,c),l=Dc(i[c],a),d=de(s)||mt(s);if(d&&de(l))continue;if(o&&d&&!e.exact)return!1;if((!o||e.exact)&&!dp(s,Mc(l,c)))return!1}}else for(let e=0;e<i.length;e++)if("attributes"===n?t.getAttrib(r,i[e]):Ic(t,r,i[e]))return!0;return!0},fp=(t,r,n,o,a)=>{var i=t.formatter.get(n),s=t.dom;if(i&&r)for(let e=0;e<i.length;e++){var l=i[e];if(mp(t.dom,r,l)&&gp(s,r,l,"attributes",a,o)&&gp(s,r,l,"styles",a,o)){const n=l.classes;if(n)for(let e=0;e<n.length;e++)if(!t.dom.hasClass(r,Dc(n[e],o)))return;return l}}},pp=(e,t,r,n,o)=>{if(n)return up(e,n,t,r,o);if(n=e.selection.getNode(),up(e,n,t,r,o))return!0;var a=e.selection.getStart();return!(a===n||!up(e,a,t,r,o))},hp=po,vp="_mce_caret",bp=e=>0<(e=>{const t=[];for(;e;){if(3===e.nodeType&&e.nodeValue!==hp||1<e.childNodes.length)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t})(e).length,yp=e=>{if(e){const t=new Zn(e,e);for(e=t.current();e;e=t.next())if(O(e))return e}return null},Cp=e=>{var t=te("span");return rr(t,{id:vp,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&on(t,Cr(hp)),t},wp=(e,t,r=!0)=>{const n=e.dom,o=e.selection;if(bp(t))hf(e,!1,re(t),r);else{const e=o.getRng(),r=n.getParent(t,n.isBlock),a=e.startContainer,i=e.startOffset,s=e.endContainer,l=e.endOffset,d=(e=>{const t=yp(e);return t&&t.nodeValue.charAt(0)===hp&&t.deleteData(0,1),t})(t);n.remove(t,!0),a===d&&0<i&&e.setStart(d,i-1),s===d&&0<l&&e.setEnd(d,l-1),r&&n.isEmpty(r)&&Tg(re(r)),o.setRng(e)}},xp=(e,t,r=!0)=>{const n=e.dom,o=e.selection;if(t)wp(e,t,r);else if(!(t=lc(e.getBody(),o.getStart())))for(;t=n.get(vp);)wp(e,t,!1)},kp=(e,t)=>(e.appendChild(t),t),Sp=(e,t)=>{const r=pe(e,(e,t)=>kp(e,t.cloneNode(!1)),t);return kp(r,r.ownerDocument.createTextNode(hp))},_p=(e,t,r,n)=>{const o=e.dom,a=e.selection;let i,s,l;const d=[],c=a.getRng(),u=c.startContainer,m=c.startOffset;for(3===(s=u).nodeType&&(m!==u.nodeValue.length&&(i=!0),s=s.parentNode);s;){if(fp(e,s,t,r,n)){l=s;break}s.nextSibling&&(i=!0),d.push(s),s=s.parentNode}if(l)if(i){const w=a.getBookmark();c.collapse(!0);var g=ou(e,c,e.formatter.get(t),!0),g=rm(g);e.formatter.remove(t,r,g,n),a.moveToBookmark(w)}else{const i=lc(e.getBody(),l),s=Cp(!1).dom;{g=e;var f=s;var p=null!==i?i:l;const b=g.dom,y=b.getParent(p,N(Oc,g));var h,v;y&&b.isEmpty(y)?p.parentNode.replaceChild(f,p):(h=re(p),g=Xa(h,"br"),v=T((()=>{const e=[];let t=h.dom;for(;t;)e.push(re(t)),t=t.lastChild;return e})().slice(-1),oo),g.length===v.length&&Y(v,ne),b.isEmpty(p)?p.parentNode.replaceChild(f,p):b.insertAfter(f,p))}const c=((a,e,t,i,r,n)=>{const o=a.formatter,s=a.dom,l=T(Be(o.get()),e=>e!==i&&!ot(e,"removeformat")),d=(c=a,u=t,m=l,he(m,(e,t)=>{n=c,r=t;var r,n=G(n.formatter.get(r),t=>{const r=e=>1<e.length&&"%"===e.charAt(0);return G(["styles","attributes"],e=>R(t,e).exists(e=>{e=le(e)?e:je(e);return G(e,r)}))});return c.formatter.matchNode(u,t,{},n)?e.concat([t]):e},[]));var c,u,m;if(0<T(d,e=>{{var t=a,n=i;const r=["inline","block","selector","attributes","styles","classes"],o=e=>Ue(e,(e,t)=>G(r,e=>e===t));return!G(t.formatter.get(e),e=>{const r=o(e);return G(t.formatter.get(n),e=>{var t,e=o(e);return t=r,w(k).eq(t,e)})})}}).length){const a=t.cloneNode(!1);return s.add(e,a),o.remove(i,r,a,n),s.remove(a),P.some(a)}return P.none()})(e,s,l,t,r,n),u=Sp(d.concat(c.toArray()),s);wp(e,i,!1),a.setCursorLocation(u,1),o.isEmpty(l)&&o.remove(l)}},Ep=(e,t)=>{e=e.schema.getTextInlineElements();return Q(e,ee(t))&&!sc(t.dom)&&!Nn(t.dom)},Np={},Ap=Ke,Rp=$e,Tp=(Np.pre||(Np.pre=[]),Np.pre.push(e=>{var t=e.selection.getRng();let r;const n=Sn(["pre"]);t.collapsed||(r=e.selection.getSelectedBlocks(),Rp(Ap(Ap(r,n),e=>n(e.previousSibling)&&-1!==Ge(r,e.previousSibling)),e=>{var t,r;t=e.previousSibling,e=e,e=re(e),r=Er(e).dom,ne(e),an(re(t),[te("br",r),te("br",r),...Pr(e)])}))}),Z.each),Op=e=>oe(e)&&!vc(e)&&!sc(e)&&!Nn(e),Bp=(t,r)=>{for(let e=t;e;e=e[r]){if(O(e)&&ut(e.data))return t;if(oe(e)&&!vc(e))return e}return t},Pp=(e,t,r)=>{const n=lg(e);if(t&&r&&(t=Bp(t,"previousSibling"),r=Bp(r,"nextSibling"),n.compare(t,r))){for(let e=t.nextSibling;e&&e!==r;){const r=e;e=e.nextSibling,t.appendChild(r)}return e.remove(r),Z.each(Z.grep(r.childNodes),e=>{t.appendChild(e)}),t}return r},Dp=(e,t,r,n)=>{if(n&&!1!==t.merge_siblings){const t=Pp(e,Tc(n),n);Pp(e,t,Tc(t,!0))}},Lp=(e,t,r)=>{Tp(e.childNodes,e=>{Op(e)&&(t(e)&&r(e),e.hasChildNodes()&&Lp(e,t,r))})},Mp=(t,r)=>e=>!(!e||!Ic(t,e,r)),Ip=(r,n,o)=>e=>{var t;r.setStyle(e,n,o),""===e.getAttribute("style")&&e.removeAttribute("style"),t=r,"SPAN"===(e=e).nodeName&&0===t.getAttribs(e).length&&t.remove(e,!0)},Fp=ds([{keep:[]},{rename:["name"]},{removed:[]}]),Up=/^(src|href|style)$/,zp=Z.each,jp=Lc,Vp=(e,t,r)=>e.isChildOf(t,r)&&t!==r&&!e.isBlock(r),Hp=(e,t,r)=>{let n=t[r?"startContainer":"endContainer"],o=t[r?"startOffset":"endOffset"];if(oe(n)){const e=n.childNodes.length-1;!r&&o&&o--,n=n.childNodes[o>e?e:o]}return O(n)&&r&&o>=n.nodeValue.length&&(n=new Zn(n,e.getBody()).next()||n),n=O(n)&&!r&&0===o?new Zn(n,e.getBody()).prev()||n:n},qp=(e,t)=>{var r=t?"firstChild":"lastChild";if(/^(TR|TH|TD)$/.test(e.nodeName)&&e[r]){const t=e[r];return"TR"===e.nodeName&&t[r]||t}return e},$p=(e,t,r,n)=>{const o=e.create(r,n);return t.parentNode.insertBefore(o,t),o.appendChild(t),o},Wp=(e,t,r,n,o)=>{t=re(t),e=re(e.create(n,o)),n=(r?Br:Or)(t);return an(e,n),r?(tn(t,e),nn(e,t)):(rn(t,e),on(e,t)),e.dom},Kp=(r,n,o,e,a)=>{let i;const s=r.dom;if(!(mp(s,e,n)||n.links&&"A"===e.nodeName))return Fp.keep();const l=e;if(Vc(n)&&"all"===n.remove&&le(n.preserve_attributes)){const r=T(s.getAttribs(l),e=>K(n.preserve_attributes,e.name.toLowerCase()));if(s.removeAllAttribs(l),Y(r,e=>s.setAttrib(l,e.name,e.value)),0<r.length)return Fp.rename("span")}if("all"!==n.remove){zp(n.styles,(e,t)=>{e=Mc(Dc(e,o),t+""),ce(t)&&(t=e,a=null),!n.remove_similar&&a&&!jp(Ic(s,a,t),e)||s.setStyle(l,t,""),i=!0}),i&&""===s.getAttrib(l,"style")&&(l.removeAttribute("style"),l.removeAttribute("data-mce-style")),zp(n.attributes,(e,t)=>{let r;if(e=Dc(e,o),ce(t)&&(t=e,a=null),n.remove_similar||!a||jp(s.getAttrib(a,t),e)){if("class"!==t||!(e=s.getAttrib(l,t))||(r="",Y(e.split(/\s+/),e=>{/mce\-\w+/.test(e)&&(r+=(r?" ":"")+e)}),!r))return Up.test(t)&&l.removeAttribute("data-mce-"+t),"style"===t&&Sn(["li"])(l)&&"none"===s.getStyle(l,"list-style-type")?(l.removeAttribute(t),void s.setStyle(l,"list-style-type","none")):("class"===t&&l.removeAttribute("className"),void l.removeAttribute(t));s.setAttrib(l,t,r)}}),zp(n.classes,e=>{e=Dc(e,o),a&&!s.hasClass(a,e)||s.removeClass(l,e)});const r=s.getAttribs(l);for(let e=0;e<r.length;e++){const o=r[e].nodeName;if(0!==o.indexOf("_")&&0!==o.indexOf("data-"))return Fp.keep()}}{if("none"===n.remove)return Fp.keep();{var d=r,c=(e=l,r=n,e.parentNode);let t;const u=d.dom,m=Ns(d);!zc(r)||c!==u.getRoot()||r.list_block&&jp(e,r.list_block)||Y(Te(e.childNodes),e=>{Bc(d,m,e.nodeName.toLowerCase())?t?t.appendChild(e):(t=$p(u,e,m),u.setAttribs(t,As(d))):t=null}),c=r,jc(c)&&Vc(c)&&$t(R(c,"mixed"),!0)&&!jp(r.inline,e)||u.remove(e,!0)}return Fp.removed()}},Gp=(t,e,r,n,o)=>Kp(t,e,r,n,o).fold(A,e=>(t.dom.rename(n,e),!0),y),Yp=(m,t,g,r,n)=>{const f=m.formatter.get(t),p=f[0];let o=!0;const a=m.dom,e=m.selection,i=e=>{var o=((r,e,n,o,a)=>{let i;return Y(Uc(r.dom,e.parentNode).reverse(),e=>{var t;i||"_start"===e.id||"_end"===e.id||(t=fp(r,e,n,o,a))&&!1!==t.split&&(i=e)}),i})(m,e,t,g,n);{var a=m,i=f,s=e,l=p,d=g;let t,r,n;const c=a.dom;if(o){const u=o.parentNode;for(let e=s.parentNode;e&&e!==u;e=e.parentNode){t=c.clone(e,!1);for(let e=0;e<i.length&&null!==(t=((t,e,r,n)=>Kp(t,e,r,n,n).fold(W(n),e=>(t.dom.createFragment().appendChild(n),t.dom.rename(n,e)),W(null)))(a,i[e],d,t));e++);t&&(r&&t.appendChild(r),n=n||t,r=t)}l.mixed&&c.isBlock(o)||(s=c.split(o,s)),r&&(e.parentNode.insertBefore(r,e),n.appendChild(e),Vc(l)&&Dp(c,l,0,r))}return s}},s=t=>G(f,e=>Gp(m,e,g,t,t)),l=t=>{let e=!0,r=!1;oe(t)&&a.getContentEditable(t)&&(e=o,o="true"===a.getContentEditable(t),r=!0);var n=Te(t.childNodes);if(o&&!r){const m=s(t)||G(f,e=>mp(a,t,e)),e=t.parentNode;!m&&H(e)&&Hc(p)&&s(e)}if(p.deep&&n.length){for(let e=0;e<n.length;e++)l(n[e]);r&&(o=e)}Y(["underline","line-through","overline"],e=>{oe(t)&&m.dom.getStyle(t,"text-decoration")===e&&t.parentNode&&Fc(a,t.parentNode)===e&&Gp(m,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:e}},null,t)})},d=e=>{var t,r=a.get(e?"_start":"_end");let n=r[e?"firstChild":"lastChild"];return t=n,vc(t)&&oe(t)&&("_start"===t.id||"_end"===t.id)&&(n=n[e?"firstChild":"lastChild"]),O(n)&&0===n.data.length&&(n=e?r.previousSibling||r.nextSibling:r.nextSibling||r.previousSibling),a.remove(r,!0),n},c=e=>{let t,r,n=ou(m,e,f,e.collapsed);if(p.split){if(n=rm(n),t=Hp(m,n,!0),r=Hp(m,n),t!==r){if(t=qp(t,!0),r=qp(r,!1),Vp(a,t,r)){const m=P.from(t.firstChild).getOr(t);return i(Wp(a,m,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void d(!0)}if(Vp(a,r,t)){const m=P.from(r.lastChild).getOr(r);return i(Wp(a,m,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void d(!1)}t=$p(a,t,"span",{id:"_start","data-mce-type":"bookmark"}),r=$p(a,r,"span",{id:"_end","data-mce-type":"bookmark"});const m=a.createRng();m.setStartAfter(t),m.setEndBefore(r),au(a,m,e=>{Y(e,e=>{vc(e)||vc(e.parentNode)||i(e)})}),i(t),i(r),t=d(!0),r=d()}else t=r=i(t);n.startContainer=t.parentNode||t,n.startOffset=a.nodeIndex(t),n.endContainer=r.parentNode||r,n.endOffset=a.nodeIndex(r)+1}au(a,n,e=>{Y(e,l)})};if(r){if(Ac(r)){const m=a.createRng();m.setStartBefore(r),m.setEndAfter(r),c(m)}else c(r);Nu(m,t,r,g)}else if("false"!==a.getContentEditable(e.getNode()))e.isCollapsed()&&Vc(p)&&!lu(m).length?_p(m,t,g,n):(hu(e,!0,()=>{pu(m,c)}),Vc(p)&&pp(m,t,g,e.getStart())&&Rc(a,e,e.getRng()),m.nodeChanged()),Nu(m,t,r,g);else{r=e.getNode();for(let e=0;e<f.length&&(!f[e].ceFalseOverride||!Gp(m,f[e],g,r,r));e++);Nu(m,t,r,g)}},Xp=Z.each,Qp=Z.each,Jp=e=>oe(e)&&!vc(e)&&!sc(e)&&!Nn(e),Zp=(h,v,b,n)=>{const y=h.formatter.get(v),C=y[0],o=!n&&h.selection.isCollapsed(),a=h.dom,e=h.selection,w=(r,e=C)=>{if(q(e.onformat)&&e.onformat(r,e,b,n),Qp(e.styles,(e,t)=>{a.setStyle(r,t,Dc(e,b))}),e.styles){const e=a.getAttrib(r,"style");e&&a.setAttrib(r,"data-mce-style",e)}Qp(e.attributes,(e,t)=>{a.setAttrib(r,t,Dc(e,b))}),Qp(e.classes,e=>{e=Dc(e,b),a.hasClass(r,e)||a.addClass(r,e)})},m=(e,t)=>{let r=!1;return Qp(e,e=>!!jc(e)&&((!H(e.collapsed)||e.collapsed===o)&&a.is(t,e.selector)&&!sc(t)?(w(t,e),!(r=!0)):void 0)),r},r=(f,e,l)=>{const p=[];let d=!0;const c=C.inline||C.block,u=(t=c,V(t)?(t=a.create(t),w(t),t):null);var t;au(f,e,e=>{let i;const s=t=>{let e=!1,r=d;const n=t.nodeName.toLowerCase(),o=t.parentNode,a=o.nodeName.toLowerCase();if(oe(t)&&f.getContentEditable(t)&&(r=d,d="true"===f.getContentEditable(t),e=!0),x(t)&&!((e,t,r,n)=>{if(ul(e)&&Vc(t)){const t={...e.schema.getTextBlockElements(),td:{},th:{},li:{},dt:{},dd:{},figcaption:{},caption:{},details:{},summary:{}},o=ip(re(r),e=>sc(e.dom));return Ve(t,n)&&Go(re(r.parentNode),!1)&&!o}return!1})(h,C,t,a))return i=null,void(zc(C)&&f.remove(t));if(zc(C)&&C.wrapper&&fp(h,t,v,b))i=null;else{if(d&&!e&&zc(C)&&!C.wrapper&&Oc(h,n)&&Bc(h,a,c)){const h=f.rename(t,c);return w(h),p.push(h),void(i=null)}if(jc(C)){let e=m(y,t);if(!e&&H(o)&&Hc(C)&&(e=m(y,o)),!Vc(C)||e)return void(i=null)}!d||e||!Bc(h,c,n)||!Bc(h,a,c)||!l&&O(t)&&ho(t.data)||sc(t)||Vc(C)&&f.isBlock(t)?(i=null,Y(Te(t.childNodes),s),e&&(d=r),i=null):(i||(i=f.clone(u,!1),t.parentNode.insertBefore(i,t),p.push(i)),i.appendChild(t))}};Y(e,s)}),!0===C.links&&Y(p,e=>{const t=e=>{"A"===e.nodeName&&w(e,C),Y(Te(e.childNodes),t)};t(e)}),Y(p,e=>{var r,t,n,o,a,i,s,l,d,c,u,m,g=(e=>{let r=0;return Y(e.childNodes,e=>{var t;t=e,H(t)&&O(t)&&0===t.length||vc(e)||r++}),r})(e);!(1<p.length)&&f.isBlock(e)||0!==g?(Vc(C)||zc(C)&&C.wrapper)&&(C.exact||1!==g||(e=(r=>{const e=be(r.childNodes,Jp).filter(e=>mp(f,e,C));return e.map(e=>{var t=f.clone(e,!1);return w(t),f.replace(t,r,!0),f.remove(e,!0),t}).getOr(r)})(e)),c=h,g=y,u=b,m=e,Xp(g,t=>{var n,e,r,o;Vc(t)&&Xp(c.dom.select(t.inline,m),e=>{Op(e)&&Gp(c,t,u,e,t.exact?e:null)}),n=c.dom,r=m,(e=t).clear_child_styles&&(o=e.links?"*:not(a)":"*",Tp(n.select(o,r),r=>{Op(r)&&Tp(e.styles,(e,t)=>{n.setStyle(r,t,"")})}))}),a=h,i=C,s=v,l=b,d=e,fp(a,d.parentNode,s,l)&&Gp(a,i,l,d)||i.merge_with_parents&&a.dom.getParent(d.parentNode,e=>{if(fp(a,e,s,l))return Gp(a,i,l,d),!0}),g=f,t=C,n=b,o=e,t.styles&&t.styles.backgroundColor&&Lp(o,Mp(g,"fontSize"),Ip(g,"backgroundColor",Dc(t.styles.backgroundColor,n))),r=f,o=C,g=e,t=e=>{var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=Fc(r,e.parentNode),r.getStyle(e,"color")&&t?r.setStyle(e,"text-decoration",t):r.getStyle(e,"text-decoration")===t&&r.setStyle(e,"text-decoration",null))},o.styles&&(o.styles.color||o.styles.textDecoration)&&(Z.walk(g,t,"childNodes"),t(g)),n=f,o=C,t=e,!Vc(o)||"sub"!==o.inline&&"sup"!==o.inline||(Lp(t,Mp(n,"fontSize"),Ip(n,"fontSize","")),n.remove(n.select("sup"===o.inline?"sub":"sup",t),!0)),Dp(f,C,0,e)):f.remove(e,!0)})};if("false"!==a.getContentEditable(e.getNode())){if(C){if(n)if(Ac(n)){if(!m(y,n)){const v=a.createRng();v.setStartBefore(n),v.setEndAfter(n),r(a,ou(h,v,y),!0)}}else r(a,n,!0);else if(o&&Vc(C)&&!lu(h).length){var i=h;var s=v;var l=b;let e,t;const u=i.selection,g=u.getRng();let r=g.startOffset;const f=g.startContainer.nodeValue,p=((e=lc(i.getBody(),u.getStart()))&&(t=yp(e)),/[^\s\u00a0\u00ad\u200b\ufeff]/);if(f&&0<r&&r<f.length&&p.test(f.charAt(r))&&p.test(f.charAt(r-1))){const e=u.getBookmark();g.collapse(!0);var d=ou(i,g,i.formatter.get(s)),d=rm(d);i.formatter.apply(s,l,d),u.moveToBookmark(e)}else e&&t.nodeValue===hp||(d=i.getDoc(),c=Cp(!0).dom,e=d.importNode(c,!0),t=e.firstChild,g.insertNode(e),r=1),i.formatter.apply(s,l,e),u.setCursorLocation(t,r);var c}else e.setRng(Jf(e.getRng())),hu(e,!0,()=>{pu(h,(e,t)=>{t=t?e:ou(h,e,y);r(a,t,!1)})}),Rc(a,e,e.getRng()),h.nodeChanged();d=v,t=h,Rp(Np[d],e=>{e(t)})}Eu(h,v,n,b)}else{n=e.getNode();for(let e=0,t=y.length;e<t;e++){const v=y[e];if(v.ceFalseOverride&&jc(v)&&a.is(n,v.selector)){w(n,v);break}}Eu(h,v,n,b)}var t},eh=e=>Q(e,"vars"),th=e=>e.selection.getStart(),rh=(t,e,r,n,o)=>ve(e,e=>{e=t.formatter.matchNode(e,r,null!=o?o:{},n);return!D(e)},e=>!!cp(t,e,r)||!n&&H(t.formatter.matchNode(e,r,o,!0))),nh=(e,t)=>{t=null!=t?t:th(e);return T(Uc(e.dom,t),e=>oe(e)&&!Nn(e))},oh=(o,a,e)=>{const i=nh(o,a);X(e,(e,n)=>{var t=e=>{const t=rh(o,i,n,e.similar,eh(e)?e.vars:void 0),r=t.isSome();if(e.state.get()!==r){e.state.set(r);const o=t.getOr(a);eh(e)?e.callback(r,{node:o,format:n,parents:i}):Y(e.callbacks,e=>e(r,{node:o,format:n,parents:i}))}};Y([e.withSimilar,e.withoutSimilar],t),Y(e.withVars,t)})};function ah(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return hh(ih,t)}var ih,sh=Object.hasOwnProperty,lh=Object.setPrototypeOf,dh=Object.isFrozen,ch=Object.getPrototypeOf,uh=Object.getOwnPropertyDescriptor,mh=Object.freeze,t=Object.seal,gh=Object.create,fh="undefined"!=typeof Reflect&&Reflect,ph=(ph=fh.apply)||function(e,t,r){return e.apply(t,r)},mh=mh||function(e){return e},t=t||function(e){return e},hh=(hh=fh.construct)||function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t))))},vh=Eh(Array.prototype.forEach),bh=Eh(Array.prototype.pop),yh=Eh(Array.prototype.push),Ch=Eh(String.prototype.toLowerCase),wh=Eh(String.prototype.match),xh=Eh(String.prototype.replace),kh=Eh(String.prototype.indexOf),Sh=Eh(String.prototype.trim),_h=Eh(RegExp.prototype.test);ih=TypeError;function Eh(o){return function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return ph(o,e,r)}}function Le(e,t){lh&&lh(e,null);for(var r=t.length;r--;){var n,o=t[r];"string"!=typeof o||(n=Ch(o))!==o&&(dh(t)||(t[r]=n),o=n),e[o]=!0}return e}function Nh(e){var t=gh(null),r=void 0;for(r in e)ph(sh,e,[r])&&(t[r]=e[r]);return t}function Ah(e,t){for(;null!==e;){var r=uh(e,t);if(r){if(r.get)return Eh(r.get);if("function"==typeof r.value)return Eh(r.value)}e=ch(e)}return function(e){return console.warn("fallback value for",e),null}}var Rh=mh(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Th=mh(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Oh=mh(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Bh=mh(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ph=mh(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Dh=mh(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Lh=mh(["#text"]),Mh=mh(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Ih=mh(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Fh=mh(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Uh=mh(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),zh=t(/\{\{[\s\S]*|[\s\S]*\}\}/gm),jh=t(/<%[\s\S]*|[\s\S]*%>/gm),Vh=t(/^data-[\-\w.\u00B7-\uFFFF]/),Hh=t(/^aria-[\-\w]+$/),qh=t(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),$h=t(/^(?:\w+script|data):/i),Wh=t(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Kh=t(/^html$/i),Gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Yh(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var Xh,Qh,Jh,Zh,ev=function L(){var s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,d=function(e){return L(e)};if(d.version="2.3.6",d.removed=[],!s||!s.document||9!==s.document.nodeType)return d.isSupported=!1,d;var l=s.document,o=s.document,M=s.DocumentFragment,e=s.HTMLTemplateElement,c=s.Node,I=s.Element,t=s.NodeFilter,r=s.NamedNodeMap,F=void 0===r?s.NamedNodeMap||s.MozNamedAttrMap:r,U=s.HTMLFormElement,z=s.DOMParser,r=s.trustedTypes,n=I.prototype,j=Ah(n,"cloneNode"),V=Ah(n,"nextSibling"),H=Ah(n,"childNodes"),u=Ah(n,"parentNode"),m=("function"!=typeof e||(n=o.createElement("template")).content&&n.content.ownerDocument&&(o=n.content.ownerDocument),function(e,t){if("object"!==(void 0===e?"undefined":Gh(e))||"function"!=typeof e.createPolicy)return null;var r=null,n="data-tt-policy-suffix",t="dompurify"+((r=t.currentScript&&t.currentScript.hasAttribute(n)?t.currentScript.getAttribute(n):r)?"#"+r:"");try{return e.createPolicy(t,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+t+" could not be created."),null}}(r,l)),q=m?m.createHTML(""):"",e=o,a=e.implementation,$=e.createNodeIterator,W=e.createDocumentFragment,K=e.getElementsByTagName,G=l.importNode,n={};try{n=Nh(o).documentMode?o.documentMode:{}}catch(L){}function Y(e){return e instanceof RegExp||e instanceof Function}function X(e){O&&O===e||(e=Nh(e=e&&"object"===(void 0===e?"undefined":Gh(e))?e:{}),p="ALLOWED_TAGS"in e?Le({},e.ALLOWED_TAGS):ue,h="ALLOWED_ATTR"in e?Le({},e.ALLOWED_ATTR):me,Se="ADD_URI_SAFE_ATTR"in e?Le(Nh(_e),e.ADD_URI_SAFE_ATTR):_e,xe="ADD_DATA_URI_TAGS"in e?Le(Nh(ke),e.ADD_DATA_URI_TAGS):ke,E="FORBID_CONTENTS"in e?Le({},e.FORBID_CONTENTS):we,b="FORBID_TAGS"in e?Le({},e.FORBID_TAGS):{},ge="FORBID_ATTR"in e?Le({},e.FORBID_ATTR):{},_="USE_PROFILES"in e&&e.USE_PROFILES,fe=!1!==e.ALLOW_ARIA_ATTR,pe=!1!==e.ALLOW_DATA_ATTR,he=e.ALLOW_UNKNOWN_PROTOCOLS||!1,y=e.SAFE_FOR_TEMPLATES||!1,C=e.WHOLE_DOCUMENT||!1,w=e.RETURN_DOM||!1,x=e.RETURN_DOM_FRAGMENT||!1,k=e.RETURN_TRUSTED_TYPE||!1,be=e.FORCE_BODY||!1,ye=!1!==e.SANITIZE_DOM,Ce=!1!==e.KEEP_CONTENT,S=e.IN_PLACE||!1,ce=e.ALLOWED_URI_REGEXP||ce,A=e.NAMESPACE||N,e.CUSTOM_ELEMENT_HANDLING&&Y(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(v.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Y(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(v.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(v.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),R=-1===Ae.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,T="application/xhtml+xml"===R?function(e){return e}:Ch,y&&(pe=!1),x&&(w=!0),_&&(p=Le({},[].concat(Yh(Lh))),h=[],!0===_.html&&(Le(p,Rh),Le(h,Mh)),!0===_.svg&&(Le(p,Th),Le(h,Ih),Le(h,Uh)),!0===_.svgFilters&&(Le(p,Oh),Le(h,Ih),Le(h,Uh)),!0===_.mathMl&&(Le(p,Ph),Le(h,Fh),Le(h,Uh))),e.ADD_TAGS&&Le(p=p===ue?Nh(p):p,e.ADD_TAGS),e.ADD_ATTR&&Le(h=h===me?Nh(h):h,e.ADD_ATTR),e.ADD_URI_SAFE_ATTR&&Le(Se,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&Le(E=E===we?Nh(E):E,e.FORBID_CONTENTS),Ce&&(p["#text"]=!0),C&&Le(p,["html","head","body"]),p.table&&(Le(p,["tbody"]),delete b.tbody),mh&&mh(e),O=e)}function g(t){yh(d.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=q}catch(e){t.remove()}}}function Q(e){var t=void 0,r=void 0,n=(be?e="<remove></remove>"+e:r=(n=wh(e,/^[\r\n\t ]+/))&&n[0],"application/xhtml+xml"===R&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>"),m?m.createHTML(e):e);if(A===N)try{t=(new z).parseFromString(n,R)}catch(e){}if(!t||!t.documentElement){t=a.createDocument(A,"template",null);try{t.documentElement.innerHTML=ne?"":n}catch(e){}}return n=t.body||t.documentElement,e&&r&&n.insertBefore(o.createTextNode(r),n.childNodes[0]||null),A===N?K.call(t,C?"html":"body")[0]:C?t.documentElement:n}function J(e){return $.call(e.ownerDocument||e,e,t.SHOW_ELEMENT|t.SHOW_COMMENT|t.SHOW_TEXT,null,!1)}function f(e){return"object"===(void 0===c?"undefined":Gh(c))?e instanceof c:e&&"object"===(void 0===e?"undefined":Gh(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function Z(e){if(D("beforeSanitizeElements",e,null),(a=e)instanceof U&&("string"!=typeof a.nodeName||"string"!=typeof a.textContent||"function"!=typeof a.removeChild||!(a.attributes instanceof F)||"function"!=typeof a.removeAttribute||"function"!=typeof a.setAttribute||"string"!=typeof a.namespaceURI||"function"!=typeof a.insertBefore))return g(e),1;if(_h(/[\u0080-\uFFFF]/,e.nodeName))return g(e),1;var t,r,n,o,a=T(e.nodeName);if(D("uponSanitizeElement",e,{tagName:a,allowedTags:p}),e.hasChildNodes()&&!f(e.firstElementChild)&&(!f(e.content)||!f(e.content.firstElementChild))&&_h(/<[/\w]/g,e.innerHTML)&&_h(/<[/\w]/g,e.textContent))return g(e),1;if("select"===a&&_h(/<template/i,e.innerHTML))return g(e),1;if(p[a]&&!b[a])return(!(e instanceof I)||((r=u(t=e))&&r.tagName||(r={namespaceURI:N,tagName:"template"}),n=Ch(t.tagName),o=Ch(r.tagName),t.namespaceURI===Ne?r.namespaceURI===N?"svg"===n:r.namespaceURI===Ee?"svg"===n&&("annotation-xml"===o||Te[o]):Boolean(B[n]):t.namespaceURI===Ee?r.namespaceURI===N?"math"===n:r.namespaceURI===Ne?"math"===n&&Oe[o]:Boolean(Pe[n]):t.namespaceURI===N&&!(r.namespaceURI===Ne&&!Oe[o])&&!(r.namespaceURI===Ee&&!Te[o])&&!Pe[n]&&(Be[n]||!B[n])))&&("noscript"!==a&&"noembed"!==a||!_h(/<\/no(script|embed)/i,e.innerHTML))?(y&&3===e.nodeType&&(t=e.textContent,t=xh(t,oe," "),t=xh(t,ae," "),e.textContent!==t&&(yh(d.removed,{element:e.cloneNode()}),e.textContent=t)),D("afterSanitizeElements",e,null),!1):(g(e),!0);if(!b[a]&&ee(a)){if(v.tagNameCheck instanceof RegExp&&_h(v.tagNameCheck,a))return;if(v.tagNameCheck instanceof Function&&v.tagNameCheck(a))return}if(Ce&&!E[a]){var i=u(e)||e.parentNode,s=H(e)||e.childNodes;if(s&&i)for(var l=s.length-1;0<=l;--l)i.insertBefore(j(s[l],!0),V(e))}return g(e),1}function ee(e){return 0<e.indexOf("-")}function te(e){var t,r=void 0,n=void 0,o=(D("beforeSanitizeAttributes",e,null),e.attributes);if(o){for(var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:h},n=o.length;n--;){t=o[n];var i=t.name,s=t.namespaceURI,r=Sh(t.value),l=T(i),d=r;if(a.attrName=l,a.attrValue=r,a.keepAttr=!0,a.forceKeepAttr=void 0,D("uponSanitizeAttribute",e,a),r=a.attrValue,!a.forceKeepAttr)if(a.keepAttr)if(_h(/\/>/i,r))P(i,e);else{y&&(r=xh(r,oe," "),r=xh(r,ae," "));var c=T(e.nodeName);if(De(c,l,r)){if(r!==d)try{s?e.setAttributeNS(s,i,r):e.setAttribute(i,r)}catch(t){P(i,e)}}else P(i,e)}else P(i,e)}D("afterSanitizeAttributes",e,null)}}function re(e){var t,r=J(e);for(D("beforeSanitizeShadowDOM",e,null);t=r.nextNode();)D("uponSanitizeShadowNode",t,null),Z(t)||(t.content instanceof M&&re(t.content),te(t));D("afterSanitizeShadowDOM",e,null)}var ne,i={},oe=(d.isSupported="function"==typeof u&&a&&void 0!==a.createHTMLDocument&&9!==n,zh),ae=jh,ie=Vh,se=Hh,le=$h,de=Wh,ce=qh,p=null,ue=Le({},[].concat(Yh(Rh),Yh(Th),Yh(Oh),Yh(Ph),Yh(Lh))),h=null,me=Le({},[].concat(Yh(Mh),Yh(Ih),Yh(Fh),Yh(Uh))),v=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),b=null,ge=null,fe=!0,pe=!0,he=!1,y=!1,C=!1,ve=!1,be=!1,w=!1,x=!1,k=!1,ye=!0,Ce=!0,S=!1,_={},E=null,we=Le({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),xe=null,ke=Le({},["audio","video","img","source","image","track"]),Se=null,_e=Le({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ee="http://www.w3.org/1998/Math/MathML",Ne="http://www.w3.org/2000/svg",N="http://www.w3.org/1999/xhtml",A=N,R=void 0,Ae=["application/xhtml+xml","text/html"],T=void 0,O=null,Re=o.createElement("form"),Te=Le({},["mi","mo","mn","ms","mtext"]),Oe=Le({},["foreignobject","desc","title","annotation-xml"]),Be=Le({},["title","style","font","a","script"]),B=Le({},Th),Pe=(Le(B,Oh),Le(B,Bh),Le({},Ph)),P=(Le(Pe,Dh),function(e,t){try{yh(d.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){yh(d.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!h[e])if(w||x)try{g(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}}),D=function(e,t,r){i[e]&&vh(i[e],function(e){e.call(d,t,r,O)})},De=function(e,t,r){if(ye&&("id"===t||"name"===t)&&(r in o||r in Re))return!1;if((!pe||ge[t]||!_h(ie,t))&&(!fe||!_h(se,t)))if(!h[t]||ge[t]){if(!(ee(e)&&(v.tagNameCheck instanceof RegExp&&_h(v.tagNameCheck,e)||v.tagNameCheck instanceof Function&&v.tagNameCheck(e))&&(v.attributeNameCheck instanceof RegExp&&_h(v.attributeNameCheck,t)||v.attributeNameCheck instanceof Function&&v.attributeNameCheck(t))||"is"===t&&v.allowCustomizedBuiltInElements&&(v.tagNameCheck instanceof RegExp&&_h(v.tagNameCheck,r)||v.tagNameCheck instanceof Function&&v.tagNameCheck(r))))return!1}else if(!Se[t]&&!_h(ce,xh(r,de,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==kh(r,"data:")||!xe[e])&&(!he||_h(le,xh(r,de,"")))&&r)return!1;return!0};return d.sanitize=function(e,t){var r,n=void 0,o=void 0,a=void 0;if("string"!=typeof(e=(ne=!e)?"\x3c!--\x3e":e)&&!f(e)){if("function"!=typeof e.toString)throw ah("toString is not a function");if("string"!=typeof(e=e.toString()))throw ah("dirty is not a string, aborting")}if(!d.isSupported){if("object"===Gh(s.toStaticHTML)||"function"==typeof s.toStaticHTML){if("string"==typeof e)return s.toStaticHTML(e);if(f(e))return s.toStaticHTML(e.outerHTML)}return e}if(ve||X(t),d.removed=[],S="string"==typeof e?!1:S){if(e.nodeName){var t=T(e.nodeName);if(!p[t]||b[t])throw ah("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof c)1===(t=(n=Q("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===t.nodeName||"HTML"===t.nodeName?n=t:n.appendChild(t);else{if(!w&&!y&&!C&&-1===e.indexOf("<"))return m&&k?m.createHTML(e):e;if(!(n=Q(e)))return w?null:k?q:""}n&&be&&g(n.firstChild);for(var i=J(S?e:n);r=i.nextNode();)3===r.nodeType&&r===o||Z(r)||(r.content instanceof M&&re(r.content),te(r),o=r);if(o=null,S)return e;if(w){if(x)for(a=W.call(n.ownerDocument);n.firstChild;)a.appendChild(n.firstChild);else a=n;return a=h.shadowroot?G.call(l,a,!0):a}t=C?n.outerHTML:n.innerHTML;return C&&p["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&_h(Kh,n.ownerDocument.doctype.name)&&(t="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+t),y&&(t=xh(t,oe," "),t=xh(t,ae," ")),m&&k?m.createHTML(t):t},d.setConfig=function(e){X(e),ve=!0},d.clearConfig=function(){O=null,ve=!1},d.isValidAttribute=function(e,t,r){O||X({});e=T(e),t=T(t);return De(e,t,r)},d.addHook=function(e,t){"function"==typeof t&&(i[e]=i[e]||[],yh(i[e],t))},d.removeHook=function(e){i[e]&&bh(i[e])},d.removeHooks=function(e){i[e]&&(i[e]=[])},d.removeAllHooks=function(){i={}},d}();const tv=(e,t,r)=>{var n,o,a,i,s,l=xa();t.convert_fonts_to_spans&&(a=e,i=l,s=Z.explode(t.font_size_legacy_values),a.addNodeFilter("font",e=>{Y(e,e=>{const t=i.parse(e.attr("style")),r=e.attr("color"),n=e.attr("face"),o=e.attr("size");var a;r&&(t.color=r),n&&(t["font-family"]=n),o&&(t["font-size"]=s[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",i.serialize(t)),a=e,Y(["color","face","size"],e=>{a.attr(e,null)})})})),n=r,o=l,e.addNodeFilter("strike",e=>{const r="html4"!==n.type;Y(e,e=>{if(r)e.name="s";else{const t=o.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",o.serialize(t))}})})},rv=e=>{let t;var e=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(e[0]);return{type:t=r?r[1]:t,data:e[1]}},nv=(e,t)=>{let r;try{r=atob(t)}catch(e){return P.none()}const n=new Uint8Array(r.length);for(let e=0;e<n.length;e++)n[e]=r.charCodeAt(e);return P.some(new Blob([n],{type:e}))},ov=e=>{return 0===e.indexOf("blob:")?(n=e,new Promise((e,t)=>{const r=()=>{t("Cannot convert "+n+" to Blob. Resource might not exist or is inaccessible.")};try{const t=new XMLHttpRequest;t.open("GET",n,!0),t.responseType="blob",t.onload=()=>{200===t.status?e(t.response):r()},t.onerror=r,t.send()}catch(e){r()}})):0===e.indexOf("data:")?(o=e,new Promise(e=>{var{type:t,data:r}=rv(o);nv(t,r).fold(()=>e(new Blob([])),e)})):null;var n,o},av=r=>new Promise(e=>{const t=new FileReader;t.onloadend=()=>{e(t.result)},t.readAsDataURL(r)});let iv=0;const sv=e=>(e||"blobid")+iv++,lv=Z.each,dv=Z.trim,cv="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),uv={ftp:21,http:80,https:443,mailto:25},mv=["img","video"],gv=(e,t,r)=>{t=(t=>{try{return decodeURIComponent(t)}catch(e){return unescape(t)}})(t);return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(t)||!e.allow_html_data_urls&&(/^data:image\//i.test(t)?(e=e.allow_svg_data_urls,r=r,(H(e)?!e:!H(r)||!K(mv,r))&&/^data:image\/svg\+xml/i.test(t)):/^data:/i.test(t)))};class fv{constructor(e,t){e=dv(e),this.settings=t||{};const r=this.settings.base_uri,n=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))n.source=e;else{const o=0===e.indexOf("//");if(0!==e.indexOf("/")||o||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const t=this.settings.base_uri?this.settings.base_uri.path:new fv(document.location.href).directory;if(this.settings.base_uri&&""==this.settings.base_uri.protocol)e="//mce_host"+n.toAbsPath(t,e);else{const o=/([^#?]*)([#?]?.*)/.exec(e);e=(r&&r.protocol||"http")+"://mce_host"+n.toAbsPath(t,o[1])+o[2]}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);lv(cv,(e,t)=>{let r=a[t];r=r&&r.replace(/\(mce_at\)/g,"@@"),n[e]=r}),r&&(n.protocol||(n.protocol=r.protocol),n.userInfo||(n.userInfo=r.userInfo),n.port||"mce_host"!==n.host||(n.port=r.port),n.host&&"mce_host"!==n.host||(n.host=r.host),n.source=""),o&&(n.protocol="")}}static parseDataUri(e){let t;var e=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(e[0]);return{type:t=r?r[1]:t,data:e[1]}}static isDomSafe(e,t,r={}){if(r.allow_script_urls)return!0;e=ua.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!gv(r,e,t)}static getDocumentBaseUrl(e){let t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t}setPath(e){e=/^(.*?)\/?(\w+)?$/.exec(e);this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()}toRelative(e){let t;if("./"===e)return e;const r=new fv(e,{base_uri:this});if("mce_host"!==r.host&&this.host!==r.host&&r.host||this.port!==r.port||this.protocol!==r.protocol&&""!==r.protocol)return r.getURI();const n=this.getURI(),o=r.getURI();return n===o||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===o?n:(t=this.toRelPath(this.path,r.path),r.query&&(t+="?"+r.query),r.anchor&&(t+="#"+r.anchor),t)}toAbsolute(e,t){const r=new fv(e,{base_uri:this});return r.getURI(t&&this.isSameOrigin(r))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=uv[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){let r,n,o=0,a="";var i=e.substring(0,e.lastIndexOf("/")).split("/"),s=t.split("/");if(i.length>=s.length)for(r=0,n=i.length;r<n;r++)if(r>=s.length||i[r]!==s[r]){o=r+1;break}if(i.length<s.length)for(r=0,n=s.length;r<n;r++)if(r>=i.length||i[r]!==s[r]){o=r+1;break}if(1===o)return t;for(r=0,n=i.length-(o-1);r<n;r++)a+="../";for(r=o-1,n=s.length;r<n;r++)a+=r!==o-1?"/"+s[r]:s[r];return a}toAbsPath(e,t){let r,n,o=0,a=[];var i=/\/$/.test(t)?"/":"";let s=e.split("/");var l=t.split("/");for(lv(s,e=>{e&&a.push(e)}),s=a,r=l.length-1,a=[];0<=r;r--)0!==l[r].length&&"."!==l[r]&&(".."!==l[r]?0<o?o--:a.push(l[r]):o++);return r=s.length-o,0!==(n=r<=0?ke(a).join("/"):s.slice(0,r).join("/")+"/"+ke(a).join("/")).indexOf("/")&&(n="/"+n),i&&n.lastIndexOf("/")!==n.length-1&&(n+=i),n}getURI(e=!1){let t;return this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source}}const pv=Z.makeMap,hv=Z.each,vv=Z.explode,bv=Z.extend,yv={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},Cv=Z.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),wv="data-mce-type",xv=(s,l)=>{const e=ev(),d=s.validate;let c=0;return e.addHook("uponSanitizeElement",(e,t)=>{var r;8===e.nodeType&&!s.allow_conditional_comments&&/^\[if/i.test(e.nodeValue)&&(e.nodeValue=" "+e.nodeValue);const n=t.tagName;if(1===e.nodeType&&"body"!==n){const o=re(e),a=ar(o,wv),i=nr(o,"data-mce-bogus");!a&&V(i)?("all"===i?ne:ln)(o):(e=l.getElementRule(n.toLowerCase()),!d||e?(t.allowedTags[n]=!0,d&&!a&&(Y(null!=(t=e.attributesForced)?t:[],e=>{tr(o,e.name,"{$uid}"===e.value?"mce_"+c++:e.value)}),Y(null!=(t=e.attributesDefault)?t:[],e=>{ar(o,e.name)||tr(o,e.name,"{$uid}"===e.value?"mce_"+c++:e.value)}),(!e.attributesRequired||G(e.attributesRequired,e=>ar(o,e)))&&(!e.removeEmptyAttrs||null!=(t=o.dom.attributes)&&0!==t.length)?e.outputName&&e.outputName!==n.toLowerCase()&&(t=o,e=((e,t)=>{t=te(t),e=sr(e);return rr(t,e),t})(t,e.outputName),rn(t,e),r=Pr(t),an(e,r),ne(t)):ln(o))):ln(o))}}),e.addHook("uponSanitizeAttribute",(e,t)=>{var r=e.tagName.toLowerCase(),{attrName:n,attrValue:o}=t;t.keepAttr=!d||l.isValid(r,n)||at(n,"data-")||at(n,"aria-"),n in Cv&&gv(s,o,r)&&(t.keepAttr=!1),t.keepAttr?(t.allowedAttributes[n]=!0,n in l.getBoolAttrs()&&(t.attrValue=n),s.allow_svg_data_urls&&at(o,"data:image/svg+xml")&&(t.forceKeepAttr=!0)):!e.hasAttribute(wv)||"id"!==n&&"class"!==n&&"style"!==n||(t.forceKeepAttr=!0)}),e},kv=(r,e,n)=>{const o=r.name,a=o in n&&"title"!==o&&"textarea"!==o,i=e.childNodes;for(let e=0,t=i.length;e<t;e++){const o=i[e],s=new ng(o.nodeName.toLowerCase(),o.nodeType);if(oe(o)){const r=o.attributes;for(let e=0,t=r.length;e<t;e++){const n=r[e];s.attr(n.name,n.value)}}else O(o)?(s.value=o.data,a&&(s.raw=!0)):(Pn(o)||On(o)||Bn(o))&&(s.value=o.data);kv(s,o,n),r.append(s)}},Sv=(e={},N=wa())=>{const n={},A=[],R={validate:!0,root_name:"body",...e},T=new DOMParser,O=xv(R,N),B=()=>{const e=[];for(const t in n)Q(n,t)&&e.push({name:t,callbacks:n[t]});return e},t={schema:N,addAttributeFilter:(e,r)=>{hv(vv(e),e=>{let t;for(t=0;t<A.length;t++)if(A[t].name===e)return void A[t].callbacks.push(r);A.push({name:e,callbacks:[r]})})},getAttributeFilters:()=>[].concat(A),addNodeFilter:(e,r)=>{hv(vv(e),e=>{let t=n[e];t||(n[e]=t=[]),t.push(r)})},getNodeFilters:B,parse:(e,t={})=>{var r,n;const o=R.validate,a=null!=(b=t.context)?b:R.root_name,i=([b,e,r="html"]=[e,a,t.format],y="xhtml"===r?"application/xhtml+xml":"text/html",e=(n=Q(N.getSpecialElements(),e.toLowerCase()))?`<${e}>${b}</${e}>`:b,b="xhtml"===r?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${e}</body></html>`:`<body>${e}</body>`,r=T.parseFromString(b,y).body,O.sanitize(r,((e,t)=>{const r={...yv};return r.PARSER_MEDIA_TYPE=t,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r})(R,y)),O.removed=[],n?r.firstChild:r),s=new ng(a,11),[l,d]=(kv(s,i,N.getSpecialElements()),((r,n,e,o)=>{const a=e.validate,i=n.getNonEmptyElements(),s=n.getWhitespaceElements(),l=bv(pv("script,style,head,html,body,title,meta,param"),n.getBlockElements()),d=/[ \t\r\n]+/g,c=/^[ \t\r\n]+/,u=/[ \t\r\n]+$/,m=e=>{for(e=e.parent;H(e);){if(e.name in s)return!0;e=e.parent}return!1},g=(e,t)=>{t=t?e.prev:e.next;return!H(t)&&e.parent.name in l&&(e.parent!==r||o.isRootContent)};return[t=>{if(3===t.type&&!m(t)){let e=t.value;e=e.replace(d," "),r=t.prev,n=l,0===(e=r&&(r.name in n||"br"===r.name)||g(t,!0)?e.replace(c,""):e).length?t.remove():t.value=e}var r,n},t=>{var r,e;if(1===t.type){const r=n.getElementRule(t.name);if(a&&r){const a=Yf(n,i,s,t);r.removeEmpty&&a?l[t.name]?t.remove():t.unwrap():r.paddEmpty&&(a||(e=t,Gf(e,"#text")&&e.firstChild.value===go))&&Kf(0,o,l,t)}}else if(3===t.type&&!m(t)){let e=t.value;0===(e=l[null==(r=t.next)?void 0:r.name]||g(t,!1)?e.replace(u,""):e).length?t.remove():t.value=e}}]})(s,N,R,t)),c=[],u=o?e=>{var t=c,r=e.parent;r&&N.children[e.name]&&!N.isValidChild(r.name,e.name)&&t.push(e)}:$,m=B(),g={nodes:{},attributes:{}},f=e=>qf(m,A,e,g);{var p=s,h=[l,f],v=[d,u];const k=[];for(let t=p,e=t;H(t);t=(e=t).walk())Y(h,e=>e(t)),de(t.parent)&&t!==p?t=e:k.push(t);for(let e=k.length-1;0<=e;e--){const h=k[e];Y(v,e=>e(h))}}if(c.reverse(),o&&0<c.length)if(t.context){const{pass:e,fail:A}=fe(c,e=>e.parent===s);Qf(A,N,f),t.invalid=0<e.length}else Qf(c,N,f);e=R;var b,y=!1===(b=null!=(b=t.forced_root_block)?b:e.forced_root_block)?"":!0===b?"p":b;if(y&&("body"===s.name||t.isRootContent)){var C=s,w=y;const S=bv(pv("script,style,head,html,body,title,meta,param"),N.getBlockElements()),_=/^[ \t\r\n]+/,E=/[ \t\r\n]+$/;let t=C.firstChild,e=null;var x=e=>{e&&((t=e.firstChild)&&3===t.type&&(t.value=t.value.replace(_,"")),(t=e.lastChild)&&3===t.type&&(t.value=t.value.replace(E,"")))};if(N.isValidChild(C.name,w.toLowerCase())){for(;t;){const N=t.next;3===t.type||1===t.type&&"p"!==t.name&&!S[t.name]&&!t.attr(wv)?(e||((e=new ng(w,1)).attr(R.forced_root_block_attrs),C.insert(e,t)),e.append(t)):(x(e),e=null),t=N}x(e)}}return t.invalid||$f(g,t),s}};{var r=R;const d=(e=t).schema;r.remove_trailing_brs&&e.addNodeFilter("br",(n,o,a)=>{const i=Z.extend({},d.getBlockElements()),s=d.getNonEmptyElements(),l=d.getWhitespaceElements();i.body=1;for(let e=0,t=n.length;e<t;e++){let t=n[e],r=t.parent;if(i[t.parent.name]&&t===r.lastChild){let e=t.prev;for(;e;){const o=e.name;if("span"!==o||"bookmark"!==e.attr("data-mce-type")){"br"===o&&(t=null);break}e=e.prev}if(t&&(t.remove(),Yf(d,s,l,r))){const n=d.getElementRule(r.name);n&&(n.removeEmpty?r.remove():n.paddEmpty&&Kf(0,a,i,r))}}else{let e=t;for(;r&&r.firstChild===e&&r.lastChild===e&&(e=r,!i[r.name]);)r=r.parent;if(e===r){const n=new ng("#text",3);n.value=go,t.replace(n)}}}}),e.addAttributeFilter("href",e=>{let t=e.length;if(!r.allow_unsafe_link_target)for(;t--;){const r=e[t];"a"===r.name&&"_blank"===r.attr("target")&&r.attr("rel",(e=>{e=e?Z.trim(e):"";return/\b(noopener)\b/g.test(e)?e:e.split(" ").filter(e=>0<e.length).concat(["noopener"]).sort().join(" ")})(r.attr("rel")))}}),r.allow_html_in_named_anchor||e.addAttributeFilter("id,name",e=>{let t,r,n,o,a=e.length;for(;a--;)if("a"===(o=e[a]).name&&o.firstChild&&!o.attr("href"))for(n=o.parent,t=o.lastChild;r=t.prev,n.insert(t,o),t=r;);}),r.fix_list_elements&&e.addNodeFilter("ul,ol",e=>{let t,r,n=e.length;for(;n--;)if("ul"===(r=(t=e[n]).parent).name||"ol"===r.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{const e=new ng("li",1);e.attr("style","list-style-type: none"),t.wrap(e)}}),r.validate&&d.getValidClasses()&&e.addAttributeFilter("class",e=>{var o=d.getValidClasses();let a=e.length;for(;a--;){const d=e[a],i=d.attr("class").split(" ");let n="";for(let r=0;r<i.length;r++){const a=i[r];let e=!1,t=o["*"];t&&t[a]&&(e=!0),t=o[d.name],(e=!e&&t&&t[a]?!0:e)&&(n&&(n+=" "),n+=a)}n.length||(n=null),d.attr("class",n)}});{const i=r["blob_cache"],s=t=>{var e,r=t.attr("src");(e=t).attr("src")===J.transparentSrc||H(e.attr("data-mce-placeholder"))||(e=t,H(e.attr("data-mce-bogus")))||((e=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(r))?P.some({type:e[1],data:decodeURIComponent(e[2])}):P.none()).bind(({type:e,data:t})=>P.from(i.getByData(t,e)).orThunk(()=>nv(e,t).map(e=>{e=i.create(sv(),e,t);return i.add(e),e}))).each(e=>{t.attr("src",e.blobUri())})};i&&e.addAttributeFilter("src",e=>Y(e,s))}}return e=t,o=R,a=N,o.inline_styles&&tv(e,o,a),t;var o,a},_v=(e,t)=>{o=e;const r=op(o)?ug({validate:!1}).serialize(o):o,n=t(r);var o;if(n.isDefaultPrevented())return n;if(op(e)){if(n.content===r)return{...n,content:e};{const t=Sv({validate:!1,forced_root_block:!1}).parse(n.content,{context:e.name});return{...n,content:t}}}return n},Ev=(e,t)=>{if(t.no_events)return ls.value(t);{const r=e.dispatch("BeforeGetContent",t);return r.isDefaultPrevented()?ls.error(Ru(e,{content:"",...r}).content):ls.value(r)}},Nv=(t,e,r)=>r.no_events?e:_v(e,e=>Ru(t,{...r,content:e})).content,Av=(t,r)=>{if(r.no_events)return ls.value(r);{const e=_v(r.content,e=>((e,t)=>e.dispatch("BeforeSetContent",t))(t,{...r,content:e}));return e.isDefaultPrevented()?(Au(t,e),ls.error(void 0)):ls.value(e)}},Rv=(e,t,r)=>{r.no_events||Au(e,{...r,content:t})},Tv=(e,t,r)=>({element:e,width:t,rows:r}),Ov=(e,t)=>({element:e,cells:t}),Bv=(e,t)=>{e=parseInt(nr(e,t),10);return isNaN(e)?1:e},Pv=e=>he(e,(e,t)=>t.cells.length>e?t.cells.length:e,0),Dv=(e,r)=>{var n=e.rows;for(let t=0;t<n.length;t++){var o=n[t].cells;for(let e=0;e<o.length;e++)if(S(o[e],r))return P.some({x:e,y:t})}return P.none()},Lv=(e,t,r,n,o)=>{const a=[],i=e.rows;for(let e=r;e<=o;e++){const r=i[e].cells,o=t<n?r.slice(t,n+1):r.slice(n,t+1);a.push(Ov(i[e].element,o))}return a},Mv=()=>$u([]),Iv=(e,o)=>((e,t)=>Gn(t,"table",N(S,e)))(e,o[0]).bind(e=>{var i,t,r=o[0],n=o[o.length-1],e=(e=>{const m=Tv(si(e),0,[]);return Y(Xa(e,"tr"),(c,u)=>{Y(Xa(c,"td,th"),(e,t)=>{{var r=m,n=((e,t,r)=>{for(;((e,t,r)=>{e=e.rows;return!!(e[r]?e[r].cells:[])[t]})(e,t,r);)t++;return t})(m,t,u),o=u,a=c,i=e;const s=Bv(i,"rowspan"),l=Bv(i,"colspan"),d=r.rows;for(let t=o;t<o+s;t++){d[t]||(d[t]=Ov(li(a),[]));for(let e=n;e<n+l;e++)d[t].cells[e]=t===o&&e===n?i:si(i)}return}})}),Tv(m.element,Pv(m.rows),m.rows)})(e);return i=e,e=r,t=n,Dv(i,e).bind(a=>Dv(i,t).map(e=>{var t=i,r=a.x,n=a.y,o=e.x,e=e.y,r=n<e?Lv(t,r,n,o,e):Lv(t,r,e,o,n);return Tv(t.element,Pv(r),r)})).map(e=>$u([(e=>{var t=e,e=(e=>C(e.rows,e=>{var t=C(e.cells,e=>{e=li(e);return ir(e,"colspan"),ir(e,"rowspan"),e}),e=si(e.element);return an(e,t),e}))(e),t=si(t.element),r=te("tbody");return an(r,e),on(t,r),t})(e)]))}).getOrThunk(Mv),Fv=(e,t)=>{var r=su(t,e);return 0<r.length?Iv(e,r):(r=e,0<(e=t).length&&e[0].collapsed?Mv():(e=e[0],t=re(e.cloneContents()),r=((e,t)=>{const r=re(t.commonAncestorContainer),n=Pg(r,e),o=T(n,e=>no(e)||to(e)),a=(l=n,d=t,be(l,e=>"li"===ee(e)&&mu(e,d)).fold(W([]),e=>(e=>be(e,e=>"ul"===ee(e)||"ol"===ee(e)))(l).map(e=>{var t=te(ee(e)),e=Ue(Zr(e),(e,t)=>at(t,"list-style"));return Yr(t,e),[te("li"),t]}).getOr([]))),i=o.concat(a.length?a:(s=r,so(s)?Ar(s).filter(io).fold(W([]),e=>[s,e]):io(s)?[s]:[]));var s,l,d;return C(i,si)})(r,e),t=he(r,(e,t)=>(on(t,e),t),t),0<r.length?$u([t]):t))},Uv=(e,t)=>0<=t&&t<e.length&&yc(e.charAt(t)),zv=e=>vo(e.innerText),jv=e=>oe(e)?e.outerHTML:O(e)?ua.encodeRaw(e.data,!1):Pn(e)?"\x3c!--"+e.data+"--\x3e":"",Vv=(e,t)=>{{e=((g,f)=>{const e=g.length+f.length+2,p=new Array(e),h=new Array(e),s=(r,n,o,a,i)=>{var t=l(r,n,o,a);if(null===t||t.start===n&&t.diag===n-a||t.end===r&&t.diag===r-o){let e=r,t=o;for(;e<n||t<a;)e<n&&t<a&&g[e]===f[t]?(i.push([0,g[e]]),++e,++t):a-o<n-r?(i.push([2,g[e]]),++e):(i.push([1,f[t]]),++t)}else{s(r,t.start,o,t.start-t.diag,i);for(let e=t.start;e<t.end;++e)i.push([0,g[e]]);s(t.end,n,t.end-t.diag,a,i)}},v=(e,t,r,n)=>{let o=e;for(;o-t<n&&o<r&&g[o]===f[o-t];)++o;return{start:e,end:o,diag:t}},l=(e,t,r,n)=>{var o=t-e,a=n-r;if(0==o||0==a)return null;var i=o-a,a=a+o,s=(a%2==0?a:1+a)/2;let l,d,c,u,m;for(p[1+s]=e,h[1+s]=t+1,l=0;l<=s;++l){for(d=-l;d<=l;d+=2){for(c=d+s,d===-l||d!==l&&p[c-1]<p[c+1]?p[c]=p[c+1]:p[c]=p[c-1]+1,u=p[c],m=u-e+r-d;u<t&&m<n&&g[u]===f[m];)p[c]=++u,++m;if(i%2!=0&&i-l<=d&&d<=i+l&&h[c-i]<=p[c])return v(h[c-i],d+e-r,t,n)}for(d=i-l;d<=i+l;d+=2){for(c=d+s-i,d===i-l||d!==i+l&&h[c+1]<=h[c-1]?h[c]=h[c+1]-1:h[c]=h[c-1],u=h[c]-1,m=u-e+r-d;u>=e&&m>=r&&g[u]===f[m];)h[c]=u--,m--;if(i%2==0&&-l<=d&&d<=l&&h[c]<=p[c+i])return v(h[c],d+e-r,t,n)}}},t=[];return s(0,g.length,0,f.length,t),t})(C(Te(t.childNodes),jv),e);var s=t;let i=0;Y(e,e=>{if(0===e[0])i++;else if(1===e[0]){var t=s,r=e[1],n=i,o=(e=>{var t;const r=document.createElement("div"),n=document.createDocumentFragment();for(e&&(r.innerHTML=e);t=r.firstChild;)n.appendChild(t);return n})(r);if(t.hasChildNodes()&&n<t.childNodes.length){const r=t.childNodes[n];r.parentNode.insertBefore(o,r)}else t.appendChild(o);i++}else if(2===e[0]){r=s,n=i;if(r.hasChildNodes()&&n<r.childNodes.length){const a=r.childNodes[n];a.parentNode.removeChild(a)}}})}return t},Hv=Je(()=>document.implementation.createHTMLDocument("undo")),qv=t=>{e=t.getBody();var e=T(C(Te(e.childNodes),jv),e=>0<e.length);const r=we(e,e=>{e=ag(t.serializer,e);return 0<e.length?[e]:[]}),n=r.join("");return-1!==n.indexOf("</iframe>")?{type:"fragmented",fragments:r,content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:n,bookmark:null,beforeBookmark:null}},$v=(e,t,r)=>{r=r?t.beforeBookmark:t.bookmark;"fragmented"===t.type?Vv(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!H(r)||!dc(r)||!r.isFakeCaret}),e.selection.moveToBookmark(r)},Wv=e=>"fragmented"===e.type?e.fragments.join(""):e.content,Kv=e=>{var t=te("body",Hv());return cn(t,Wv(e)),Y(Xa(t,"*[data-mce-bogus]"),ln),dn(t)},Gv=(e,t)=>!(!e||!t)&&(!!((e,t)=>Wv(e)===Wv(t))(e,t)||((e,t)=>Kv(e)===Kv(t))(e,t)),Yv=e=>0===e.get(),Xv=(e,t,r)=>{Yv(r)&&(e.typing=t)},Qv=(e,t)=>{e.typing&&(Xv(e,!1,t),e.add())},Jv=h=>({init:{bindEvents:$},undoManager:{beforeChange:(e,t)=>{var r=h;Yv(e)&&t.set(as(r.selection))},add:(e,t,r,n,o,a)=>{var i=h,s=e,l=t,e=r,t=n,r=o,n=a,o=qv(i);if(r=r||{},r=Z.extend(r,o),!1===Yv(e)||i.removed)return null;if(o=s.data[l.get()],i.dispatch("BeforeAddUndo",{level:r,lastLevel:o,originalEvent:n}).isDefaultPrevented())return null;if(o&&Gv(o,r))return null;if(s.data[l.get()]&&t.get().each(e=>{s.data[l.get()].beforeBookmark=e}),(e=bl(i))&&s.data.length>e){for(let e=0;e<s.data.length-1;e++)s.data[e]=s.data[e+1];s.data.length--,l.set(s.data.length)}return r.bookmark=as(i.selection),l.get()<s.data.length-1&&(s.data.length=l.get()+1),s.data.push(r),l.set(s.data.length-1),t={level:r,lastLevel:o,originalEvent:n},0<l.get()?(i.setDirty(!0),i.dispatch("AddUndo",t),i.dispatch("change",t)):i.dispatch("AddUndo",t),r},undo:(t,r,n)=>{{var o=h;let e;return t.typing&&(t.add(),t.typing=!1,Xv(t,!1,r)),0<n.get()&&(n.set(n.get()-1),e=t.data[n.get()],$v(o,e,!0),o.setDirty(!0),o.dispatch("Undo",{level:e})),e}},redo:(t,r)=>{{var n=h;let e;return t.get()<r.length-1&&(t.set(t.get()+1),e=r[t.get()],$v(n,e,!1),n.setDirty(!0),n.dispatch("Redo",{level:e})),e}},clear:(e,t)=>{var r=h;e.data=[],t.set(0),e.typing=!1,r.dispatch("ClearUndos")},reset:e=>{e.clear(),e.add()},hasUndo:(e,r)=>((e,t)=>0<r.get()||t.typing&&t.data[0]&&!Gv(qv(e),t.data[0]))(h,e),hasRedo:(e,t)=>(e=>t.get()<e.data.length-1&&!e.typing)(e),transact:(e,t,r)=>((e,t,r)=>(Qv(e,t),e.beforeChange(),e.ignore(r),e.add()))(e,t,r),ignore:(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},extra:(e,t,r,n)=>{var o=h,a=r,r=n;if(e.transact(a)){const a=e.data[t.get()].bookmark,i=e.data[t.get()-1];$v(o,i,!0),e.transact(r)&&(e.data[t.get()-1].beforeBookmark=a)}}},formatter:{match:(e,t,r,n)=>pp(h,e,t,r,n),matchAll:(e,t)=>{{var n=h,o=e,a=t;const i=[],s={},r=n.selection.getStart();return n.dom.getParent(r,t=>{for(let e=0;e<o.length;e++){var r=o[e];!s[r]&&fp(n,t,r,a)&&(s[r]=!0,i.push(r))}},n.dom.getRoot()),i}},matchNode:(e,t,r,n)=>fp(h,e,t,r,n),canApply:e=>{{var t=h,r=e;const n=t.formatter.get(r),o=t.dom;if(n){const r=t.selection.getStart(),a=Uc(o,r);for(let e=n.length-1;0<=e;e--){const r=n[e];if(!jc(r))return!0;for(let e=a.length-1;0<=e;e--)if(o.is(a[e],r.selector))return!0}}return!1}},closest:e=>{{var r=h,n=e;const t=e=>S(e,re(r.getBody()));return P.from(r.selection.getStart(!0)).bind(e=>lp(re(e),t=>Oe(n,e=>((e,t)=>fp(r,e.dom,t)?P.some(t):P.none())(t,e)),t)).getOrNull()}},apply:(e,t,r)=>Zp(h,e,t,r),remove:(e,t,r,n)=>Yp(h,e,t,r,n),toggle:(e,t,r)=>{var n=h,o=n.formatter.get(e);(!pp(n,e,t,r)||"toggle"in o[0]&&!o[0].toggle?Zp:Yp)(n,e,t,r)},formatChanged:(e,t,r,n,o)=>{var a,i,s=h,l=e,d=t,c=r,e=n,t=o;null===l.get()&&(i=s,(a=l).set({}),i.on("NodeChange",e=>{oh(i,e.element,a.get())}),i.on("FormatApply FormatRemove",e=>{e=P.from(e.node).map(e=>Ac(e)?e:e.startContainer).bind(e=>oe(e)?P.some(e):P.from(e.parentElement)).getOrThunk(()=>th(i));oh(i,e,a.get())}));{var u=s,r=d,m=c,g=e,f=t;const p=(s=l).get();Y(r.split(","),t=>{const e=R(p,t).getOrThunk(()=>{var e={withSimilar:{state:za(!1),similar:!0,callbacks:[]},withoutSimilar:{state:za(!1),similar:!1,callbacks:[]},withVars:[]};return p[t]=e}),r=()=>{var e=nh(u);return rh(u,e,t,g,f).isSome()};if(D(f)){const u=g?e.withSimilar:e.withoutSimilar;u.callbacks.push(m),1===u.callbacks.length&&u.state.set(r())}else e.withVars.push({state:za(r()),similar:g,vars:f,callback:m})}),s.set(p)}return{unbind:()=>{{var e=l,t=d,r=c;const n=e.get();return Y(t.split(","),t=>R(n,t).each(e=>{n[t]={withSimilar:{...e.withSimilar,callbacks:T(e.withSimilar.callbacks,e=>e!==r)},withoutSimilar:{...e.withoutSimilar,callbacks:T(e.withoutSimilar.callbacks,e=>e!==r)},withVars:T(e.withVars,e=>e.callback!==r)}})),void e.set(n)}}}}},editor:{getContent:e=>((n,o)=>P.from(n.getBody()).fold(W("tree"===o.format?new ng("body",11):""),e=>{var t=n,r=o;return t="raw"===r.format?Z.trim(ig(t.serializer,e.innerHTML)):"text"===r.format?t.dom.isEmpty(e)?"":vo(e.innerText||e.textContent):"tree"===r.format?t.serializer.serialize(e,r):((e,t)=>{e=Ns(e),e=new RegExp(`^(<${e}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${e}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(e,"")})(t,t.serializer.serialize(e,r)),"text"!==r.format&&!uo(re(e))&&V(t)?Z.trim(t):t}))(h,e),setContent:(e,t)=>((t,r,n)=>P.from(t.getBody()).map(e=>(op(r)?(e,t,r,n)=>{Wf(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),r);var o=ug({validate:!1},e.schema).serialize(r),t=uo(re(t))?o:Z.trim(o);return ap(e,t,n.no_selection),{content:r,html:t}}:(e,t,r,n)=>{if(0===r.length||/^\s+$/.test(r)){var o='<br data-mce-bogus="1">';"TABLE"===t.nodeName?r="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(r="<li>"+o+"</li>");const a=Ns(e);return r=e.schema.isValidChild(t.nodeName.toLowerCase(),a.toLowerCase())?(r=o,e.dom.createHTML(a,As(e),r)):r||o,ap(e,r,n.no_selection),{content:r,html:r}}"raw"!==n.format&&(r=ug({validate:!1},e.schema).serialize(e.parser.parse(r,{isRootContent:!0,insert:!0})));o=uo(re(t))?r:Z.trim(r);return ap(e,o,n.no_selection),{content:o,html:o}})(t,e,r,n)).getOr({content:r,html:op(n.content)?"":n.content}))(h,e,t),insertContent:(e,t)=>np(h,e,t),addVisual:e=>{{var n=h;const o=n.dom,t=H(e)?e:n.getBody();return D(n.hasVisual)&&(n.hasVisual=_l(n)),Y(o.select("table,a",t),e=>{switch(e.nodeName){case"TABLE":var t=El(n),r=o.getAttrib(e,"border");r&&"0"!==r||!n.hasVisual?o.removeClass(e,t):o.addClass(e,t);break;case"A":o.getAttrib(e,"href")||(r=o.getAttrib(e,"name")||e.id,t=Nl(n),r&&n.hasVisual?o.addClass(e,t):o.removeClass(e,t))}}),void n.dispatch("VisualAid",{element:e,hasVisual:n.hasVisual})}}},selection:{getContent:(e,t)=>{var[r,e,t={}]=[h,e,t];return e=e,t={...t,format:e,get:!0,selection:!0,getInner:!0},Ev(r,t).fold(p,e=>{var t=((e,t)=>{if("text"===t.format)return s=e,P.from(s.selection.getRng()).map(e=>{const t=P.from(s.dom.getParent(e.commonAncestorContainer,s.dom.isBlock)),r=s.getBody(),n=t.map(e=>e.nodeName).getOr("div").toLowerCase(),o=s.dom.add(r,n,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},e.cloneContents()),a=zv(o),i=vo(o.textContent);if(s.dom.remove(o),Uv(i,0)||Uv(i,i.length-1)){const s=t.getOr(r),e=zv(s),n=e.indexOf(a);return-1===n?a:(Uv(e,n-1)?" ":"")+a+(Uv(e,n+a.length)?" ":"")}return a}).getOr("");var s,r=((e,t)=>{const r=e.selection.getRng(),n=e.dom.create("body"),o=e.selection.getSel(),a=Gm(e,iu(o)),i=t.contextual?Fv(re(e.getBody()),a).dom:r.cloneContents();return i&&n.appendChild(i),e.selection.serializer.serialize(n,t)})(e,t);return"tree"!==t.format&&e.selection.isCollapsed()?"":r})(r,e);return Nv(r,t,e)})}},autocompleter:{addDecoration:e=>Jm(h,e),removeDecoration:()=>((r,e)=>Zm(e).each(e=>{var t=r.selection.getBookmark();ln(e),r.selection.moveToBookmark(t)}))(h,re(h.getBody()))},raw:{getModel:()=>P.none()}}),Zv=e=>Q(e.plugins,"rtc"),eb=e=>e.rtcInstance||Jv(e),h=e=>{e=e.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},tb=e=>h(e).init.bindEvents(),rb=e=>0===e.dom.length?(ne(e),P.none()):P.some(e),nb=(e,r,i,s)=>{e.bind(a=>((s?sf:af)(a.dom,s?a.dom.length:0),r.filter(Qt).map(e=>{var t=i,r=s,n=a.dom,e=e.dom,o=(r?n:e).length;r?(lf(n,e,!1,!r),t.setStart(e,o)):(lf(e,n,!1,!r),t.setEnd(e,o))}))).orThunk(()=>{t=s;const e=r.filter(e=>ku.isBookmarkNode(e.dom)).bind(t?Tr:Rr).or(r).filter(Qt);var t;return e.map(e=>{var r=e,n=s;Ar(r).each(e=>{var t=r.dom;n&&Zg(e,B(t,0))?af(t,0):!n&&ef(e,B(t,t.length))&&sf(t,t.length)})})})},ob=(e,t,r)=>{var n;e&&Q(e,t)&&(0===(n=T(e[t],e=>e!==r)).length?delete e[t]:e[t]=n)},ab=e=>!(!e||!e.ownerDocument)&&Sr(re(e.ownerDocument),re(e)),ib=(l,a,e,i)=>{let s,d;const r=((r,n)=>{let a,i;const s=(t,e)=>be(e,e=>r.is(e,t)),l=e=>r.getParents(e,null,r.getRoot());return{selectorChangedWithUnbind:(e,t)=>(a||(a={},i={},n.on("NodeChange",e=>{const r=e.element,n=l(r),o={};Z.each(a,(e,r)=>{s(r,n).each(t=>{i[r]||(Y(e,e=>{e(!0,{node:t,selector:r,parents:n})}),i[r]=e),o[r]=e})}),Z.each(i,(e,t)=>{o[t]||(delete i[t],Z.each(e,e=>{e(!1,{node:r,selector:t,parents:n})}))})})),a[e]||(a[e]=[]),a[e].push(t),s(e,l(n.selection.getStart())).each(()=>{i[e]=a[e]}),{unbind:()=>{ob(a,e,t),ob(i,e,t)}})}})(l,i)["selectorChangedWithUnbind"],t=(e,t)=>{var[l,e,t={}]=[i,e,t];e=e,t={format:"html",...t,set:!0,selection:!0,content:e},Av(l,t).each(e=>{const t=((e,t)=>{if("raw"===t.format)return t.content;{const r=e.selection.getRng(),n=e.dom.getParent(r.commonAncestorContainer,e.dom.isBlock),o=n?{context:n.nodeName.toLowerCase()}:{},a=e.parser.parse(t.content,{forced_root_block:!1,...o,...t});return ug({validate:!1},e.schema).serialize(a)}})(l,e),r=l.selection.getRng();{var n=r,o=r.createContextualFragment(t);const i=P.from(o.firstChild).map(re),s=P.from(o.lastChild).map(re);n.deleteContents(),n.insertNode(o);var o=i.bind(Rr).filter(Qt).bind(rb),a=s.bind(Tr).filter(Qt).bind(rb);nb(o,i,n,!0),nb(a,s,n,!1),n.collapse(!1)}l.selection.setRng(r),wm(l,r),Rv(l,t,e)})},n=e=>{const t=u();t.collapse(!!e),o(t)},c=()=>a.getSelection?a.getSelection():a.document.selection,u=()=>{let e,t,r;const n=(e,t,r)=>{try{return t.compareBoundaryPoints(e,r)}catch(e){return-1}},o=a.document;if(void 0!==i.bookmark&&!1===Vm(i)){const l=Bm(i);if(l.isSome())return l.map(e=>Gm(i,[e])[0]).getOr(o.createRange())}try{(e=c())&&!kn(e.anchorNode)&&(t=0<e.rangeCount?e.getRangeAt(0):(e.createRange?e:o).createRange(),t=Gm(i,[t])[0])}catch(e){}return(t=t||o.createRange()).setStart&&9===t.startContainer.nodeType&&t.collapsed&&(r=l.getRoot(),t.setStart(r,0),t.setEnd(r,0)),s&&d&&(0===n(t.START_TO_START,t,s)&&0===n(t.END_TO_END,t,s)?t=d:(s=null,d=null)),t},o=(e,t)=>{var r;if((r=e)&&ab(r.startContainer)&&ab(r.endContainer)){const n=c();if(e=i.dispatch("SetSelectionRange",{range:e,forward:t}).range,n){d=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),s=0<n.rangeCount?n.getRangeAt(0):null}!e.collapsed&&e.startContainer===e.endContainer&&n.setBaseAndExtent&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&((r=e.startContainer.childNodes[e.startOffset])&&"IMG"===r.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(r,0,r,1))),i.dispatch("AfterSetSelectionRange",{range:e,forward:t})}},m=()=>{var e=c(),t=null==e?void 0:e.anchorNode,r=null==e?void 0:e.focusNode;if(!e||!t||!r||kn(t)||kn(r))return!0;const n=l.createRng(),o=(n.setStart(t,e.anchorOffset),n.collapse(!0),l.createRng());return o.setStart(r,e.focusOffset),o.collapse(!0),n.compareBoundaryPoints(n.START_TO_START,o)<=0},g={bookmarkManager:null,controlSelection:null,dom:l,win:a,serializer:e,editor:i,collapse:n,setCursorLocation:(e,t)=>{const r=l.createRng();H(e)&&H(t)?(r.setStart(e,t),r.setEnd(e,t),o(r),n(!1)):(gu(l,r,i.getBody(),!0),o(r))},getContent:e=>((e,t={})=>((e,t,r)=>h(e).selection.getContent(t,r))(e,t.format||"html",t))(i,e),setContent:t,getBookmark:(e,t)=>f.getBookmark(e,t),moveToBookmark:e=>f.moveToBookmark(e),select:(e,t)=>(((n,e,o)=>P.from(e).map(e=>{const t=n.nodeIndex(e),r=n.createRng();return r.setStart(e.parentNode,t),r.setEnd(e.parentNode,t+1),o&&(gu(n,r,e,!0),gu(n,r,e,!1)),r}))(l,e,t).each(o),e),isCollapsed:()=>{const e=u(),t=c();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:m,setNode:e=>(t(l.getOuterHTML(e)),e),getNode:()=>{{var n=i.getBody(),o=u();let e,t,r;if(!o)return n;t=o.startContainer,r=o.endContainer;var n=o.startOffset,a=o.endOffset;return e=o.commonAncestorContainer,!o.collapsed&&(t===r&&a-n<2&&t.hasChildNodes()&&(e=t.childNodes[n]),3===t.nodeType&&3===r.nodeType&&(t=t.length===n?Km(t.nextSibling,!0):t.parentNode,r=0===a?Km(r.previousSibling,!1):r.parentNode,t&&t===r))?t:e&&3===e.nodeType?e.parentNode:e}},getSel:c,setRng:o,getRng:u,getStart:e=>$m(i.getBody(),u(),e),getEnd:e=>Wm(i.getBody(),u(),e),getSelectedBlocks:(e,t)=>{{var r=l,n=u(),o=t,a;const i=[],s=r.getRoot();if(e=r.getParent(e||$m(s,n,n.collapsed),r.isBlock),o=r.getParent(o||Wm(s,n,n.collapsed),r.isBlock),e&&e!==s&&i.push(e),e&&o&&e!==o){0;const n=new Zn(e,s);for(;(a=n.next())&&a!==o;)r.isBlock(a)&&i.push(a)}return o&&e!==o&&o!==s&&i.push(o),i}},normalize:()=>{const e=u(),t=c();if(1<iu(t).length||!fu(i))return e;{const t=em(l,e);return t.each(e=>{o(e,m())}),t.getOr(e)}},selectorChanged:(e,t)=>(r(e,t),g),selectorChangedWithUnbind:r,getScrollContainer:()=>{let e,t=l.getRoot();for(;t&&"BODY"!==t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:(e,t)=>{var r,n;H(e)?(e=e,n=t,((r=i).inline?bm:Cm)(r,e,n)):wm(i,u(),t)},placeCaretAt:(e,t)=>o(Ku(e,t,i.getDoc())),getBoundingClientRect:()=>{const e=u();return e.collapsed?B.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:()=>{a=s=d=null,p.destroy()}},f=ku(g),p=Ou(g,i);return g.bookmarkManager=f,g.controlSelection=p,g},sb=(e,t,r)=>{-1===Z.inArray(t,r)&&(e.addAttributeFilter(r,(e,t)=>{let r=e.length;for(;r--;)e[r].attr(t,null)}),t.push(r))},lb=(a,i)=>{const e=["data-mce-selected"],s=i&&i.dom?i.dom:ae.DOM,l=i&&i.schema?i.schema:wa(a),d=(a.entity_encoding=a.entity_encoding||"named",a.remove_trailing_brs=!("remove_trailing_brs"in a)||a.remove_trailing_brs,Sv(a,l));return t=d,c=a,u=s,t.addAttributeFilter("data-mce-tabindex",(e,t)=>{let r=e.length;for(;r--;){const n=e[r];n.attr("tabindex",n.attr("data-mce-tabindex")),n.attr(t,null)}}),t.addAttributeFilter("src,href,style",(t,r)=>{const n="data-mce-"+r,o=c.url_converter,a=c.url_converter_scope;let i=t.length;for(;i--;){const c=t[i];let e=c.attr(n);void 0!==e?(c.attr(r,0<e.length?e:null),c.attr(n,null)):(e=c.attr(r),"style"===r?e=u.serializeStyle(u.parseStyle(e),c.name):o&&(e=o.call(a,e,r,c.name)),c.attr(r,0<e.length?e:null))}}),t.addAttributeFilter("class",e=>{let t=e.length;for(;t--;){const n=e[t];var r;n.attr("class")&&(r=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",0<r.length?r:null))}}),t.addAttributeFilter("data-mce-type",(e,t,r)=>{let n=e.length;for(;n--;){const t=e[n];if("bookmark"===t.attr("data-mce-type")&&!r.cleanup){const e=P.from(t.firstChild).exists(e=>!ho(e.value));e?t.unwrap():t.remove()}}}),t.addNodeFilter("noscript",e=>{let t=e.length;for(;t--;){const r=e[t].firstChild;r&&(r.value=ua.decode(r.value))}}),t.addNodeFilter("script,style",(e,t)=>{var r=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let n=e.length;for(;n--;){const o=e[n],a=o.firstChild?o.firstChild.value:"";if("script"===t){const e=o.attr("type");e&&o.attr("type","mce-no/type"===e?null:e.replace(/^mce\-/,"")),"xhtml"===c.element_format&&0<a.length&&(o.firstChild.value="// <![CDATA[\n"+r(a)+"\n// ]]>")}else"xhtml"===c.element_format&&0<a.length&&(o.firstChild.value="\x3c!--\n"+r(a)+"\n--\x3e")}}),t.addNodeFilter("#comment",e=>{let t=e.length;for(;t--;){const r=e[t];c.preserve_cdata&&0===r.value.indexOf("[CDATA[")?(r.name="#cdata",r.type=4,r.value=u.decode(r.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===r.value.indexOf("mce:protected ")&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(r.value).substr(14))}}),t.addNodeFilter("xml:namespace,input",(e,t)=>{let r=e.length;for(;r--;){const n=e[r];7===n.type?n.remove():1!==n.type||"input"!==t||n.attr("type")||n.attr("type","text")}}),t.addAttributeFilter("data-mce-type",e=>{Y(e,e=>{"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(t.schema.getNonEmptyElements())?e.remove():e.unwrap())})}),t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",(e,t)=>{let r=e.length;for(;r--;)e[r].attr(t,null)}),{schema:l,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,serialize:(e,t={})=>{var r,n,o,t={format:"html",...t},e=((r,n,o)=>{if((e=>r&&r.hasEventListeners("PreProcess")&&!e.no_events)(o)){var a=r,i=n;let e;const s=a.dom;let t=i.cloneNode(!0);const l=document.implementation;if(l.createHTMLDocument){const a=l.createHTMLDocument("");Z.each("BODY"===t.nodeName?t.childNodes:[t],e=>{a.body.appendChild(a.importNode(e,!0))}),t="BODY"!==t.nodeName?a.body.firstChild:a.body,e=s.doc,s.doc=a}return i=a,a={...o,node:t},i.dispatch("PreProcess",a),e&&(s.doc=e),t}return n})(i,e,t),e=((e,t,r)=>{e=vo(r.getInner?t.innerHTML:e.getOuterHTML(t));return r.selection||uo(re(t))?e:Z.trim(e)})(s,e,t),e=((e,t,r)=>{r=r.selection?{forced_root_block:!1,...r}:r,e=e.parse(t,r);{var n=e;const o=e=>e&&"br"===e.name,a=n.lastChild;if(o(a)){const n=a.prev;o(n)&&(a.remove(),n.remove())}}return e})(d,e,t);return"tree"===t.format?e:(r=i,n=a,o=l,t=t,n=n,o=o,e=e,n=ug(n,o).serialize(e),o=n,!t.no_events&&r?(e=r,n={...t,content:o},e.dispatch("PostProcess",n).content):o)},addRules:l.addValidElements,setRules:l.setValidElements,addTempAttr:N(sb,d,e),getTempAttrs:W(e),getNodeFilters:d.getNodeFilters,getAttributeFilters:d.getAttributeFilters};var t,c,u},db=(e,t)=>{e=lb(e,t);return{schema:e.schema,addNodeFilter:e.addNodeFilter,addAttributeFilter:e.addAttributeFilter,serialize:e.serialize,addRules:e.addRules,setRules:e.setRules,addTempAttr:e.addTempAttr,getTempAttrs:e.getTempAttrs,getNodeFilters:e.getNodeFilters,getAttributeFilters:e.getAttributeFilters}},cb=(o,e,t={})=>{r=e;var r,t={format:"html",...t,set:!0,content:r};return Av(o,t).map(e=>{n=o,t=e.content,r=e;var t,r,n=eb(n).editor.setContent(t,r);return Rv(o,n.html,e),n.content}).getOr(e)},ub="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),mb="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),gb=ae.DOM,fb=e=>P.from(e).each(e=>e.destroy()),pb=(()=>{const r={};return{add:(e,t)=>{r[e]=t},get:e=>r[e]||{icons:{}},has:e=>Q(r,e)}})(),hb=$a.ModelManager,vb=(e,t)=>t.dom[e],bb=(e,t)=>parseInt(Xr(t,e),10),yb=N(vb,"clientWidth"),Cb=N(vb,"clientHeight"),wb=N(bb,"margin-top"),xb=N(bb,"margin-left"),kb=n=>{const o=[],a=()=>{const e=n.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():{open:t=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")},close:t,getArgs:t};var t},i=()=>P.from(o[0]),s=()=>{Y(o,e=>{e.reposition()})},l=t=>{ye(o,e=>e===t).each(e=>{o.splice(e,1)})},t=(r,e=!0)=>{if(!n.removed&&(t=(t=n).inline?t.getBody():t.getContentAreaContainer(),P.from(t).map(re).map(Wr).getOr(!1)))return e&&n.dispatch("BeforeOpenNotification",{notification:r}),be(o,e=>{return!((e=a().getArgs(e)).type!==r.type||e.text!==r.text||e.progressBar||e.timeout||r.progressBar||r.timeout)}).getOrThunk(()=>{n.editorManager.setActive(n);const e=a().open(r,()=>{l(e),s(),i().fold(()=>n.focus(),e=>xm(re(e.getEl())))});return t=e,o.push(t),s(),n.dispatch("OpenNotification",{notification:{...e}}),e;var t});var t},e=W(o);return(r=n).on("SkinLoaded",()=>{var e=nl(r);e&&t({text:e,type:"warning",timeout:0},!1),s()}),r.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(s)}),r.on("remove",()=>{Y(o.slice(),e=>{a().close(e)})}),{open:t,close:()=>{i().each(e=>{a().close(e),l(e),s()})},getNotifications:e};var r},Sb=$a.PluginManager,_b=$a.ThemeManager,Eb=r=>{let n=[];const o=()=>{const e=r.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():{open:t=()=>{throw new Error("Theme did not provide a WindowManager implementation.")},openUrl:t,alert:t,confirm:t,close:t,getParams:t,setParams:t};var t},a=(t,r)=>(...e)=>r?r.apply(t,e):void 0,i=t=>{r.dispatch("CloseWindow",{dialog:t}),0===(n=T(n,e=>e!==t)).length&&r.focus()},s=e=>{r.editorManager.setActive(r),Om(r),r.ui.show();var t,e=e();return t=e,n.push(t),r.dispatch("OpenWindow",{dialog:t}),e};return r.on("remove",()=>{Y(n,e=>{o().close(e)})}),{open:(e,t)=>s(()=>o().open(e,t,i)),openUrl:e=>s(()=>o().openUrl(e,i)),alert:(e,t,r)=>{const n=o();n.alert(e,a(r||n,t))},confirm:(e,t,r)=>{const n=o();n.confirm(e,a(r||n,t))},close:()=>{P.from(n[n.length-1]).each(e=>{o().close(e),i(e)})}}},Nb=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Ab=(e,t)=>{e._skinLoaded?Nb(e,t):e.on("SkinLoaded",()=>{Nb(e,t)})},Rb=(e,t,r)=>{_u(e,t,{message:r}),console.error(r)},Tb=(e,t,r)=>r?`Failed to load ${e}: ${r} from url `+t:`Failed to load ${e} url: `+t,Ob=(e,...t)=>{const r=window.console;r&&(r.error?r.error(e,...t):r.log(e,...t))},Bb=(t,e)=>{const r=t.editorManager.baseURL+"/skins/content",n=`content${t.editorManager.suffix}.css`,o=!0===t.inline;return C(e,e=>/^[a-z0-9\-]+$/i.test(e)&&!o?r+`/${e}/`+n:t.documentBaseURI.toAbsolute(e))},Pb=y,Db=()=>{let r={};const n=(e,t)=>({status:e,resultUri:t}),t=e=>e in r;return{hasBlobUri:t,getResultUri:e=>{e=r[e];return e?e.resultUri:null},isPending:e=>!!t(e)&&1===r[e].status,isUploaded:e=>!!t(e)&&2===r[e].status,markPending:e=>{r[e]=n(1,null)},markUploaded:(e,t)=>{r[e]=n(2,t)},removeFailed:e=>{delete r[e]},destroy:()=>{r={}}}};let Lb=0;const Mb=(l,i)=>{const n={},r=(t,a)=>new Promise((r,n)=>{const o=new XMLHttpRequest,e=(o.open("POST",i.url),o.withCredentials=i.credentials,o.upload.onprogress=e=>{a(e.loaded/e.total*100)},o.onerror=()=>{n("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=()=>{var e,t;o.status<200||300<=o.status?n("HTTP Error: "+o.status):(t=JSON.parse(o.responseText))&&V(t.location)?r((e=i.basePath,t=t.location,e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t)):n("Invalid JSON: "+o.responseText)},new FormData);e.append("file",t.blob(),t.filename()),o.send(e)}),d=(e,t)=>({url:t,blobInfo:e,status:!0}),c=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),u=(e,t)=>{Z.each(n[e],e=>{e(t)}),delete n[e]};return!1===q(i.handler)&&(i.handler=r),{upload:(e,t)=>i.url||i.handler!==r?((e,r)=>(e=Z.grep(e,e=>!l.isUploaded(e.blobUri())),Promise.all(Z.map(e,e=>{if(l.isPending(e.blobUri())){const t=e.blobUri();return new Promise(e=>{n[t]=n[t]||[],n[t].push(e)})}return((a,i,s)=>(l.markPending(a.blobUri()),new Promise(t=>{let r,e;try{const n=()=>{r&&(r.close(),e=$)},o=e=>{n(),l.markUploaded(a.blobUri(),e),u(a.blobUri(),d(a,e)),t(d(a,e))};e=t=>{t<0||100<t||P.from(r).orThunk(()=>P.from(s).map(F)).each(e=>{(r=e).progressBar.value(t)})},i(a,e).then(o,e=>{e=V(e)?{message:e}:e,n(),l.removeFailed(a.blobUri()),u(a.blobUri(),c(a,e)),t(c(a,e))})}catch(e){t(c(a,e))}})))(e,i.handler,r)}))))(e,t):new Promise(e=>{e([])})}},Ib=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Fb=(e,t)=>Mb(t,{url:Fs(e),basePath:Us(e),credentials:zs(e),handler:js(e)}),Ub=d=>{const c=(()=>{let r=[];const a=e=>{if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var t=e.id||"blobid"+Lb+++(t=()=>Math.round(4294967295*Math.random()).toString(36),"s"+(new Date).getTime().toString(36)+t()+t()+t()),r=e.name||t,n=e.blob;return{id:W(t),name:W(r),filename:W(e.filename||r+"."+({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[n.type.toLowerCase()]||"dat")),blob:W(n),base64:W(e.base64),blobUri:W(e.blobUri||URL.createObjectURL(n)),uri:W(e.uri)}},e=e=>be(r,e).getOrUndefined(),t=t=>e(e=>e.id()===t);return{create:(e,t,r,n,o)=>{if(V(e))return a({id:e,name:n,filename:o,blob:t,base64:r});if(se(e))return a(e);throw new Error("Unknown input type")},add:e=>{t(e.id())||r.push(e)},get:t,getByUri:t=>e(e=>e.blobUri()===t),getByData:(t,r)=>e(e=>e.base64()===t&&e.blob().type===r),findFirst:e,removeByUri:t=>{r=T(r,e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1))},destroy:()=>{Y(r,e=>{URL.revokeObjectURL(e.blobUri())}),r=[]}}})();let t,e;const o=Db(),r=[],n=(r=>{const n=za(null);return r.on("change AddUndo",e=>{n.set({...e.level})}),{fireIfChanged:()=>{const t=r.undoManager.data;Re(t).filter(e=>!Gv(n.get(),e)).each(e=>{r.setDirty(!0),r.dispatch("change",{level:e,lastLevel:Ne(t,t.length-2).getOrNull()})})}}})(d),a=t=>e=>d.selection?t(e):[],i=(e,t,r)=>{let n=0;for(;-1!==(n=e.indexOf(t,n))&&(e=e.substring(0,n)+r+e.substr(n+t.length),n+=r.length-t.length+1),-1!==n;);return e},s=(e,t,r)=>{var n=`src="${r}"`+(r===J.transparentSrc?' data-mce-placeholder="1"':"");return e=i(e,`src="${t}"`,n),i(e,'data-mce-src="'+t+'"','data-mce-src="'+r+'"')},u=(t,r)=>{Y(d.undoManager.data,e=>{"fragmented"===e.type?e.fragments=C(e.fragments,e=>s(e,t,r)):e.content=s(e.content,t,r)})},l=()=>(t=t||Fb(d,o),f().then(a(l=>{var e=C(l,e=>e.blobInfo);return t.upload(e,Ib(d)).then(a(e=>{const s=[],t=C(e,(e,t)=>{const r=l[t].blobInfo,n=l[t].image;let o=!1;return e.status&&Ls(d)?(c.removeByUri(n.src),Zv(d)||(t=n,a=e.url,i=d.convertURL(a,"src"),u(t.src,a),rr(re(t),{src:Ds(d)?a+(-1===a.indexOf("?")?"?":"&")+(new Date).getTime():a,"data-mce-src":i}))):e.error&&(e.error.remove&&(u(n.getAttribute("src"),J.transparentSrc),s.push(n),o=!0),t=d,a=e.error.message,Ab(t,qa.translate(["Failed to upload image: {0}",a]))),{element:n,status:e.status,uploadUri:e.url,blobInfo:r,removed:o};var a,i});return 0<t.length&&n.fireIfChanged(),0<s.length&&!Zv(d)&&d.undoManager.transact(()=>{Y(s,e=>{d.dom.remove(e),c.removeByUri(e.src)})}),t}))}))),m=()=>Ps(d)?l():Promise.resolve([]),g=t=>xe(r,e=>e(t)),f=()=>(e=e||((n,d)=>{const o={};return{findAll:(e,r)=>{r=r||y;e=T((e=e)?Te(e.getElementsByTagName("img")):[],e=>{const t=e.src;return!e.hasAttribute("data-mce-bogus")&&!e.hasAttribute("data-mce-placeholder")&&!(!t||t===J.transparentSrc)&&(0===t.indexOf("blob:")?!n.isUploaded(t)&&r(e):0===t.indexOf("data:")&&r(e))}),e=C(e,l=>{if(void 0!==o[l.src])return new Promise(t=>{o[l.src].then(e=>{if("string"==typeof e)return e;t({image:l,blobInfo:e.blobInfo})})});var e=new Promise((e,t)=>{{var o=d,a=l,i=e,s=t;let r,n;return void(0===a.src.indexOf("blob:")?(n=o.getByUri(a.src))?i({image:a,blobInfo:n}):ov(a.src).then(t=>{av(t).then(e=>{r=rv(e).data,n=o.create(sv(),t,r),o.add(n),i({image:a,blobInfo:n})})},e=>{s(e)}):({data:e,type:t}=rv(a.src),r=e,(n=o.getByData(r,t))?i({image:a,blobInfo:n}):ov(a.src).then(e=>{n=o.create(sv(),e,r),o.add(n),i({image:a,blobInfo:n})},e=>{s(e)})))}}).then(e=>(delete o[e.image.src],e)).catch(e=>(delete o[l.src],e));return o[l.src]=e});return Promise.all(e)}}})(o,c)).findAll(d.getBody(),g).then(a(e=>(e=T(e,e=>"string"!=typeof e||(Ab(d,e),!1)),Zv(d)||Y(e,e=>{u(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),e))),p=e=>e.replace(/src="(blob:[^"]+)"/g,(e,r)=>{var t=o.getResultUri(r);if(t)return'src="'+t+'"';let n=c.getByUri(r);return(n=n||he(d.editorManager.get(),(e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(r),null))?'src="data:'+n.blob().type+";base64,"+n.base64()+'"':e});return d.on("SetContent",()=>{(Ps(d)?m:f)()}),d.on("RawSaveContent",e=>{e.content=p(e.content)}),d.on("GetContent",e=>{e.source_view||"raw"===e.format||"tree"===e.format||(e.content=p(e.content))}),d.on("PostRender",()=>{d.parser.addNodeFilter("img",e=>{Y(e,e=>{var t=e.attr("src");c.getByUri(t)||(t=o.getResultUri(t))&&e.attr("src",t)})})}),{blobCache:c,addFilter:e=>{r.push(e)},uploadImages:l,uploadImagesAuto:m,scanForImages:f,destroy:()=>{c.destroy(),o.destroy(),e=t=null}}},zb={remove_similar:!0,inherit:!1},jb={selector:"td,th",...zb},Vb={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...jb},tablecellverticalalign:{styles:{"vertical-align":"%value"},...jb},tablecellbordercolor:{styles:{borderColor:"%value"},...jb},tablecellclass:{classes:["%value"],...jb},tableclass:{selector:"table",classes:["%value"],...zb},tablecellborderstyle:{styles:{borderStyle:"%value"},...jb},tablecellborderwidth:{styles:{borderWidth:"%value"},...jb}},Hb=W(Vb),qb=Z.each,$b=ae.DOM,Wb=(e,t)=>{let r,n,o;const l=t&&t.schema||wa({}),d=e=>{n="string"==typeof e?{name:e,classes:[],attrs:{}}:e;var t,r,e=$b.create(n.name);return t=e,(r=n).classes.length&&$b.addClass(t,r.classes.join(" ")),$b.setAttribs(t,r.attrs),e},c=(t,e,r)=>{let n,o;var a=0<e.length&&e[0],i=a&&a.name,s=((e,t)=>{e="string"!=typeof e?e.nodeName.toLowerCase():e,e=l.getElementRule(e),e=e&&e.parentsRequired;return!(!e||!e.length)&&(t&&-1!==Z.inArray(e,t)?t:e[0])})(t,i);if(s)i===s?(o=e[0],e=e.slice(1)):o=s;else if(a)o=e[0],e=e.slice(1);else if(!r)return t;return o&&(n=d(o)).appendChild(t),r&&(n||(n=$b.create("div")).appendChild(t),Z.each(r,e=>{e=d(e);n.insertBefore(e,t)})),c(n,e,o&&o.siblings)};return e&&e.length?(n=e[0],r=d(n),(o=$b.create("div")).appendChild(c(r,e.slice(1),n.siblings)),o):""},Kb=e=>{let t;const a={classes:[],attrs:{}};return"*"!==(e=a.selector=Z.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(e,t,r,n,o)=>{switch(t){case"#":a.attrs.id=r;break;case".":a.classes.push(r);break;case":":-1!==Z.inArray("checked disabled enabled read-only required".split(" "),r)&&(a.attrs[r]=r)}if("["===n){const e=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);e&&(a.attrs[e[1]]=e[2])}return""})),a.name=t||"div",a},Gb=(r,e)=>{let t,n,o,a="",i=cl(r);if(""===i)return"";const s=e=>e.replace(/%(\w+)/g,"");if("string"==typeof e){if(!(e=r.formatter.get(e)))return;e=e[0]}if("preview"in e){const r=R(e,"preview");if($t(r,!1))return"";i=r.getOr(i)}t=e.block||e.inline||"span";const l=(d=e.selector)&&"string"==typeof d?(d=(d=d.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Z.map(d.split(/(?:>|\s+(?![^\[\]]+\]))/),e=>{const t=Z.map(e.split(/(?:~\+|~|\+)/),Kb),r=t.pop();return t.length&&(r.siblings=t),r}).reverse()):[];var d;n=l.length?(l[0].name||(l[0].name=t),t=e.selector,Wb(l,r)):Wb([t],r);const c=$b.select(t,n)[0]||n.firstChild;return qb(e.styles,(e,t)=>{e=s(e);e&&$b.setStyle(c,t,e)}),qb(e.attributes,(e,t)=>{e=s(e);e&&$b.setAttrib(c,t,e)}),qb(e.classes,e=>{e=s(e);$b.hasClass(c,e)||$b.addClass(c,e)}),r.dispatch("PreviewFormats"),$b.setStyles(n,{position:"absolute",left:-65535}),r.getBody().appendChild(n),o=$b.getStyle(r.getBody(),"fontSize",!0),o=/px$/.test(o)?parseInt(o,10):0,qb(i.split(" "),e=>{let t=$b.getStyle(c,e,!0);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=$b.getStyle(r.getBody(),e,!0),"#ffffff"===Nc(t).toLowerCase())||"color"===e&&"#000000"===Nc(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===o)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*o+"px"}"border"===e&&t&&(a+="padding:0 2px;"),a+=e+":"+t+";"}}),r.dispatch("AfterPreviewFormats"),$b.remove(n),a},Yb=a=>{const e=(i=>{const r={},n=(e,t)=>{e&&(V(e)?(le(t)||(t=[t]),Y(t,e=>{D(e.deep)&&(e.deep=!jc(e)),D(e.split)&&(e.split=!jc(e)||Vc(e)),D(e.remove)&&jc(e)&&!Vc(e)&&(e.remove="none"),jc(e)&&Vc(e)&&(e.mixed=!0,e.block_expand=!0),V(e.classes)&&(e.classes=e.classes.split(/\s+/))}),r[e]=t):X(e,(e,t)=>{n(t,e)}))};return n((()=>{const n=i.dom,e=i.schema.type,t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{n.setStyle(e,"float",null)},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{n.setStyle(e,"float",null)},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(r={inline:"span",styles:{textDecoration:"line-through"},exact:!0},o={inline:"strike",remove:"all",preserve_attributes:["class","style"]},a={inline:"s",remove:"all",preserve_attributes:["class","style"]},"html4"!==e?[a,r,o]:[r,a,o]),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e,t,r)=>oe(e)&&e.hasAttribute("href"),onformat:(r,e,t)=>{Z.each(t,(e,t)=>{n.setAttrib(r,t,e)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{return null!=(e=null==e?void 0:e.customValue)?e:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};var r,o,a;return Z.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),e=>{t[e]={block:e,remove:"all"}}),t})()),n(Hb()),n(dl(i)),{get:e=>H(e)?r[e]:r,has:e=>Q(r,e),register:n,unregister:e=>(e&&r[e]&&delete r[e],r)}})(a),o=za(null);var i,t=a;t.addShortcut("meta+b","","Bold"),t.addShortcut("meta+i","","Italic"),t.addShortcut("meta+u","","Underline");for(let e=1;e<=6;e++)t.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);return t.addShortcut("access+7","",["FormatBlock",!1,"p"]),t.addShortcut("access+8","",["FormatBlock",!1,"div"]),t.addShortcut("access+9","",["FormatBlock",!1,"address"]),(i=a).on("mouseup keydown",e=>{{var t=i;e=e.keyCode;const r=t.selection,n=t.getBody();return xp(t,null,!1),8!==e&&46!==e||!r.isCollapsed()||r.getStart().innerHTML!==hp||xp(t,lc(n,r.getStart())),void(37!==e&&39!==e||xp(t,lc(n,r.getStart())))}}),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(e,t,r)=>{var n;n=a,e=e,t=t,r=r,h(n).formatter.apply(e,t,r)},remove:(e,t,r,n)=>{var o;o=a,e=e,t=t,r=r,n=n,h(o).formatter.remove(e,t,r,n)},toggle:(e,t,r)=>{var n;n=a,e=e,t=t,r=r,h(n).formatter.toggle(e,t,r)},match:(e,t,r,n)=>((e,t,r,n,o)=>h(e).formatter.match(t,r,n,o))(a,e,t,r,n),closest:e=>((e,t)=>h(e).formatter.closest(t))(a,e),matchAll:(e,t)=>((e,t,r)=>h(e).formatter.matchAll(t,r))(a,e,t),matchNode:(e,t,r,n)=>((e,t,r,n,o)=>h(e).formatter.matchNode(t,r,n,o))(a,e,t,r,n),canApply:e=>((e,t)=>h(e).formatter.canApply(t))(a,e),formatChanged:(e,t,r,n)=>((e,t,r,n,o,a)=>h(e).formatter.formatChanged(t,r,n,o,a))(a,o,e,t,r,n),getCssText:N(Gb,a)}},Xb=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Qb=a=>{const n=Wa(),o=za(0),i=za(0),s={data:[],typing:!1,beforeChange:()=>{var e,t,r;e=a,t=o,r=n,h(e).undoManager.beforeChange(t,r)},add:(e,t)=>((e,t,r,n,o,a,i)=>h(e).undoManager.add(t,r,n,o,a,i))(a,s,i,o,n,e,t),undo:()=>((e,t,r,n)=>h(e).undoManager.undo(t,r,n))(a,s,o,i),redo:()=>((e,t,r)=>h(e).undoManager.redo(t,r))(a,i,s.data),clear:()=>{var e,t,r;e=a,t=s,r=i,h(e).undoManager.clear(t,r)},reset:()=>{var e,t;e=a,t=s,h(e).undoManager.reset(t)},hasUndo:()=>((e,t,r)=>h(e).undoManager.hasUndo(t,r))(a,s,i),hasRedo:()=>((e,t,r)=>h(e).undoManager.hasRedo(t,r))(a,s,i),transact:e=>((e,t,r,n)=>h(e).undoManager.transact(t,r,n))(a,s,o,e),ignore:e=>{var t,r;t=a,r=o,e=e,h(t).undoManager.ignore(r,e)},extra:(e,t)=>{var r,n,o;r=a,n=s,o=i,e=e,t=t,h(r).undoManager.extra(n,o,e,t)}};if(!Zv(a)){var r=a,l=s,d=o;const c=za(!1),u=e=>{Xv(l,!1,d),l.add({},e)};r.on("init",()=>{l.add()}),r.on("BeforeExecCommand",e=>{e=e.command;Xb(e)||(Qv(l,d),l.beforeChange())}),r.on("ExecCommand",e=>{var t=e.command;Xb(t)||u(e)}),r.on("ObjectResizeStart cut",()=>{l.beforeChange()}),r.on("SaveContent ObjectResized blur",u),r.on("dragend",u),r.on("keyup",e=>{var t=e.keyCode;e.isDefaultPrevented()||((33<=t&&t<=36||37<=t&&t<=40||45===t||e.ctrlKey)&&(u(),r.nodeChanged()),46!==t&&8!==t||r.nodeChanged(),c.get()&&l.typing&&!1===Gv(qv(r),l.data[0])&&(!1===r.isDirty()&&r.setDirty(!0),r.dispatch("TypingUndo"),c.set(!1),r.nodeChanged()))}),r.on("keydown",e=>{var t,r=e.keyCode;e.isDefaultPrevented()||(33<=r&&r<=36||37<=r&&r<=40||45===r?l.typing&&u(e):(t=e.ctrlKey&&!e.altKey||e.metaKey,!(r<16||20<r)||224===r||91===r||l.typing||t||(l.beforeChange(),Xv(l,!0,d),l.add({},e),c.set(!0))))}),r.on("mousedown",e=>{l.typing&&u(e)}),r.on("input",e=>{e.inputType&&("insertReplacementText"===e.inputType||"insertText"===e.inputType&&null===e.data||"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType)&&u(e)}),r.on("AddUndo Undo Redo ClearUndos",e=>{e.isDefaultPrevented()||r.nodeChanged()})}return(e=a).addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),s;var e},Jb=[9,27,ie.HOME,ie.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ie.DOWN,ie.UP,ie.LEFT,ie.RIGHT].concat(J.browser.isFirefox()?[224]:[]),Zb="data-mce-placeholder",ey=e=>"keydown"===e.type||"keyup"===e.type,ty=e=>{e=e.keyCode;return e===ie.BACKSPACE||e===ie.DELETE},ry=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ny=(e,t)=>xr(re(t),Js(e)),oy=(e,t,r)=>{e=e,t=t,r=r;r=T(ae.DOM.getParents(r.container(),"*",t),e);return P.from(r[r.length-1])},ay=(e,t)=>{if(!t)return t;var r=t.container(),n=t.offset();return e?wo(r)?O(r.nextSibling)?B(r.nextSibling,0):B.after(r):So(t)?B(r,n+1):t:wo(r)?O(r.previousSibling)?B(r.previousSibling,r.previousSibling.data.length):B.before(r):_o(t)?B(r,n-1):t},iy=N(ay,!0),sy=N(ay,!1),ly=(e,t)=>{var r=e=>e.stopImmediatePropagation();e.on("beforeinput input",r,!0),e.getDoc().execCommand(t),e.off("beforeinput input",r)},dy=e=>ly(e,"Delete"),cy=e=>ao(e)||so(e),uy=(e,t)=>Sr(e,t)?Kn(t,cy,(t=>e=>S(t,re(e.dom.parentNode)))(e)):P.none(),my=e=>{var t;e.dom.isEmpty(e.getBody())&&(e.setContent(""),t=(t=(e=e).getBody()).firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t,e.selection.setCursorLocation(t,0))},gy=(e,t)=>({from:e,to:t}),fy=(e,t)=>{var e=re(e),r=re(t.container());return uy(e,r).map(e=>({block:e,position:t}))},py=e=>{e=(e=>{const t=Pr(e);return ye(t,ro).fold(W(t),e=>t.slice(0,e))})(e);return Y(e,ne),e},hy=(e,t)=>{const r=Pg(t,e);return be(r.reverse(),e=>Go(e)).each(ne)},vy=(e,t,r,n)=>{if(Go(r))return Tg(r),oc(r.dom);0===T(Or(n),e=>!Go(e)).length&&Go(t)&&tn(n,te("br"));r=nc(r.dom,B.before(n.dom));return Y(py(t),e=>{tn(n,e)}),hy(e,t),r},by=(e,t,r)=>{if(Go(r))return ne(r),Go(t)&&Tg(t),oc(t.dom);var n=ac(r.dom);return Y(py(t),e=>{on(r,e)}),hy(e,t),n},yy=(e,t)=>{tc(e,t.dom).map(e=>e.getNode()).map(re).filter(oo).each(ne)},Cy=(e,t,r)=>(yy(!0,t),yy(!1,r),((e,t)=>{return Sr(t,e)?(e=Pg(e,t),P.from(e[e.length-1])):P.none()})(t,r).fold(N(by,e,t,r),N(vy,e,t,r))),wy=(e,t,r,n)=>t?Cy(e,n,r):Cy(e,r,n),xy=(t,r)=>{const n=re(t.getBody()),e=((e,t,r)=>{if(r.collapsed){var n=e,o=t,e=r;const a=fy(n,B.fromRangeStart(e)),i=a.bind(e=>Jd(o,n,e.position).bind(e=>fy(n,e).map(e=>((t,r,n)=>x(n.position.getNode())&&!1===Go(n.block)?tc(!1,n.block.dom).bind(e=>e.isEqual(n.position)?Jd(r,t,e).bind(e=>fy(t,e)):P.some(n)).getOr(n):n)(n,o,e))));return Wt(a,i,gy).filter(e=>(e=>!1===S(e.from.block,e.to.block))(e)&&(e=>Ar(e.from.block).bind(t=>Ar(e.to.block).filter(e=>S(t,e))).isSome())(e)&&(e=>!1===_(e.from.block.dom)&&!1===_(e.to.block.dom))(e))}return P.none()})(n.dom,r,t.selection.getRng()).map(e=>()=>{wy(n,r,e.from.block,e.to.block).each(e=>{t.selection.setRng(e.toRange())})});return e},ky=(e,t)=>{t=re(t),e=N(S,e);return Wn(t,co,e).isSome()},Sy=(e,t)=>{if(e.selection.isCollapsed())return P.none();var r,n,o,a,i,s=re(e.getBody());if(n=s,o=e.selection.getRng(),a=nc(n.dom,B.fromRangeStart(o)).isNone(),i=rc(n.dom,B.fromRangeEnd(o)).isNone(),n=n,o=o,!ky(n,o.startContainer)&&!ky(n,o.endContainer)&&a&&i)return r=e,P.some(()=>{r.setContent(""),r.selection.setCursorLocation()});{var l=s,d=e.selection;const c=d.getRng();return Wt(uy(l,re(c.startContainer)),uy(l,re(c.endContainer)),(e,t)=>!1===S(e,t)?P.some(()=>{c.deleteContents(),wy(l,!0,e,t).each(e=>{d.setRng(e.toRange())})}):P.none()).getOr(P.none())}},_y=In,Ey=_,Ny=(e,t,r,n,o)=>P.from(t._selectionOverrides.showCaret(e,r,n,o)),Ay=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?P.none():P.some((e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t})(t)),Ry=(e,t,r)=>t.collapsed?((e,t,r)=>{const n=Bd(1,e.getBody(),t),o=B.fromRangeStart(n),a=o.getNode();if(ud(a))return Ny(1,e,a,!o.isAtEnd(),!1);t=o.getNode(!0);if(ud(t))return Ny(1,e,t,!1,!1);t=e.dom.getParent(o.getNode(),e=>Ey(e)||_y(e));return ud(t)?Ny(1,e,t,!1,r):P.none()})(e,t,r).getOr(t):t,Ty=e=>Ag(e)||Sg(e),Oy=e=>Rg(e)||_g(e),By=(t,r,e,n,o,a)=>{Ny(n,t,a.getNode(!o),o,!0).each(e=>{if(r.collapsed){const t=r.cloneRange();o?t.setEnd(e.startContainer,e.startOffset):t.setStart(e.endContainer,e.endOffset),t.deleteContents()}else r.deleteContents();t.selection.setRng(e)}),n=t.dom,a=e,O(a)&&0===a.data.length&&n.remove(a)},Py=(e,t)=>{{var r=e,n=t;const o=r.selection.getRng();if(!O(o.commonAncestorContainer))return P.none();const a=n?qn.Forwards:qn.Backwards,i=Gd(r.getBody()),s=N(Md,n?i.next:i.prev),l=n?Ty:Oy,d=Dd(a,r.getBody(),o),c=ay(n,s(d));if(!c||!Id(d,c))return P.none();if(l(c))return P.some(()=>By(r,o,d.getNode(),a,n,c));const u=s(c);return u&&l(u)&&Id(c,u)?P.some(()=>By(r,o,d.getNode(),a,n,u)):P.none()}},Dy=ds([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Ly=(o,a,i)=>Jd(a,o,i).bind(e=>{{if(r=e.getNode(),co(re(r))||so(re(r))||((t,e,r,n)=>{const o=e=>no(re(e))&&!Ed(r,n,t);return Pd(!e,r).fold(()=>Pd(e,n).fold(A,o),o)})(o,a,i,e))return P.none();if(a&&_(e.getNode())||!1===a&&_(e.getNode(!0))){r=o;var t=i;const n=e.getNode(!1===a);return uy(re(r),re(t.getNode())).map(e=>Go(e)?Dy.remove(e.dom):Dy.moveToElement(n)).orThunk(()=>P.some(Dy.moveToElement(n)))}return a&&Rg(i)||!1===a&&Ag(i)?P.some(Dy.moveToPosition(e)):P.none()}var r}),My=(e,t)=>P.from(Vf(e.getBody(),t)),Iy=(t,r)=>{var e=t.selection.getNode();return My(t,e).filter(_).fold(()=>((e,t,r)=>{const n=Bd(t?1:-1,e,r),o=B.fromRangeStart(n),a=re(e);return!1===t&&Rg(o)?P.some(Dy.remove(o.getNode(!0))):t&&Ag(o)?P.some(Dy.remove(o.getNode())):!1===t&&Ag(o)&&$g(a,o)?Wg(a,o).map(e=>Dy.remove(e.getNode())):t&&Rg(o)&&qg(a,o)?Kg(a,o).map(e=>Dy.remove(e.getNode())):(i=e,s=t,l=o,(e=>{const t=l.getNode(!1===e),r=e?"after":"before";return oe(t)&&t.getAttribute("data-mce-caret")===r})(s)?((e,t)=>e&&_(t.nextSibling)?P.some(Dy.moveToElement(t.nextSibling)):!1===e&&_(t.previousSibling)?P.some(Dy.moveToElement(t.previousSibling)):P.none())(s,l.getNode(!1===s)).fold(()=>Ly(i,s,l),P.some):Ly(i,s,l).bind(e=>((t,r)=>e.fold(e=>P.some(Dy.remove(e)),e=>P.some(Dy.moveToElement(e)),e=>Ed(r,e,t)?P.none():P.some(Dy.moveToPosition(e))))(i,l)));var i,s,l})(t.getBody(),r,t.selection.getRng()).map(e=>()=>e.fold(((t,r)=>e=>(t._selectionOverrides.hideFakeCaret(),hf(t,r,re(e)),!0))(t,r),((r,n)=>e=>{const t=n?B.before(e):B.after(e);return r.selection.setRng(t.toRange()),!0})(t,r),(t=>e=>(t.selection.setRng(e.toRange()),!0))(t))),()=>P.some($))},Fy=e=>{const t=e.dom,r=e.selection,n=Vf(e.getBody(),r.getNode());if(In(n)&&t.isBlock(n)&&t.isEmpty(n)){const e=t.create("br",{"data-mce-bogus":"1"});t.setHTML(n,""),n.appendChild(e),r.setRng(B.before(e).toRange())}return!0},Uy=(e,t)=>(e.selection.isCollapsed()?Iy:(t,r)=>{var e=t.selection.getNode();return _(e)&&!Fn(e)?My(t,e.parentNode).filter(_).fold(()=>P.some(()=>{var e=re(t.getBody());Y(Xa(e,".mce-offscreen-selection"),ne),hf(t,r,re(t.selection.getNode())),my(t)}),()=>P.some($)):P.none()})(e,t),zy=(e,t)=>{var r,n;return e.selection.isCollapsed()?(r=e,n=t,e=B.fromRangeStart(r.selection.getRng()),Jd(n,r.getBody(),e).filter(e=>(n?xg:kg)(e)).bind(e=>P.from(Nd(n?0:-1,e))).map(e=>()=>r.selection.select(e))):P.none()},jy=O,Vy=e=>jy(e)&&e.data[0]===po,Hy=e=>jy(e)&&e.data[e.data.length-1]===po,qy=e=>e.ownerDocument.createTextNode(po),$y=(e,t)=>(e?e=>{if(jy(e.previousSibling))return Hy(e.previousSibling)||e.previousSibling.appendData(po),e.previousSibling;if(jy(e))return Vy(e)||e.insertData(0,po),e;var t=qy(e);return e.parentNode.insertBefore(t,e),t}:e=>{if(jy(e.nextSibling))return Vy(e.nextSibling)||e.nextSibling.insertData(0,po),e.nextSibling;if(jy(e))return Hy(e)||e.appendData(po),e;var t=qy(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t})(t),Wy=N($y,!0),Ky=N($y,!1),Gy=(e,t)=>O(e.container())?$y(t,e.container()):$y(t,e.getNode()),Yy=(e,t)=>{t=t.get();return t&&e.container()===t&&wo(t)},Xy=(t,e)=>e.fold(e=>{od(t.get());e=Wy(e);return t.set(e),P.some(B(e,e.length-1))},e=>oc(e).map(e=>{if(Yy(e,t))return B(t.get(),1);od(t.get());e=Gy(e,!0);return t.set(e),B(e,1)}),e=>ac(e).map(e=>{if(Yy(e,t))return B(t.get(),t.get().length-1);od(t.get());e=Gy(e,!1);return t.set(e),B(e,e.length-1)}),e=>{od(t.get());e=Ky(e);return t.set(e),P.some(B(e,1))}),Qy=(t,r)=>{for(let e=0;e<t.length;e++){const n=t[e].apply(null,r);if(n.isSome())return n}return P.none()},Jy=ds([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Zy=(e,t)=>_d(t,e)||e,e0=(e,t,r)=>{const n=iy(r),o=Zy(t,n.container());return oy(e,o,n).fold(()=>rc(o,n).bind(N(oy,e,o)).map(e=>Jy.before(e)),P.none)},t0=(e,t)=>null===lc(e,t),r0=(e,t,r)=>oy(e,t,r).filter(N(t0,t)),n0=(e,t,r)=>{const n=sy(r);return r0(e,t,n).bind(e=>nc(e,n).isNone()?P.some(Jy.start(e)):P.none())},o0=(e,t,r)=>{const n=iy(r);return r0(e,t,n).bind(e=>rc(e,n).isNone()?P.some(Jy.end(e)):P.none())},a0=(e,t,r)=>{const n=sy(r),o=Zy(t,n.container());return oy(e,o,n).fold(()=>nc(o,n).bind(N(oy,e,o)).map(e=>Jy.after(e)),P.none)},i0=e=>{return!1===(e=l0(e),"rtl"===ae.DOM.getStyle(e,"direction",!0)||(e=e.textContent,ry.test(e)))},s0=(e,t,r)=>Qy([e0,n0,o0,a0],[e,t,r]).filter(i0),l0=e=>e.fold(p,p,p,p),d0=e=>e.fold(W("before"),W("start"),W("end"),W("after")),c0=e=>e.fold(Jy.before,Jy.before,Jy.after,Jy.after),u0=e=>e.fold(Jy.start,Jy.start,Jy.end,Jy.end),m0=(r,e,n,t,o,a)=>Wt(oy(e,n,t),oy(e,n,o),(e,t)=>e!==t&&((e,t,r)=>{t=_d(t,e),r=_d(r,e);return t&&t===r})(n,e,t)?Jy.after(r?e:t):a).getOr(a),g0=(e,r)=>e.fold(y,e=>{return t=r,!(d0(e=e)===d0(t)&&l0(e)===l0(t));var t}),f0=(e,t)=>e?t.fold(g(P.some,Jy.start),P.none,g(P.some,Jy.after),P.none):t.fold(P.none,g(P.some,Jy.before),P.none,g(P.some,Jy.end)),p0=(e,t,r)=>{var n=e?1:-1;return t.setRng(B(r.container(),r.offset()+n).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},h0=((fh=Xh=Xh||{})[fh.Br=0]="Br",fh[fh.Block=1]="Block",fh[fh.Wrap=2]="Wrap",fh[fh.Eol=3]="Eol",(e,t)=>e===qn.Backwards?ke(t):t),v0=(e,t,r,n)=>{var o,a,i,s=Gd(r);let l=n;const d=[];for(;l;){a=s,i=l;const r=t===qn.Forwards?a.next(i):a.prev(i);if(!r)break;if(x(r.getNode(!1)))return t===qn.Forwards?{positions:h0(t,d).concat([r]),breakType:Xh.Br,breakAt:P.some(r)}:{positions:h0(t,d),breakType:Xh.Br,breakAt:P.some(r)};if(r.isVisible()){if(e(l,r)){a=t,i=l,o=r;const e=x(o.getNode(a===qn.Forwards))?Xh.Br:!1===Ed(i,o)?Xh.Block:Xh.Wrap;return{positions:h0(t,d),breakType:e,breakAt:P.some(r)}}d.push(r),l=r}else l=r}return{positions:h0(t,d),breakType:Xh.Eol,breakAt:P.none()}},b0=(r,n,o,e)=>n(o,e).breakAt.map(e=>{const t=n(o,e).positions;return r===qn.Backwards?t.concat(e):[e].concat(t)}).getOr([]),y0=(e,o)=>he(e,(e,n)=>e.fold(()=>P.some(n),r=>Wt(Ae(r.getClientRects()),Ae(n.getClientRects()),(e,t)=>{e=Math.abs(o-e.left);return Math.abs(o-t.left)<=e?n:r}).or(e)),P.none()),C0=(t,e)=>Ae(e.getClientRects()).bind(e=>y0(t,e.left)),w0=N(v0,B.isAbove,-1),x0=N(v0,B.isBelow,1),k0=N(b0,-1,w0),S0=N(b0,1,x0),_0=_,E0=(e,t)=>Math.abs(e.left-t),N0=(e,t)=>Math.abs(e.right-t),A0=(e,o)=>Ye(e,(e,t)=>{var r=Math.min(E0(e,o),N0(e,o)),n=Math.min(E0(t,o),N0(t,o));return n===r&&Ve(t,"node")&&_0(t.node)||n<r?t:e}),R0=r=>{var e=e=>C(e,e=>{const t=mi(e);return t.node=r,t});if(oe(r))return e(r.getClientRects());if(O(r)){const t=r.ownerDocument.createRange();return t.setStart(r,0),t.setEnd(r,r.data.length),e(t.getClientRects())}return[]},T0=e=>we(e,R0),O0=((t=Qh=Qh||{})[t.Up=-1]="Up",t[t.Down=1]="Down",(e,n,o,t,a,r)=>{let i=0;const s=[],l=t=>{let r=T0([t]);-1===e&&(r=r.reverse());for(let e=0;e<r.length;e++){const t=r[e];if(!o(t,d)){if(0<s.length&&n(t,Qe(s))&&i++,t.line=i,a(t))return!0;s.push(t)}}},d=Qe(r.getClientRects());if(!d)return s;r=r.getNode();return l(r),((e,t,r,n)=>{for(;n=Sd(n,e,zo,t);)if(r(n))return})(e,t,l,r),s}),B0=N(O0,Qh.Up,pi,hi),P0=N(O0,Qh.Down,hi,pi),D0=t=>e=>e.line>t,L0=t=>e=>e.line===t,M0=(e,t)=>{e.selection.setRng(t),wm(e,e.selection.getRng())},I0=(e,t,r)=>P.some(Ry(e,t,r)),F0=(e,t,r,n,o,a)=>{const i=t===qn.Forwards,s=Gd(e.getBody()),l=N(Md,i?s.next:s.prev),d=i?n:o;if(!r.collapsed){const n=bi(r);if(a(n))return Ny(t,e,n,t===qn.Backwards,!1)}const c=Dd(t,e.getBody(),r);if(d(c))return Ay(e,c.getNode(!i));const u=ay(i,l(c)),m=Ro(r);if(!u)return m?P.some(r):P.none();if(d(u))return Ny(t,e,u.getNode(!i),i,!1);const g=l(u);return g&&d(g)&&Id(u,g)?Ny(t,e,g.getNode(!i),i,!1):m?I0(e,u.toRange(),!1):P.none()},U0=(t,r,n,e,o,a)=>{const i=Dd(r,t.getBody(),n),s=Qe(i.getClientRects()),l=r===Qh.Down;if(!s)return P.none();var d=(l?P0:B0)(t.getBody(),D0(1),i),d=T(d,L0(1)),c=s.left,u=A0(d,c);if(u&&a(u.node)){const n=Math.abs(c-u.left),e=Math.abs(c-u.right);return Ny(r,t,u.node,n<e,!1)}if(a=e(i)?i.getNode():o(i)?i.getNode(!0):bi(n)){const n=((e,t,r,n)=>{t=Gd(t);let o,a,i,s;const l=[];let d=0;var c=e=>Qe(e.getClientRects()),u=c(s=1===e?(o=t.next,a=hi,i=pi,B.after(n)):(o=t.prev,a=pi,i=hi,B.before(n)));do{if(s.isVisible()){const e=c(s);if(!i(e,u)){0<l.length&&a(e,Qe(l))&&d++;const t=mi(e);if(t.position=s,t.line=d,r(t))return l;l.push(t)}}}while(s=o(s));return l})(r,t.getBody(),D0(1),a);let e=A0(T(n,L0(1)),c);if(e)return I0(t,e.position.toRange(),!1);if(e=Qe(T(n,L0(0))))return I0(t,e.position.toRange(),!1)}return 0===d.length?z0(t,l).filter(l?o:e).map(e=>Ry(t,e.toRange(),!1)):P.none()},z0=(e,t)=>{const r=e.selection.getRng(),n=t?B.fromRangeEnd(r):B.fromRangeStart(r),o=(a=n.container(),i=e.getBody(),Wn(re(a),e=>gd(e.dom),e=>e.dom===i).map(e=>e.dom).getOr(i));var a,i;if(t){const e=x0(o,n);return Re(e.positions)}{const e=w0(o,n);return Ae(e.positions)}},j0=(t,e,r)=>z0(t,e).filter(r).exists(e=>(t.selection.setRng(e.toRange()),!0)),V0=(e,t)=>{const r=e.dom.createRng();r.setStart(t.container(),t.offset()),r.setEnd(t.container(),t.offset()),e.selection.setRng(r)},H0=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},q0=(t,e,r)=>Xy(e,r).map(e=>(V0(t,e),r)),$0=(e,t,r)=>!!ll(e)&&((t,r,e)=>{var n=t.getBody(),o=B.fromRangeStart(t.selection.getRng());return((i,s,l,d)=>{const e=ay(i,d),c=s0(s,l,e);return s0(s,l,e).bind(N(f0,i)).orThunk(()=>{{var t=i,r=s,n=l,o=c,e=d;const a=ay(t,e);return Jd(t,n,a).map(N(ay,t)).fold(()=>o.map(c0),e=>s0(r,n,e).map(N(m0,t,r,n,a,e)).filter(N(g0,o))).filter(i0)}})})(e,N(ny,t),n,o).bind(e=>q0(t,r,e))})(e,t,r).isSome(),W0=(e,t,r)=>!!ll(t)&&((e,t)=>{var r,n=t.selection.getRng(),n=e?B.fromRangeEnd(n):B.fromRangeStart(n);return r=t,!!q(r.selection.getSel().modify)&&(e&&So(n)?p0(!0,t.selection,n):!(e||!_o(n))&&p0(!1,t.selection,n))})(e,t),K0=l=>{const d=za(null),c=N(ny,l);return l.on("NodeChange",e=>{{var t,r,n;ll(l)&&(t=c,r=l.dom,n=e.parents,r=C(Xa(re(r.getRoot()),'*[data-mce-selected="inline-boundary"]'),e=>e.dom),r=T(r,t),n=T(n,t),Y(Se(r,n),N(H0,!1)),Y(Se(n,r),N(H0,!0)),t=l,n=d,t.selection.isCollapsed()&&!0!==t.composing&&n.get()&&(r=B.fromRangeStart(t.selection.getRng()),B.isTextPosition(r)&&!1===(s=r,So(s)||_o(s))&&(V0(t,(s=n.get(),t=r,(B.isTextPosition(t)?(e,t)=>(Zl(e)&&t.container()===e?(e,t)=>{var r=td(e.data.substr(0,t.offset())),n=td(e.data.substr(t.offset()));return 0<(r.text+n.text).length?(rd(e),B(e,t.offset()-r.count)):t}:nd)(e,t):(e,t)=>(t.container()===e.parentNode?(e,t)=>{const r=t.container(),n=((e,t)=>{e=me(e,t);return-1===e?P.none():P.some(e)})(Te(r.childNodes),e).map(e=>e<t.offset()?B(r,t.offset()-1):t).getOr(t);return od(e),n}:nd)(e,t))(s,t))),n.set(null))),o=c,a=l,i=d,r=e.parents,a.selection.isCollapsed()&&(r=T(r,o),Y(r,e=>{var t=B.fromRangeStart(a.selection.getRng());s0(o,a.getBody(),t).bind(e=>q0(a,i,e))})))}var o,a,i,s}),d},G0=N(W0,!0),Y0=N(W0,!1),X0=(t,r,n)=>{var e;return!!ll(t)&&(e=z0(t,r).getOrThunk(()=>{var e=t.selection.getRng();return r?B.fromRangeEnd(e):B.fromRangeStart(e)}),s0(N(ny,t),t.getBody(),e).exists(e=>{e=c0(e);return Xy(n,e).exists(e=>(V0(t,e),!0))}))},Q0=(t,r)=>e=>Xy(r,e).map(e=>()=>V0(t,e)),J0=(e,t,r,n)=>{const o=e.getBody(),a=N(ny,e);e.undoManager.ignore(()=>{e.selection.setRng(((e,t)=>{const r=document.createRange();return r.setStart(e.container(),e.offset()),r.setEnd(t.container(),t.offset()),r})(r,n)),dy(e),s0(a,o,B.fromRangeStart(e.selection.getRng())).map(u0).bind(Q0(e,t)).each(U)}),e.nodeChanged()},Z0=(e,t,r)=>{if(e.selection.isCollapsed()&&ll(e)){var n=B.fromRangeStart(e.selection.getRng());{var o=e,a=t,i=r,s=n;e=o.getBody(),t=s.container();const l=_d(t,e)||e,d=N(ny,o),c=s0(d,l,s);return c.bind(e=>i?e.fold(W(P.some(u0(e))),P.none,W(P.some(c0(e))),P.none):e.fold(P.none,W(P.some(c0(e))),P.none,W(P.some(u0(e))))).map(Q0(o,a)).getOrThunk(()=>{const e=Zd(i,l,s),t=e.bind(e=>s0(d,l,e));return Wt(c,t,()=>oy(d,l,s).bind(e=>(o=>Wt(oc(o),ac(o),(e,t)=>{const r=ay(!0,e),n=ay(!1,t);return rc(o,r).forall(e=>e.isEqual(n))}).getOr(!0))(e)?P.some(()=>{hf(o,i,re(e))}):P.none())).getOrThunk(()=>t.bind(()=>e.map(e=>()=>{i?J0(o,a,s,e):J0(o,a,e,s)})))})}}return P.none()},eC=e=>1===Ir(e),tC=(d,c)=>{const e=re(d.getBody()),t=re(d.selection.getStart()),u=T(((e,t)=>{const r=Pg(t,e);return ye(r,ro).fold(W(r),e=>r.slice(0,e))})(e,t),eC);return Re(u).bind(a=>{var i,s,l,e=B.fromRangeStart(d.selection.getRng());return i=c,s=e,l=a.dom,!Wt(oc(l),ac(l),(e,t)=>{const r=ay(!0,e),n=ay(!1,t),o=ay(!1,s);return i?rc(l,o).exists(e=>e.isEqual(n)&&s.isEqual(r)):nc(l,o).exists(e=>e.isEqual(r)&&s.isEqual(n))}).getOr(!0)||sc((e=a).dom)&&bp(e.dom)?P.none():P.some(()=>{var e=c,t=d,r=a,n=u,o=N(Ep,t);if(0===(n=C(T(n,o),e=>e.dom)).length)hf(t,e,r);else{o=r.dom,r=n,n=Cp(!1),r=Sp(r,n.dom),tn(re(o),n),ne(re(o));const e=B(r,0);t.selection.setRng(e.toRange())}})})},rC=(e,t)=>e.selection.isCollapsed()?tC(e,t):P.none(),nC=(e,t,r)=>P.some(()=>{e._selectionOverrides.hideFakeCaret(),hf(e,t,re(r))}),oC=(e,t)=>(e.selection.isCollapsed()?(t,r)=>{const n=r?Sg:_g,e=r?qn.Forwards:qn.Backwards,o=Dd(e,t.getBody(),t.selection.getRng());return n(o)?nC(t,r,o.getNode(!r)):P.from(ay(r,o)).filter(e=>n(e)&&Id(o,e)).map(e=>()=>nC(t,r,e.getNode(!r)))}:(e,t)=>{var r=e.selection.getNode();return Un(r)?nC(e,t,r):P.none()})(e,t),aC=e=>{e=parseInt(e,10);return isNaN(e)?0:e},iC=(e,t)=>(e||"table"===ee(t)?"margin":"padding")+("rtl"===Xr(t,"direction")?"-right":"-left"),sC=e=>{var r,t=dC(e);return!e.mode.isReadOnly()&&(1<t.length||(r=e,e=t,xe(e,e=>{var t=iC(Ws(r),e),t=Jr(e,t).map(aC).getOr(0);return"false"!==r.dom.getContentEditable(e.dom)&&0<t})))},lC=e=>io(e)||so(e),dC=e=>{return T((e=e.selection.getSelectedBlocks(),C(e,re)),e=>!lC(e)&&!(e=>Ar(e).exists(lC))(e)&&Kn(e,e=>In(e.dom)||_(e.dom)).exists(e=>In(e.dom)))},cC=(e,i)=>{const s=e["dom"],t=Ks(e),l=/[a-z%]+$/i.exec(t)[0],d=parseInt(t,10),c=Ws(e);Y(dC(e),e=>{var t=s,r=i,n=c,o=d,a=l,e=e.dom;if(n=iC(n,re(e)),"outdent"===r){const r=Math.max(0,aC(e.style[n])-o);t.setStyle(e,n,r?r+a:"")}else{const r=aC(e.style[n])+o+a;t.setStyle(e,n,r)}})},uC=e=>cC(e,"outdent"),mC=e=>{if(e.selection.isCollapsed()&&sC(e)){const t=e.dom,r=e.selection.getRng(),n=B.fromRangeStart(r),o=t.getParent(r.startContainer,t.isBlock);if(null!==o&&Fg(re(o),n))return P.some(()=>uC(e))}return P.none()},gC=(t,r,n)=>Oe([mC,Uy,Py,(e,t)=>Z0(e,r,t),xy,jf,zy,oC,Sy,rC],e=>e(t,n)),fC=(r,n)=>{r.addCommand("delete",()=>{var e,t;e=r,t=n,gC(e,t,!1).fold(()=>{dy(e),my(e)},U)}),r.addCommand("forwardDelete",()=>{var e,t;e=r,t=n,gC(e,t,!0).fold(()=>(e=>ly(e,"ForwardDelete"))(e),U)})},pC=e=>void 0===e.touches||1!==e.touches.length?P.none():P.some(e.touches[0]),hC=(e,t)=>Q(e,t.nodeName),vC=e=>{const t=e.dom,r=e.selection,n=e.schema,o=n.getBlockElements();let a=r.getStart();const i=e.getBody();let s,l,d;const c=Ns(e);if(a&&oe(a)){var u,m,g,f,p=i.nodeName.toLowerCase();if(n.isValidChild(p,c.toLowerCase())&&(u=o,p=i,m=a,!G(Bg(re(m),re(p)),e=>hC(u,e.dom)))){const h=r.getRng(),v=h.startContainer,b=h.startOffset,y=h.endContainer,C=h.endOffset,w=Vm(e);for(a=i.firstChild;a;)if(g=o,f=a,!O(f)&&(!oe(f)||hC(g,f)||vc(f)))s=null,a=a.nextSibling;else{if(((e,t)=>{if(O(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||hC(e,t.nextSibling)))return!0}return!1})(o,a)){a=(l=a).nextSibling,t.remove(l);continue}s||(s=t.create(c,As(e)),a.parentNode.insertBefore(s,a),d=!0),a=(l=a).nextSibling,s.appendChild(l)}d&&w&&(h.setStart(v,b),h.setEnd(y,C),r.setRng(h),e.nodeChanged())}}},bC=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),yC=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Ao(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},CC=(e,t)=>{r=e;var r=Yn(re(r.getBody()),"*[data-mce-caret]").map(e=>e.dom).getOrNull();if(r)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void yC(e,r)):void(ko(r)&&(yC(e,r),e.undoManager.add()))},wC=_,xC=(e,t,r)=>{const n=Gd(e.getBody()),o=N(Md,1===t?n.next:n.prev);if(r.collapsed){const n=e.dom.getParent(r.startContainer,"PRE");if(n&&!o(B.fromRangeStart(r))){const r=re((e=>{const t=e.dom.create(Ns(e));return t.innerHTML='<br data-mce-bogus="1">',t})(e));(1===t?rn:tn)(re(n),r),e.selection.select(r.dom,!0),e.selection.collapse()}}},kC=(t,i)=>(e=>{const t=i?qn.Forwards:qn.Backwards,r=e.selection.getRng();return n=t,o=e,a=r,F0(o,n,a,Ag,Rg,wC).orThunk(()=>(xC(e,t,r),P.none()));var n,o,a})(t).exists(e=>(M0(t,e),!0)),SC=(t,i)=>(e=>{const t=i?1:-1,r=e.selection.getRng();return n=t,o=e,a=r,U0(o,n,a,e=>Ag(e)||Eg(e),e=>Rg(e)||Ng(e),wC).orThunk(()=>(xC(e,t,r),P.none()));var n,o,a})(t).exists(e=>(M0(t,e),!0)),_C=(e,t)=>j0(e,t,t?Rg:Ag),EC=e=>K(["figcaption"],ee(e)),NC=(n,o)=>{const a=re(n.getBody()),i=B.fromRangeStart(n.selection.getRng()),s=Ns(n),l=As(n);return((e,t)=>{t=N(S,t);return Kn(re(e.container()),ro,t).filter(EC)})(i,a).exists(()=>{if(e=a,t=o,r=i,(t?(e,t)=>x0(e,t).breakAt.isNone():(e,t)=>w0(e,t).breakAt.isNone())(e.dom,r)){const i=((e,t,r,n)=>{var r=te(r),o=te("br");rr(r,n),on(r,o),n=e,e=r,(t?on:nn)(n,e);{r=o;const a=document.createRange();return a.setStartBefore(r.dom),a.setEndBefore(r.dom),a}})(a,o,s,l);return n.selection.setRng(i),!0}var e,t,r;return!1})},AC=(e,t)=>!!e.selection.isCollapsed()&&NC(e,t),RC={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},TC=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,v=(e,...t)=>()=>e.apply(null,t),OC=(e,t)=>be(((e,t)=>we((e=>C(e,e=>({...RC,action:$,...e})))(e),e=>TC(e,t)?[e]:[]))(e,t),e=>e.action()),BC=(e,t)=>Oe(((e,t)=>we((e=>C(e,e=>({...RC,action:()=>P.none(),...e})))(e),e=>TC(e,t)?[e]:[]))(e,t),e=>e.action()),PC=(t,e)=>{var e=e?qn.Forwards:qn.Backwards,r=t.selection.getRng();return F0(t,e,r,Sg,_g,Un).exists(e=>(M0(t,e),!0))},DC=(t,e)=>{var e=e?1:-1,r=t.selection.getRng();return U0(t,e,r,Sg,_g,Un).exists(e=>(M0(t,e),!0))},LC=(e,t)=>j0(e,t,t?_g:Sg),MC=ds([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),IC={...MC,none:e=>MC.none(e)},FC=(e,t,r)=>we(Pr(e),e=>xr(e,t)?r(e)?[e]:[]:FC(e,t,r)),UC=(e,t)=>Xn(e,"table",t),zC=(e,t,r,n,o=y)=>{const a=1===n;if(!a&&r<=0)return IC.first(e[0]);if(a&&r>=e.length-1)return IC.last(e[e.length-1]);{const a=r+n,i=e[a];return o(i)?IC.middle(t,i):zC(e,t,a,n,o)}},jC=(r,e)=>UC(r,e).bind(e=>{const t=FC(e,"th,td",y);return ye(t,e=>S(r,e)).map(e=>({index:e,all:t}))}),VC=(e,t=!1)=>{return Wr(e)?e.dom.isContentEditable:(e=e,Xn(e,"[contenteditable]").fold(W(t),e=>"true"===e.dom.contentEditable))},HC=(e,t,r,n,o)=>{var a,i,s,r=Xa(re(r),"td,th,caption").map(e=>e.dom),r=T((a=e,e=r,we(e,e=>{var t={left:(t=mi(e.getBoundingClientRect())).left- -1,top:t.top- -1,right:t.right+-2,bottom:t.bottom+-2,width:t.width+-1,height:t.height+-1};return[{x:t.left,y:a(t),cell:e},{x:t.right,y:a(t),cell:e}]})),e=>t(e,o));return e=r,i=n,s=o,he(e,(e,n)=>e.fold(()=>P.some(n),e=>{var t=Math.sqrt(Math.abs(e.x-i)+Math.abs(e.y-s)),r=Math.sqrt(Math.abs(n.x-i)+Math.abs(n.y-s));return P.some(r<t?n:e)}),P.none()).map(e=>e.cell)},qC=N(HC,e=>e.bottom,(e,t)=>e.y<t),$C=N(HC,e=>e.top,(e,t)=>e.y>t),WC=(e,t,r)=>{const n=e(t,r);return(i=n).breakType===Xh.Wrap&&0===i.positions.length||!x(r.getNode())&&((i=n).breakType===Xh.Br&&1===i.positions.length)?(o=e,a=t,!n.breakAt.exists(e=>o(a,e).breakAt.isSome())):n.breakAt.isNone();var o,a,i},KC=N(WC,w0),GC=N(WC,x0),YC=(t,e,r,n)=>{var o=t.selection.getRng(),a=e?1:-1;return!(!cd()||!((e,t,r)=>{const n=B.fromRangeStart(t);return tc(!e,r).exists(e=>e.isEqual(n))})(e,o,r)||(Ny(a,t,r,!e,!1).each(e=>{M0(t,e)}),0))},XC=(i,s,r)=>{t=r.getNode(!!s);const e=oe(t)&&"TABLE"===t.nodeName?P.some(t):P.none(),n=!1===s;var t;e.fold(()=>M0(i,r.toRange()),t=>tc(n,i.getBody()).filter(e=>e.isEqual(r)).fold(()=>M0(i,r.toRange()),e=>{{var r=s,n=i,o=t;const a=Ns(n);return void n.undoManager.transact(()=>{var e=te(a);rr(e,As(n)),on(e,te("br")),(r?rn:tn)(re(o),e);const t=n.dom.createRng();t.setStart(e.dom,0),t.setEnd(e.dom,0),M0(n,t)})}}))},QC=(e,t,r,n)=>{var o,a,i,s,l,d,c=e.selection.getRng(),c=B.fromRangeStart(c),u=e.getBody();if(!t&&KC(n,c)){o=u;const n=((t,r)=>Ae(r.getClientRects()).bind(e=>qC(t,e.left,e.top)).bind(e=>{return C0(ac(t=e).map(e=>w0(t,e).positions.concat(e)).getOr([]),r);var t}))(a=r,i=c).orThunk(()=>Ae(i.getClientRects()).bind(e=>y0(k0(o,B.before(a)),e.left))).getOr(B.before(a));return XC(e,t,n),!0}if(t&&GC(n,c)){s=u;const n=((t,r)=>Re(r.getClientRects()).bind(e=>$C(t,e.left,e.top)).bind(e=>{return C0(oc(t=e).map(e=>[e].concat(x0(t,e).positions)).getOr([]),r);var t}))(l=r,d=c).orThunk(()=>Ae(d.getClientRects()).bind(e=>y0(S0(s,B.after(l)),e.left))).getOr(B.after(l));return XC(e,t,n),!0}return!1},JC=(r,n,o)=>P.from(r.dom.getParent(r.selection.getNode(),"td,th")).bind(t=>P.from(r.dom.getParent(t,"table")).map(e=>o(r,n,e,t))).getOr(!1),ZC=(e,t)=>JC(e,t,YC),e1=(e,t)=>JC(e,t,QC),t1=(t,r,e)=>e.fold(P.none,P.none,(e,t)=>{return((e,o)=>{const a=t=>{for(let e=0;e<t.childNodes.length;e++){var r=re(t.childNodes[e]);if(o(r))return P.some(r);const n=a(t.childNodes[e]);if(n.isSome())return n}return P.none()};return a(e.dom)})(t,Xm).map(e=>{return e=ju.exact(e,0,e,0),Wu(e)})},e=>(t.execCommand("mceTableInsertRowAfter"),r1(t,r,e))),r1=(e,t,r)=>{return t1(e,t,(o=VC,jC(n=r,void 0).fold(()=>IC.none(n),e=>zC(e.all,n,e.index,1,o))));var n,o},n1=(e,t,r)=>{return t1(e,t,(o=VC,jC(n=r,void 0).fold(()=>IC.none(),e=>zC(e.all,n,e.index,-1,o))));var n,o},o1=(t,r)=>{const n=["table","li","dl"],o=re(t.getBody()),a=e=>{var t=ee(e);return S(e,o)||K(n,t)},e=t.selection.getRng();return((e,t,r)=>r(t)?P.none():K(e,ee(t))?P.some(t):Gn(t,e.join(","),e=>xr(e,"table")||r(e)))(["td","th"],re(r?e.endContainer:e.startContainer),a).map(e=>(UC(e,a).each(e=>{t.model.table.clearSelectedCells(e.dom)}),t.selection.collapse(!r),(r?r1:n1)(t,a,e).each(e=>{t.selection.setRng(e)}),!0)).getOr(!1)},a1=(e,t)=>({container:e,offset:t}),i1=ae.DOM,s1=t=>e=>t===e?-1:0,l1=(e,t,r)=>{if(O(e)&&0<=t)return P.some(a1(e,t));{const n=ci(i1);return P.from(n.backwards(e,t,s1(e),r)).map(e=>a1(e.container,e.container.data.length))}},d1=(e,r,n)=>{if(!O(e))return P.none();const t=e.textContent;if(0<=r&&r<=t.length)return P.some(a1(e,r));{const t=ci(i1);return P.from(t.backwards(e,r,s1(e),n)).bind(e=>{var t=e.container.data;return d1(e.container,r+t.length,n)})}},c1=(e,t,r)=>{if(!O(e))return P.none();const n=e.textContent;if(t<=n.length)return P.some(a1(e,t));{const o=ci(i1);return P.from(o.forwards(e,t,s1(e),r)).bind(e=>c1(e.container,t-n.length,r))}},u1=(e,t,r,n,o)=>{const a=ci(e,(i=e,e=>i.isBlock(e)||K(["BR","IMG","HR","INPUT"],e.nodeName)||"false"===i.getContentEditable(e)));var i;return P.from(a.backwards(t,r,n,o))},m1=e=>e.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,""),g1=e=>""!==e&&-1!=="  \f\n\r\t\v".indexOf(e),f1=(e,t)=>e.substring(t.length),p1=(r,i,s,l=0)=>{return e=re(i.startContainer),Xn(e,Qm).fold(()=>{var[e,n,o,a=0]=[r,i,s,l];if(!n.collapsed||3!==n.startContainer.nodeType)return P.none();var t=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return u1(e,n.startContainer,n.startOffset,(e,t,r)=>((e,t,r)=>{let n;for(n=t-1;0<=n;n--){const t=e.charAt(n);if(g1(t))return P.none();if(t===r)break}return P.some(n)})(r,t,o).getOr(t),t).bind(e=>{const t=n.cloneRange();if(t.setStart(e.container,e.offset),t.setEnd(n.endContainer,n.endOffset),t.collapsed)return P.none();const r=m1(t);return 0!==r.lastIndexOf(o)||f1(r,o).length<a?P.none():P.some({text:f1(r,o),range:t,triggerChar:o})})},e=>{const t=r.createRng();t.selectNode(e.dom);e=m1(t);return P.some({range:t,text:f1(e,s),triggerChar:s})});var e},h1=e=>{if(3===e.nodeType)return a1(e,e.data.length);var t=e.childNodes;return 0<t.length?h1(t[t.length-1]):a1(e,t.length)},v1=(e,t)=>{var r=e.childNodes;return 0<r.length&&t<r.length?v1(r[t],0):0<r.length&&1===e.nodeType&&r.length===t?h1(r[r.length-1]):a1(e,t)},b1=(t,e,r,n={})=>{const o=e(),a=t.selection.getRng().startContainer.nodeValue,i=T(o.lookupByChar(r.triggerChar),e=>r.text.length>=e.minChars&&e.matches.getOrThunk(()=>(r=>e=>{var t,e=v1(e.startContainer,e.startOffset);return t=r,e=e,!u1(t,e.container,e.offset,(e,t)=>0===t?-1:t,t.getRoot()).filter(e=>{e=e.container.data.charAt(e.offset-1);return!g1(e)}).isSome()})(t.dom))(r.range,a,r.text));if(0===i.length)return P.none();e=Promise.all(C(i,t=>t.fetch(r.text,t.maxResults,n).then(e=>({matchText:r.text,items:e,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}))));return P.some({lookupData:e,context:r})},y1=((fh=Jh=Jh||{})[fh.Error=0]="Error",fh[fh.Value=1]="Value",(e,t,r)=>e.stype===Jh.Error?t(e.serror):r(e.svalue)),C1=e=>({stype:Jh.Value,svalue:e}),w1=e=>({stype:Jh.Error,serror:e}),x1=y1,k1=e=>se(e)&&100<Be(e).length?" removed due to size":JSON.stringify(e,null,2),S1=(e,t)=>w1([{path:e,getErrorInfo:t}]),_1=o=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const r={};for(let e=0;e<t.length;e++){var n=t[e];for(const t in n)Q(n,t)&&(r[t]=o(r[t],n[t]))}return r},E1=_1((e,t)=>l(e)&&l(t)?E1(e,t):t),N1=(_1((e,t)=>t),e=>({tag:"defaultedThunk",process:W(e)})),A1=(e,t,r)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return r(e.newKey,e.instantiator)}},R1=r=>({extract:(t,e)=>{return(e=r(e)).stype===Jh.Error?(e=>((e,t)=>S1(e,W(t)))(t,e))(e.serror):e},toString:W("val")}),T1=R1(C1),O1=(e,t,r,n)=>n(R(e,t).getOrThunk(()=>r(e))),B1=n=>({extract:(e,t)=>{{var o=e,a=t;const i={},s=[];for(const r of n)A1(r,(e,t,r,n)=>{r=((t,r,n,o,a)=>{const i=e=>a.extract(r.concat([o]),e),e=e=>e.fold(()=>C1(P.none()),e=>{var e=a.extract(r.concat([o]),e),t=P.some;return e.stype===Jh.Value?{stype:Jh.Value,svalue:t(e.svalue)}:e});switch(t.tag){case"required":return c=r,u=n,m=o,g=i,R(u,m).fold(()=>((e,t,r)=>S1(e,()=>'Could not find valid *required* value for "'+t+'" in '+k1(r)))(c,m,u),g);case"defaultedThunk":return O1(n,o,t.process,i);case"option":return g=n,d=o,e(R(g,d));case"defaultedOptionThunk":return s=n,d=o,l=t.process,e(R(s,d).map(e=>!0===e?l(s):e));case"mergeWithThunk":return O1(n,o,W({}),e=>{e=E1(t.process(n),e);return i(e)})}var s,l,d,c,u,m,g})(r,o,a,e,n);x1(r,e=>{s.push(...e)},e=>{i[t]=e})},(e,t)=>{i[e]=t(a)});return 0<s.length?w1(s):C1(i)}},toString:()=>{const e=C(n,e=>A1(e,(e,t,r,n)=>e+" -> "+n.toString(),(e,t)=>"state("+e+")"));return"obj{\n"+e.join("\n")+"}"}}),P1=n=>({extract:(r,e)=>{var t,e=C(e,(e,t)=>n.extract(r.concat(["["+t+"]"]),e));return 0<(e=(e=>{const t=[],r=[];return Y(e,e=>{y1(e,e=>r.push(e),e=>t.push(e))}),{values:t,errors:r}})(e=e)).errors.length?(t=e.errors,g(w1,Ce)(t)):C1(e.values)},toString:()=>"array("+n.toString()+")"}),D1=(e,t,r)=>{return n=r,r=(e=>e.stype===Jh.Error?{stype:Jh.Error,serror:(e=>({input:n,errors:e}))(e.serror)}:e)(t.extract([e],n)),y1(r,ls.error,ls.value);var n},L1=(e,t)=>((e,n)=>({extract:(t,r)=>R(r,e).fold(()=>((e,t)=>S1(e,()=>'Choice schema did not contain choice key: "'+t+'"'))(t,e),e=>((t,r,e,n)=>R(e,n).fold(()=>((e,t,r)=>S1(e,()=>'The chosen schema: "'+r+'" did not exist in branches: '+k1(t)))(t,e,n),e=>e.extract(t.concat(["branch: "+n]),r)))(t,r,n,e)),toString:()=>"chooseOn("+e+"). Possible values: "+Be(n)}))(e,De(t,B1)),M1=W(T1),I1=(r,n)=>R1(e=>{var t=typeof e;return r(e)?C1(e):w1(`Expected type: ${n} but got: `+t)}),F1=I1(ce,"number"),U1=I1(V,"string"),z1=I1(E,"boolean"),j1=I1(q,"function"),V1=(e,t,r,n)=>({tag:"field",key:e,newKey:t,presence:r,prop:n}),H1=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),q1=(e,t)=>V1(e,e,{tag:"required",process:{}},t),$1=e=>q1(e,U1),W1=e=>q1(e,j1),K1=(e,t)=>V1(e,e,{tag:"option",process:{}},t),G1=e=>K1(e,U1),Y1=(e,t,r)=>V1(e,e,N1(t),r),X1=(e,t)=>Y1(e,t,F1),Q1=(e,t,r)=>Y1(e,t,(t=>{return r=e=>K(t,e)?ls.value(e):ls.error(`Unsupported value: "${e}", choose one of "${t.join(", ")}".`),R1(e=>r(e).fold(w1,C1));var r})(r)),J1=(e,t)=>Y1(e,t,z1),Z1=(e,t)=>Y1(e,t,j1),ew=$1("type"),tw=W1("fetch"),rw=W1("onAction"),nw=Z1("onSetup",()=>$),ow=G1("text"),aw=G1("icon"),iw=G1("tooltip"),sw=G1("label"),lw=J1("active",!1),dw=J1("enabled",!0),cw=J1("primary",!1),uw=e=>(e=>Y1("type",e,U1))(e),mw=B1([ew,$1("ch"),X1("minChars",1),V1("columns","columns",N1(1),M1()),X1("maxResults",10),K1("matches",j1),tw,rw,(t=U1,Y1("highlightOn",[],P1(t)))]),gw=[dw,iw,aw,ow,nw],fw=[lw].concat(gw),pw=[Z1("predicate",A),Q1("scope","node",["node","editor"]),Q1("position","selection",["node","selection","line"])],hw=gw.concat([uw("contextformbutton"),cw,rw,H1("original",p)]),vw=fw.concat([uw("contextformbutton"),cw,rw,H1("original",p)]),bw=gw.concat([uw("contextformbutton")]),yw=fw.concat([uw("contextformtogglebutton")]),Cw=L1("type",{contextformbutton:hw,contextformtogglebutton:vw}),ww=(B1([uw("contextform"),Z1("initValue",W("")),sw,V1("commands","commands",{tag:"required",process:{}},P1(Cw)),K1("launch",L1("type",{contextformbutton:bw,contextformtogglebutton:yw}))].concat(pw)),i=>{const o=Wa(),a=za(!1),s=o.isSet,l=()=>{var e;s()&&(e=i,h(e).autocompleter.removeDecoration(),i.dispatch("AutocompleterEnd"),a.set(!1),o.clear())},d=Je(()=>{{var e;const t=i.ui.registry.getAll().popups,r=De(t,e=>{return e=e,D1("Autocompleter",mw,e).fold(e=>{throw new Error("Errors: \n"+(e=>{e=10<e.length?e.slice(0,10).concat([{path:[],getErrorInfo:W("... (only showing first ten failures)")}]):e;return C(e,e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo())})((e=e).errors).join("\n")+"\n\nInput object: "+k1(e.input))},p)}),n=He(ze(r,e=>e.ch)),o=je(r);return{dataset:r,triggerChars:n,lookupByChar:t=>T(o,e=>e.ch===t)}}}),r=e=>{var t;t=e,o.get().map(e=>p1(i.dom,i.selection.getRng(),e.triggerChar).bind(e=>b1(i,d,e,t))).getOrThunk(()=>{var t,r,n=i,o=d,e=o(),a=n.selection.getRng();return t=n.dom,r=a,a=e,Oe(a.triggerChars,e=>p1(t,r,e)).bind(e=>b1(n,o,e))}).fold(l,n=>{var e,t,r;e=n.context,s()||(t=i,r=e.range,h(t).autocompleter.addDecoration(r),o.set({triggerChar:e.triggerChar,matchLength:e.text.length})),n.lookupData.then(r=>{o.get().map(e=>{var t=n.context;e.triggerChar===t.triggerChar&&(10<=t.text.length-e.matchLength?l():(o.set({...e,matchLength:t.text.length}),a.get()?i.dispatch("AutocompleterUpdate",{lookupData:r}):(a.set(!0),i.dispatch("AutocompleterStart",{lookupData:r}))))})})})};i.addCommand("mceAutocompleterReload",(e,t)=>{t=se(t)?t.fetchOptions:{};r(t)}),i.addCommand("mceAutocompleterClose",l);{var e=i,t={cancelIfNecessary:l,load:r};const n=Ga(t.load,50);return e.on("keypress compositionend",e=>{27!==e.which&&n.throttle()}),e.on("keydown",e=>{e=e.which;8===e?n.throttle():27===e&&t.cancelIfNecessary()}),void e.on("remove",n.cancel)}}),xw=o=>(e,t,r={})=>{var n=e.getBody(),n={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:n,currentTarget:n,eventPhase:Event.AT_TARGET,originalTarget:n,explicitOriginalTarget:n,isTrusted:!1,srcElement:n,cancelable:!1,preventDefault:$,inputType:t},t=Sa(new InputEvent(o));return e.dispatch(o,{...t,...n,...r})},kw=xw("input"),Sw=xw("beforeinput"),_w=(e,t)=>{let r,n=t;const o=e.dom,a=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){const e=(e=>{for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}})(t.firstChild);e&&/^(UL|OL|DL)$/.test(e.nodeName)&&t.insertBefore(o.doc.createTextNode(go),t.firstChild)}const i=o.createRng();if(t.normalize(),t.hasChildNodes()){const e=new Zn(t,t);for(;r=e.current();){if(O(r)){i.setStart(r,0),i.setEnd(r,0);break}if(a[r.nodeName.toLowerCase()]){i.setStartBefore(r),i.setEndBefore(r);break}n=r,r=e.next()}r||(i.setStart(n,0),i.setEnd(n,0))}else x(t)?t.nextSibling&&o.isBlock(t.nextSibling)?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));e.selection.setRng(i),wm(e,i)}},Ew=e=>P.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),Nw=(e,t)=>e&&e.parentNode&&e.parentNode.nodeName===t,Aw=e=>e&&/^(OL|UL|LI)$/.test(e.nodeName),Rw=e=>{var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},Tw=(e,t,r)=>{let n=e[r?"firstChild":"lastChild"];for(;n&&!oe(n);)n=n[r?"nextSibling":"previousSibling"];return n===t},Ow=e=>{e.innerHTML='<br data-mce-bogus="1">'},Bw=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,Pw=(e,t)=>t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t),Dw=(e,t,r)=>!1===O(t)?r:e?1===r&&t.data.charAt(r-1)===po?0:r:r===t.data.length-1&&t.data.charAt(r)===po?t.data.length:r,Lw=(e,t)=>{var r=e.getRoot();let n,o;for(n=t;n!==r&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(o=n),n=n.parentNode;return n!==r?o:r},Mw=(e,t)=>{if(Ns(e).toLowerCase()===t.tagName.toLowerCase()){var r=e,o=t,t=As(e);const a=r.dom;P.from(t.style).map(a.parseStyle).each(e=>{e={...Zr(re(o)),...e};a.setStyles(o,e)});r=P.from(t.class).map(e=>e.split(/\s+/)),e=P.from(o.className).map(e=>T(e.split(/\s+/),e=>""!==e));Wt(r,e,(t,e)=>{const r=T(e,e=>!K(t,e)),n=[...t,...r];a.setAttrib(o,"class",n.join(" "))});const n=["style","class"],i=Ue(t,(e,t)=>!K(n,t));a.setAttribs(o,i)}},Iw=(i,t)=>{let e,s,a,l,d,r,n,c,u;const m=i.dom,g=i.schema,f=g.getNonEmptyElements(),o=i.selection.getRng(),p=Ns(i),h=e=>{let t,r,n,o=s;var a=g.getTextInlineElements();if(t=e||"TABLE"===c||"HR"===c?m.create(e||p):l.cloneNode(!1),n=t,!1===Os(i))m.setAttrib(t,"style",null),m.setAttrib(t,"class",null);else for(;!a[o.nodeName]||sc(o)||vc(o)||(r=o.cloneNode(!1),m.setAttrib(r,"id",""),t.hasChildNodes()?r.appendChild(t.firstChild):n=r,t.appendChild(r)),(o=o.parentNode)&&o!==w;);return Mw(i,t),Ow(n),t},v=e=>{let t,r;var n=Dw(e,s,a);if(O(s)&&(e?0<n:n<s.nodeValue.length))return!1;if(s.parentNode===l&&u&&!e)return!0;if(e&&oe(s)&&s===l.firstChild)return!0;if(Bw(s,"TABLE")||Bw(s,"HR"))return u&&!e||!u&&e;const o=new Zn(s,l);for(O(s)&&(e&&0===n?o.prev():e||n!==s.nodeValue.length||o.next());t=o.current();){if(oe(t)){if(!t.getAttribute("data-mce-bogus")&&(r=t.nodeName.toLowerCase(),f[r]&&"br"!==r))return!1}else if(O(t)&&!Vo(t.nodeValue))return!1;e?o.prev():o.next()}return!0},b=()=>{d=/^(H[1-6]|PRE|FIGURE)$/.test(c)&&"HGROUP"!==x?h(p):h(),Bs(i)&&Pw(m,n)&&m.isEmpty(l)?d=m.split(n,l):m.insertAfter(d,l),_w(i,d)};em(m,o).each(e=>{o.setStart(e.startContainer,e.startOffset),o.setEnd(e.endContainer,e.endOffset)}),s=o.startContainer,a=o.startOffset;var y,C=!(!t||!t.shiftKey),t=!(!t||!t.ctrlKey);oe(s)&&s.hasChildNodes()&&(u=a>s.childNodes.length-1,s=s.childNodes[Math.min(a,s.childNodes.length-1)]||s,a=u&&O(s)?s.nodeValue.length:0);const w=Lw(m,s);if(!w)return;C||(s=((e,t,r,n,o)=>{let a,i,s,l,d,c;const u=e.dom,m=Lw(u,n);if(!(i=u.getParent(n,u.isBlock))||!Pw(u,i)){if(c=((i=i||m)===e.getBody()||(g=i)&&/^(TD|TH|CAPTION)$/.test(g.nodeName)?i:i.parentNode).nodeName.toLowerCase(),!i.hasChildNodes())return a=u.create(t),Mw(e,a),i.appendChild(a),r.setStart(a,0),r.setEnd(a,0),a;for(l=n;l.parentNode!==i;)l=l.parentNode;for(;l&&!u.isBlock(l);)l=(s=l).previousSibling;if(s&&e.schema.isValidChild(c,t.toLowerCase())){for(a=u.create(t),Mw(e,a),s.parentNode.insertBefore(a,s),l=s;l&&!u.isBlock(l);)d=l.nextSibling,a.appendChild(l),l=d;r.setStart(n,o),r.setEnd(n,o)}}var g;return n})(i,p,o,s,a)),l=m.getParent(s,m.isBlock),n=l?m.getParent(l.parentNode,m.isBlock):null,c=l?l.nodeName.toUpperCase():"";const x=n?n.nodeName.toUpperCase():"";if("LI"!==x||t||(n=(l=n).parentNode,c=x),/^(LI|DT|DD)$/.test(c)&&m.isEmpty(l)){var k=i,S=h,C=n,_=(t=l,p);const N=k.dom,A=k.selection.getRng();if(C!==k.getBody()){let e=S(_=Aw(S=C)&&Aw(S.parentNode)?"LI":_);if(Tw(C,t,!0)&&Tw(C,t,!1))if(Nw(C,"LI")){const k=Rw(C);N.insertAfter(e,k),(null==(y=(S=C).parentNode)?void 0:y.firstChild)===S?N.remove(k):N.remove(C)}else N.replace(e,C);else if(Tw(C,t,!0))Nw(C,"LI")?(N.insertAfter(e,Rw(C)),e.appendChild(N.doc.createTextNode(" ")),e.appendChild(C)):C.parentNode.insertBefore(e,C),N.remove(t);else if(Tw(C,t,!1))N.insertAfter(e,Rw(C)),N.remove(t);else{C=Rw(C);const k=A.cloneRange(),S=(k.setStartAfter(t),k.setEndAfter(C),k.extractContents());"LI"===_&&((y=S).firstChild&&"LI"===y.firstChild.nodeName)?(e=S.firstChild,N.insertAfter(S,C)):(N.insertAfter(S,C),N.insertAfter(e,C)),N.remove(t)}_w(k,e)}}else if(l!==i.getBody()){if(Co(l))d=Ao(l),m.isEmpty(l)&&Ow(l),Mw(i,d),_w(i,d);else if(v())b();else if(v(!0))d=l.parentNode.insertBefore(h(),l),_w(i,Bw(l,"HR")?d:l);else{(e=(e=>{const t=e.cloneRange();return t.setStart(e.startContainer,Dw(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,Dw(!1,e.endContainer,e.endOffset)),t})(o).cloneRange()).setEndAfter(l),r=e.extractContents(),S=r,Y(Ya(re(S),Qt),e=>{const t=e.dom;t.nodeValue=vo(t.nodeValue)});for(var E=r;O(E)&&(E.nodeValue=E.nodeValue.replace(/^[\r\n]+/,"")),E=E.firstChild;);d=r.firstChild,m.insertAfter(r,l),((e,t)=>{let r=d;const n=[];let o;if(r){for(;r=r.firstChild;){if(e.isBlock(r))return;oe(r)&&!t[r.nodeName.toLowerCase()]&&n.push(r)}for(o=n.length;o--;)(!(r=n[o]).hasChildNodes()||r.firstChild===r.lastChild&&""===r.firstChild.nodeValue||(a=e,(i=r)&&"A"===i.nodeName&&a.isEmpty(i)))&&e.remove(r)}var a,i})(m,f),_=m,(C=l).normalize(),(t=C.lastChild)&&!/^(left|right)$/gi.test(_.getStyle(t,"float",!0))||_.add(C,"br"),m.isEmpty(l)&&Ow(l),d.normalize(),m.isEmpty(d)?(m.remove(d),b()):(Mw(i,d),_w(i,d))}m.setAttrib(d,"id",""),i.dispatch("NewBlock",{newBlock:d})}},Fw=(e,t,r)=>{const n=e.dom.createRng();r?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),e.selection.setRng(n),wm(e,n)},Uw=(e,t)=>{var r=te("br");tn(re(t),r),e.undoManager.add()},zw=(e,t)=>{r=e.getBody(),n=t,o=B.after(n),x(o.getNode())||rc(r,B.after(n)).map(e=>x(e.getNode())).getOr(!1)||rn(re(t),te("br"));var r,n,o=te("br");rn(re(t),o),Fw(e,o.dom,!1),e.undoManager.add()},jw=e=>e&&"A"===e.nodeName&&"href"in e,Vw=e=>e.fold(A,jw,jw,A),Hw=(e,t)=>{t.fold($,N(Uw,e),N(zw,e),$)},qw=(a,i)=>{t=a,l=N(ny,t),r=B.fromRangeStart(t.selection.getRng());const e=s0(l,t.getBody(),r).filter(Vw);var t,r;if(!e.isSome()){var s=a,l=i;const d=s.selection,c=s.dom,u=d.getRng();let e,t,r=(em(c,u).each(e=>{u.setStart(e.startContainer,e.startOffset),u.setEnd(e.endContainer,e.endOffset)}),u.startOffset),n=u.startContainer;if(1===n.nodeType&&n.hasChildNodes()){const s=r>n.childNodes.length-1;n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=s&&3===n.nodeType?n.nodeValue.length:0}let o=c.getParent(n,c.isBlock);const m=o?c.getParent(o.parentNode,c.isBlock):null,g=m?m.nodeName.toUpperCase():"",f=!(!l||!l.ctrlKey);return"LI"!==g||f||(o=m),n&&3===n.nodeType&&r>=n.nodeValue.length&&(((e,t,r)=>{const n=new Zn(t,r);let o;for(var a=e.getNonEmptyElements();o=n.next();)if(a[o.nodeName.toLowerCase()]||0<o.length)return!0})(s.schema,n,o)||(e=c.create("br"),u.insertNode(e),u.setStartAfter(e),u.setEndAfter(e),t=!0)),e=c.create("br"),zi(c,u,e),Fw(s,e,t),void s.undoManager.add()}e.each(N(Hw,a))},$w=(e,t)=>Ew(e).filter(e=>0<t.length&&xr(re(e),t)).isSome(),Ww=ds([{br:[]},{block:[]},{none:[]}]),Kw=(e,t)=>(e=>$w(e,Ts(e)))(e),Gw=r=>(e,t)=>(e=>Ew(e).filter(e=>so(re(e))).isSome())(e)===r,Yw=(r,n)=>(e,t)=>{return e=e,Ew(e).fold(W(""),e=>e.nodeName.toUpperCase())===r.toUpperCase()===n},Xw=e=>Yw("pre",e),Qw=r=>(e,t)=>Es(e)===r,Jw=(e,t)=>(e=>$w(e,Rs(e)))(e),Zw=(e,t)=>t,ex=e=>{var t=Ns(e),r=((e,t)=>{var r=e.getRoot();let n,o;for(n=t;n!==r&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(o=n),n=n.parentNode;return n!==r?o:r})(e.dom,e.selection.getStart());return r&&e.schema.isValidChild(r.nodeName,t)},tx=(e,t)=>(r,n)=>he(e,(e,t)=>e&&t(r,n),!0)?P.some(t):P.none(),rx=(e,t)=>{var r,n;r=e,n=t,Qy([tx([Kw],Ww.none()),tx([Yw("summary",!0)],Ww.br()),tx([Xw(!0),Qw(!1),Zw],Ww.br()),tx([Xw(!0),Qw(!1)],Ww.block()),tx([Xw(!0),Qw(!0),Zw],Ww.block()),tx([Xw(!0),Qw(!0)],Ww.br()),tx([Gw(!0),Zw],Ww.br()),tx([Gw(!0)],Ww.block()),tx([Jw],Ww.br()),tx([Zw],Ww.br()),tx([ex],Ww.block())],[r,!(!n||!n.shiftKey)]).getOr(Ww.none()).fold(()=>{H(t)&&Sw(e,"insertLineBreak").isDefaultPrevented()||(qw(e,t),H(t)&&kw(e,"insertLineBreak"))},()=>{H(t)&&Sw(e,"insertParagraph").isDefaultPrevented()||(Iw(e,t),H(t)&&kw(e,"insertParagraph"))},$)},nx=Lt(),ox=e=>e.stopImmediatePropagation(),ax=e=>e.keyCode===ie.PAGE_UP||e.keyCode===ie.PAGE_DOWN,ix=(e,t,r)=>{r&&!e.get()?t.on("NodeChange",ox,!0):!r&&e.get()&&t.off("NodeChange",ox),e.set(r)},sx=(r,n)=>{const e=n.container(),t=n.offset();return O(e)?(e.insertData(t,r),P.some(B(e,t+r.length))):Ld(n).map(e=>{var t=Cr(r);return(n.isAtEnd()?rn:tn)(e,t),B(t.dom,r.length)})},lx=N(sx,go),dx=N(sx," "),cx=t=>{const r=B.fromRangeStart(t.selection.getRng()),n=re(t.getBody());var e,o,a;return t.selection.isCollapsed()?(e=N(ny,t),o=B.fromRangeStart(t.selection.getRng()),s0(e,t.getBody(),o).bind((a=n,e=>e.fold(e=>nc(a.dom,B.before(e)),e=>oc(e),e=>ac(e),e=>rc(a.dom,B.after(e))))).map(e=>()=>((t,r)=>e=>(((e,t)=>!Jg(t)&&(((e,t)=>((e,t)=>nc(e.dom,t).isNone())(e,t)||((e,t)=>rc(e.dom,t).isNone())(e,t)||Fg(e,t)||Ug(e,t)||$g(e,t)||qg(e,t))(e,t)||Xg(e,t)||Qg(e,t)))(t,e)?lx:dx)(r))(n,r)(e).each((t=>e=>(t.selection.setRng(e.toRange()),t.nodeChanged(),!0))(t)))):P.none()},ux=e=>{if(e.addShortcut("Meta+P","","mcePrint"),ww(e),Zv(e))return za(null);var o,a,n,i,s,l,d,c,u,m,t,r=K0(e),g=((t=e).on("keyup compositionstart",N(CC,t)),m=r,(u=e).on("keydown",e=>{if(!1===e.isDefaultPrevented()){var t=u,r=m,n=e;const o=Lt().os;OC([{keyCode:ie.RIGHT,action:v(kC,t,!0)},{keyCode:ie.LEFT,action:v(kC,t,!1)},{keyCode:ie.UP,action:v(SC,t,!1)},{keyCode:ie.DOWN,action:v(SC,t,!0)},{keyCode:ie.RIGHT,action:v(ZC,t,!0)},{keyCode:ie.LEFT,action:v(ZC,t,!1)},{keyCode:ie.UP,action:v(e1,t,!1)},{keyCode:ie.DOWN,action:v(e1,t,!0)},{keyCode:ie.RIGHT,action:v(PC,t,!0)},{keyCode:ie.LEFT,action:v(PC,t,!1)},{keyCode:ie.UP,action:v(DC,t,!1)},{keyCode:ie.DOWN,action:v(DC,t,!0)},{keyCode:ie.RIGHT,action:v($0,t,r,!0)},{keyCode:ie.LEFT,action:v($0,t,r,!1)},{keyCode:ie.RIGHT,ctrlKey:!o.isMacOS(),altKey:o.isMacOS(),action:v(G0,t,r)},{keyCode:ie.LEFT,ctrlKey:!o.isMacOS(),altKey:o.isMacOS(),action:v(Y0,t,r)},{keyCode:ie.UP,action:v(AC,t,!1)},{keyCode:ie.DOWN,action:v(AC,t,!0)}],n).each(e=>{n.preventDefault()})}}),c=r,(d=e).on("keydown",e=>{if(!1===e.isDefaultPrevented()){var t=d,r=c,n=e;const o=n.keyCode===ie.BACKSPACE?"deleteContentBackward":"deleteContentForward";BC([{keyCode:ie.BACKSPACE,action:v(mC,t)},{keyCode:ie.BACKSPACE,action:v(Uy,t,!1)},{keyCode:ie.DELETE,action:v(Uy,t,!0)},{keyCode:ie.BACKSPACE,action:v(Py,t,!1)},{keyCode:ie.DELETE,action:v(Py,t,!0)},{keyCode:ie.BACKSPACE,action:v(Z0,t,r,!1)},{keyCode:ie.DELETE,action:v(Z0,t,r,!0)},{keyCode:ie.BACKSPACE,action:v(jf,t,!1)},{keyCode:ie.DELETE,action:v(jf,t,!0)},{keyCode:ie.BACKSPACE,action:v(zy,t,!1)},{keyCode:ie.DELETE,action:v(zy,t,!0)},{keyCode:ie.BACKSPACE,action:v(oC,t,!1)},{keyCode:ie.DELETE,action:v(oC,t,!0)},{keyCode:ie.BACKSPACE,action:v(Sy,t,!1)},{keyCode:ie.DELETE,action:v(Sy,t,!0)},{keyCode:ie.BACKSPACE,action:v(xy,t,!1)},{keyCode:ie.DELETE,action:v(xy,t,!0)},{keyCode:ie.BACKSPACE,action:v(rC,t,!1)},{keyCode:ie.DELETE,action:v(rC,t,!0)}],n).each(e=>{n.preventDefault(),Sw(t,o).isDefaultPrevented()||(e(),kw(t,o))})}}),d.on("keyup",e=>{var t;!1===e.isDefaultPrevented()&&(t=d,e=e,OC([{keyCode:ie.BACKSPACE,action:v(Fy,t)},{keyCode:ie.DELETE,action:v(Fy,t)}],e))}),(l=e).on("keydown",e=>{var t,r;e.keyCode===ie.ENTER&&(t=l,(r=e).isDefaultPrevented()||(r.preventDefault(),(e=t.undoManager).typing&&(e.typing=!1,e.add()),t.undoManager.transact(()=>{!1===t.selection.isCollapsed()&&dy(t),rx(t,r)})))}),(s=e).on("keydown",e=>{var t,r;!1===e.isDefaultPrevented()&&(t=s,r=e,BC([{keyCode:ie.SPACEBAR,action:v(cx,t)}],r).each(e=>{r.preventDefault(),Sw(t,"insertText",{data:" "}).isDefaultPrevented()||(e(),kw(t,"insertText",{data:" "}))}))}),(i=e).on("input",e=>{var t,r;!1===e.isComposing&&(t=i,e=re(t.getBody()),t.selection.isCollapsed()&&(r=e,e=B.fromRangeStart(t.selection.getRng()),P.some(e).filter(nf).bind(e=>{var t=e.container();return((e,t)=>{const r=t.data,n=B(t,0);return!(!rf(r,0)||tf(e,n)||(t.data=" "+r.slice(1),0))})(r,t)||(e=>{const t=e.data,r=(()=>{const r=t.split("");return C(r,(e,t)=>bc(e)&&0<t&&t<r.length-1&&Cc(r[t-1])&&Cc(r[t+1])?" ":e).join("")})();return r!==t&&(e.data=r,!0)})(t)||((e,t)=>{const r=t.data,n=B(t,r.length-1);return!(!rf(r,r.length-1)||tf(e,n)||(t.data=r.slice(0,-1)+" ",0))})(r,t)?P.some(e):P.none()}).each(e=>{t.selection.setRng(e.toRange())})))}),(n=e).on("keydown",e=>{var t,r;!1===e.isDefaultPrevented()&&(t=n,r=e,OC([...(t=t,Ql(t)?[{keyCode:ie.TAB,action:v(o1,t,!0)},{keyCode:ie.TAB,shiftKey:!0,action:v(o1,t,!1)}]:[])],r).each(e=>{r.preventDefault()}))}),a=r,(o=e).on("keydown",e=>{var t,r,n;!1===e.isDefaultPrevented()&&(t=o,r=a,n=e,OC([{keyCode:ie.END,action:v(_C,t,!0)},{keyCode:ie.HOME,action:v(_C,t,!1)},{keyCode:ie.END,action:v(LC,t,!0)},{keyCode:ie.HOME,action:v(LC,t,!1)},{keyCode:ie.END,action:v(X0,t,!0,r)},{keyCode:ie.HOME,action:v(X0,t,!1,r)}],n).each(e=>{n.preventDefault()}))}),e),f=r;if(!nx.os.isMacOS()){const p=za(!1);g.on("keydown",e=>{ax(e)&&ix(p,g,!0)}),g.on("keyup",e=>{var t,r,n;!1===e.isDefaultPrevented()&&(t=g,r=f,n=e,OC([{keyCode:ie.PAGE_UP,action:v(X0,t,!1,r)},{keyCode:ie.PAGE_DOWN,action:v(X0,t,!0,r)}],n)),ax(e)&&p.get()&&(ix(p,g,!1),g.nodeChanged())})}return r};class mx{constructor(r){let n;this.lastPath=[],this.editor=r;const t=this;"onselectionchange"in r.getDoc()||r.on("NodeChange click mouseup keyup focus",e=>{var t=r.selection.getRng(),t={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset};"nodechange"!==e.type&&Gu(t,n)||r.dispatch("SelectionChange"),n=t}),r.on("contextmenu",()=>{r.dispatch("SelectionChange")}),r.on("SelectionChange",()=>{var e=r.selection.getStart(!0);e&&fu(r)&&!t.isSameElementPath(e)&&r.dom.isChildOf(e,r.getBody())&&r.nodeChanged({selectionChange:!0})}),r.on("mouseup",e=>{!e.isDefaultPrevented()&&fu(r)&&("IMG"===r.selection.getNode().nodeName?Dm.setEditorTimeout(r,()=>{r.nodeChanged()}):r.nodeChanged())})}nodeChanged(e){const t=this.editor.selection;let r,n,o;this.editor.initialized&&t&&!yl(this.editor)&&!this.editor.mode.isReadOnly()&&(o=this.editor.getBody(),(r=t.getStart(!0)||o).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,o)||(r=o),n=[],this.editor.dom.getParent(r,e=>{if(e===o)return!0;n.push(e)}),(e=e||{}).element=r,e.parents=n,this.editor.dispatch("NodeChange",e))}isSameElementPath(e){let t;const r=this.editor,n=ke(r.dom.getParents(e,y,r.getBody()));if(n.length===this.lastPath.length){for(t=n.length;0<=t&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1}}const gx=W("x-tinymce/html"),fx="\x3c!-- x-tinymce/html --\x3e",px=e=>-1!==e.indexOf(fx),hx="%MCEPASTEBIN%",vx=e=>e.dom.get("mcepastebin"),bx=e=>e&&"mcepastebin"===e.id,yx=e=>e===hx,Cx=(t,e)=>(Z.each(e,e=>{t=b(e,RegExp)?t.replace(e,""):t.replace(e[0],e[1])}),t),wx=e=>Cx(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,t,r)=>t||r?go:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),xx=(e,t)=>({content:e,cancelled:t}),kx=(e,t)=>(e.insertContent(t,{merge:jl(e),paste:!0}),!0),Sx=e=>/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e),_x=(e,t,r)=>!(e.selection.isCollapsed()||!Sx(t))&&((e,t,r)=>(e.undoManager.extra(()=>{r(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0))(e,t,r),Ex=(e,t,r)=>!!((e,t)=>Sx(t)&&G(Xl(e),e=>it(t.toLowerCase(),"."+e.toLowerCase())))(e,t)&&((e,t,r)=>(e.undoManager.extra(()=>{r(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0))(e,t,r),Nx=(()=>{let e=0;return()=>"mceclip"+e++})(),Ax=(e,t,r,n)=>{var o,a,t=((e,t,r)=>{{const n=e.dispatch("PastePreProcess",{content:t,internal:r}),o=((e,t)=>{const r=Sv({},e.schema);r.addNodeFilter("meta",e=>{Z.each(e,e=>{e.remove()})});t=r.parse(t,{forced_root_block:!1,isRootContent:!0});return ug({validate:!0},e.schema).serialize(t)})(e,n.content);if(!e.hasEventListeners("PastePostProcess")||n.isDefaultPrevented())return xx(o,n.isDefaultPrevented());{t=e,e=r;const a=t.dom.create("div",{style:"display:none"},o),i=t.dispatch("PastePostProcess",{node:a,internal:e});return xx(i.node.innerHTML,i.isDefaultPrevented())}}})(e,t,r);!1===t.cancelled&&(r=e,e=t.content,n||!Vl(r)?kx(r,e):(o=r,a=e,Z.each([_x,Ex,kx],e=>!0!==e(o,a,kx))))},Rx=(e,t,r)=>{r=r||px(t);Ax(e,t.replace(fx,""),r,!1)},Tx=(e,t)=>{t=e.dom.encode(t).replace(/\r\n/g,"\n"),t=((e,n,t)=>{const r=e.split(/\n\n/),o=(e=>{let t="<"+n;const r=ze(e,(e,t)=>t+'="'+ua.encodeAllRaw(e)+'"');return r.length&&(t+=" "+r.join(" ")),t+">"})(t),a="</"+n+">",i=C(r,e=>e.split(/\n/).join("<br />"));return 1===i.length?i[0]:C(i,e=>o+e+a).join("")})(qo(t,ql(e)),Ns(e),As(e));Ax(e,t,!1,!0)},Ox=t=>{const r={};if(t&&t.types)for(let e=0;e<t.types.length;e++){var n=t.types[e];try{r[n]=t.getData(n)}catch(t){r[n]=""}}return r},Bx=(e,t)=>t in e&&0<e[t].length,Px=e=>Bx(e,"text/html")||Bx(e,"text/plain"),Dx=(f,e,t)=>{var r,n="paste"===e.type?e.clipboardData:e.dataTransfer;if(Ml(f)&&n){r=f,o=(n=n).items?we(Te(n.items),e=>"file"===e.kind?[e.getAsFile()]:[]):[],n=n.files?Te(n.files):[];var o=T(0<o.length?o:n,(e=>{const t=Xl(e);return e=>at(e.type,"image/")&&G(t,r=>(()=>{var e=r.toLowerCase(),t={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Z.hasOwn(t,e)?"image/"+t[e]:"image/"+e})()===e.type)})(r));if(0<o.length)return e.preventDefault(),n=o,Promise.all(C(n,t=>av(t).then(e=>({file:t,uri:e})))).then(e=>{t&&f.selection.setRng(t),Y(e,e=>{{var t=f,r,n,o,a,i,s;const{data:l,type:d}=rv(e.uri),c=e.file,u=t.editorUpload.blobCache,m=u.getByData(l,d),g=null!=m?m:(e=t,r=u,n=c,o=l,a=Nx(),i=Ds(e)&&H(n.name),e=i?(e=e,s=n.name.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i),H(s)?e.dom.encode(s[1]):null):a,s=i?n.name:void 0,i=r.create(a,n,o,e,s),r.add(i),i);return void Rx(t,`<img src="${g.blobUri()}">`,!1)}})}),!0}return!1},Lx=(e,t,r,n)=>{let o=wx(r);var r=Bx(t,gx())||px(r),a=!r&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(o),i=Sx(o);((n=yx(o)||!o.length||a&&!i?!0:n)||i)&&(o=Bx(t,"text/plain")&&a?t["text/plain"]:(e=>{const n=wa(),t=Sv({},n);let o="";const a=n.getVoidElements(),i=Z.makeMap("script noscript style textarea video audio iframe object"," "),s=n.getBlockElements(),l=e=>{var t=e.name,r=e;if("br"!==t){if("wbr"!==t)if(a[t]&&(o+=" "),i[t])o+=" ";else{if(3===e.type&&(o+=e.value),!(e.name in n.getVoidElements())&&(e=e.firstChild))for(;l(e),e=e.next;);s[t]&&r.next&&(o+="\n","p"===t&&(o+="\n"))}}else o+="\n"};return e=Cx(e,[/<!\[[^\]]+\]>/g]),l(t.parse(e)),o})(o)),yx(o)||(n?Tx(e,o):Rx(e,o,r))},Mx=(e,t,r)=>{{var a=e,i=t,s=r;let o;a.on("keydown",e=>{var t;t=e,(ie.metaKeyPressed(t)&&86===t.keyCode||t.shiftKey&&45===t.keyCode)&&!e.isDefaultPrevented()&&(o=e.shiftKey&&86===e.keyCode)}),a.on("paste",e=>{if(!e.isDefaultPrevented()&&(t=e,!J.os.isAndroid()||0!==(null==(t=null==(t=t.clipboardData)?void 0:t.items)?void 0:t.length))){var t;const r="text"===s.get()||o,n=(o=!1,Ox(e.clipboardData));!Px(n)&&Dx(a,e,i.getLastRng()||a.selection.getRng())||(Bx(n,"text/html")?(e.preventDefault(),Lx(a,n,n["text/html"],r)):(i.create(),Dm.setEditorTimeout(a,()=>{var e=i.getHtml();i.remove(),Lx(a,n,e,r)},0)))}})}var o;(o=e).parser.addNodeFilter("img",(e,t,r)=>{if(!Ml(o)&&!0===(null==(r=r.data)?void 0:r.paste))for(const t of e){const e=t.attr("src");V(e)&&!t.attr("data-mce-object")&&e!==J.transparentSrc&&(n=e,at(n,"webkit-fake-url")||!$l(o)&&(n=e,at(n,"data:")))&&t.remove()}var n})},Ix=(e,t,r,n)=>{((e,t,r)=>{try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",r),e.setData(gx(),t),!0}catch(e){return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),n()):r(t.html,n)},Fx=l=>(e,t)=>{const{dom:r,selection:n}=l,o=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=r.create("div",{contenteditable:"true"},e),i=(r.setStyles(o,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),o.appendChild(a),r.add(l.getBody(),o),n.getRng()),s=(a.focus(),r.createRng());s.selectNodeContents(a),n.setRng(s),Dm.setEditorTimeout(l,()=>{n.setRng(i),r.remove(o),t()},0)},Ux=e=>({html:(e=>fx+e)(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),zx=e=>!e.selection.isCollapsed()||(e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()))(e),jx=(e,t)=>{var r;return nm.getCaretRangeFromPoint(null!=(r=t.clientX)?r:0,null!=(r=t.clientY)?r:0,e.getDoc())},Vx=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},Hx=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,qx=e=>Z.trim(e).replace(Hx,Nc).toLowerCase(),$x=(e,t,i)=>{const s=Ul(e);if(i||"all"===s||!zl(e))return t;const l=s?s.split(/[, ]/):[];if(l&&"none"!==s){const i=e.dom,s=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(e,n,t,r)=>{const o=i.parseStyle(i.decode(t)),a={};for(let r=0;r<l.length;r++){const n=o[l[r]];let e=n,t=i.getStyle(s,l[r],!0);/color/.test(l[r])&&(e=qx(e),t=qx(t)),t!==e&&(a[l[r]]=n)}t=i.serializeStyle(a,"span");return t?n+' style="'+t+'"'+r:n+r})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(e,t,r,n)=>t+' style="'+r+'"'+n)},Wx=n=>{const o=za(!1),a=za(Hl(n)?"text":"html"),l=(i=>{const s=za(null);return{create:()=>{{var e=i,t=s;const{dom:r,selection:n}=e,o=e.getBody(),a=(t.set(n.getRng()),r.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},hx));return J.browser.isFirefox()&&r.setStyle(a,"left","rtl"===r.getStyle(o,"direction",!0)?65535:-65535),r.bind(a,"beforedeactivate focusin focusout",e=>{e.stopPropagation()}),a.focus(),void n.select(a,!0)}},remove:()=>{{var e=i,t=s;const o=e.dom;if(vx(e)){for(var r,n=t.get();r=vx(e);)o.remove(r),o.unbind(r);n&&e.selection.setRng(n)}return void t.set(null)}},getEl:()=>vx(i),getHtml:()=>{{var e=i;const r=e.dom,n=(e,t)=>{e.appendChild(t),r.remove(t,!0)},[o,...a]=T(e.getBody().childNodes,bx);Y(a,e=>{n(o,e)});var t=r.select("div[id=mcepastebin]",o);for(let e=t.length-1;0<=e;e--){const a=r.create("div");o.insertBefore(a,t[e]),n(a,t[e])}return o?o.innerHTML:""}},getLastRng:s.get}})(n);var r,e,i,s,t,d,c;t=n,(J.browser.isChromium()||J.browser.isSafari())&&(d=t,c=$x,d.on("PastePreProcess",e=>{e.content=c(d,e.content,e.internal)})),s=a,(i=n).addCommand("mceTogglePlainTextPaste",()=>{var e,t;e=i,"text"===(t=s).get()?(t.set("html"),Tu(e,!1)):(t.set("text"),Tu(e,!0)),e.focus()}),i.addCommand("mceInsertClipboardContent",(e,t)=>{t.html&&Rx(i,t.html,t.internal),t.text&&Tx(i,t.text)}),r=n,t=t=>e=>{t(r,e)},e=Il(r),q(e)&&r.on("PastePreProcess",t(e)),e=Fl(r),q(e)&&r.on("PastePostProcess",t(e)),n.on("PreInit",()=>{var i,s,e,t,r;(e=n).on("cut",(r=e,e=>{!e.isDefaultPrevented()&&zx(r)&&Ix(e,Ux(r),Fx(r),()=>{if(J.browser.isChromium()||J.browser.isFirefox()){const e=r.selection.getRng();Dm.setEditorTimeout(r,()=>{r.selection.setRng(e),r.execCommand("Delete")},0)}else r.execCommand("Delete")})})),e.on("copy",(t=e,e=>{!e.isDefaultPrevented()&&zx(t)&&Ix(e,Ux(t),Fx(t),$)})),i=n,s=o,Ll(i)&&i.on("dragend dragover draggesture dragdrop drop drag",e=>{e.preventDefault(),e.stopPropagation()}),Ml(i)||i.on("drop",e=>{var t=e.dataTransfer;t&&(t=t,G(t.files,e=>/^image\//.test(e.type)))&&e.preventDefault()}),i.on("drop",e=>{if(!e.isDefaultPrevented()&&!s.get()){const t=jx(i,e);if(!de(t)){const r=Ox(e.dataTransfer),n=Bx(r,gx());if(Px(r)&&!(()=>{const e=r["text/plain"];return!!e&&0===e.indexOf("file://")})()||!Dx(i,e,t)){const o=r[gx()],a=o||r["text/html"]||r["text/plain"];a&&(e.preventDefault(),Dm.setEditorTimeout(i,()=>{i.undoManager.transact(()=>{o&&i.execCommand("Delete"),Vx(i,t);var e=wx(a);r["text/html"]?Rx(i,e,n):Tx(i,e)})}))}}}}),i.on("dragstart",e=>{s.set(!0)}),i.on("dragover dragend",e=>{Ml(i)&&!1===s.get()&&(e.preventDefault(),Vx(i,jx(i,e))),"dragend"===e.type&&s.set(!1)}),Mx(n,l,a)})},Kx=e=>oe(e)&&ao(re(e)),Gx=((fh=Zh=Zh||{}).Before="before",fh.After="after",(r,t)=>(e=>he(e,(e,o)=>e.fold(()=>P.some(o),e=>{var t=Math.min(o.left,e.left),r=Math.min(o.top,e.top),n=Math.max(o.right,e.right),e=Math.max(o.bottom,e.bottom);return P.some({top:r,right:n,bottom:e,left:t,width:n-t,height:e-r})}),P.none()))(T(r,e=>{return t>=e.top&&t<=e.bottom})).fold(()=>[[],r],o=>{var{pass:e,fail:t}=fe(r,e=>{var t=o;n=e,r=t;var r,n=Math.max(0,Math.min(n.bottom,r.bottom)-Math.max(n.top,r.top))/Math.min(e.height,t.height);return e.top<t.bottom&&e.bottom>t.top&&.5<n});return[e,t]})),Yx=(e,t,r)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Xx=(e,n,o)=>{const a=e=>Fo(e.node)?P.some(e):oe(e.node)?Xx(Te(e.node.childNodes),n,o):P.none(),t=(e,r)=>{const t=Ee(e,(e,t)=>r(e,n,o)-r(t,n,o));return((e,t)=>{if(2<=e.length){var r=a(e[0]).getOr(e[0]),e=a(e[1]).getOr(e[1]);if(Math.abs(t(r,n,o)-t(e,n,o))<2){if(O(r.node))return P.some(r);if(O(e.node))return P.some(e)}}return P.none()})(t,r).orThunk(()=>Oe(t,a))},[r,i]=Gx(T0(e),o),{pass:s,fail:l}=fe(i,e=>e.top<o);return t(r,Yx).orThunk(()=>t(l,vi)).orThunk(()=>t(s,vi))},Qx=(e,t,r)=>((e,t,r)=>{const n=re(e),o=Er(n),a=(e=o,i=t,s=r,P.from(e.dom.elementFromPoint(i,s)).map(br).filter(e=>Sr(n,e)).getOr(n));var i,s;{var l=n,d=t,c=r;const u=(r,e)=>e.fold(()=>Xx(Te(r.dom.childNodes),d,c),t=>{var e=T(Te(r.dom.childNodes),e=>e!==t.dom);return Xx(e,d,c)}).orThunk(()=>{var e;return(S(r,l)?P.none():(e=r,P.from(e.dom.parentElement).map(re))).bind(e=>u(e,P.some(r)))});return u(a,P.none())}})(e,t,r).filter(e=>md(e.node)).map(e=>((e,t)=>({node:e.node,position:((e,t)=>Math.abs(e.left-t))(e,t)<((e,t)=>Math.abs(e.right-t))(e,t)?Zh.Before:Zh.After}))(e,t)),Jx=e=>{var t=e.getBoundingClientRect(),e=e.ownerDocument,r=e.documentElement,e=e.defaultView;return{top:t.top+e.pageYOffset-r.clientTop,left:t.left+e.pageXOffset-r.clientLeft}},Zx=_,ek=In,tk=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},rk=e=>{e.on(e=>{tk(e.ghost)}),e.clear()},nk=e=>{const t=Wa(),r=ae.DOM,n=document,o=e=>{if(0===e.button){var t=be(g.dom.getParents(e.target),(n=[Zx,ek],t=>{for(let e=0;e<n.length;e++)if(n[e](t))return!0;return!1})).getOr(null),r=g.getBody();if(Zx(o=t)&&o!==r){const r=g.dom.getPos(t),o=g.getBody(),a=g.getDoc().documentElement;m.set({element:t,dragging:!1,screenX:e.screenX,screenY:e.screenY,maxX:(g.inline?o.scrollWidth:a.offsetWidth)-2,maxY:(g.inline?o.scrollHeight:a.offsetHeight)-2,relX:e.pageX-r.x,relY:e.pageY-r.y,width:t.offsetWidth,height:t.offsetHeight,ghost:((e,t,r,n)=>{const o=e.dom,a=t.cloneNode(!0),i=(o.setStyles(a,{width:r,height:n}),o.setAttrib(a,"data-mce-selected",null),o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"}));return o.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:r,height:n}),o.setStyles(a,{margin:0,boxSizing:"border-box"}),i.appendChild(a),i})(g,t,t.offsetWidth,t.offsetHeight)})}}var n,r,o},a=((e,m)=>{const g=Ka((e,t)=>{m._selectionOverrides.hideFakeCaret(),m.selection.placeCaretAt(e,t)},0);return m.on("remove",g.cancel),u=>e.on(r=>{const n=Math.max(Math.abs(u.screenX-r.screenX),Math.abs(u.screenY-r.screenY));if(!r.dragging&&10<n){if(m.dispatch("dragstart",{target:r.element}).isDefaultPrevented())return;r.dragging=!0,m.focus()}if(r.dragging){o=r,c=u,s=(s=a=m).inline?Jx(s.getBody()):{left:0,top:0},d=(l=a).getBody(),l=l.inline?{left:d.scrollLeft,top:d.scrollTop}:{left:0,top:0},d=a;const n={pageX:(e={pageX:(d=(a=c).target.ownerDocument!==d.getDoc()?(c=Jx(d.getContentAreaContainer()),t=(d=d).getBody(),i=d.getDoc().documentElement,e={left:t.scrollLeft,top:t.scrollTop},t={left:t.scrollLeft||i.scrollLeft,top:t.scrollTop||i.scrollTop},i=d.inline?e:t,{left:a.pageX-c.left+i.left,top:a.pageY-c.top+i.top}):{left:a.pageX,top:a.pageY}).left-s.left+l.left,pageY:d.top-s.top+l.top}).pageX-o.relX,pageY:e.pageY+5};t=r.ghost,c=m.getBody(),t.parentNode!==c&&c.appendChild(t);{i=r.ghost;a=n;d=r.width;s=r.height;l=r.maxX;o=r.maxY;let e=0,t=0;i.style.left=a.pageX+"px",i.style.top=a.pageY+"px",l<a.pageX+d&&(e=a.pageX+d-l),o<a.pageY+s&&(t=a.pageY+s-o),i.style.width=d-e+"px",i.style.height=s-t+"px"}g.throttle(u.clientX,u.clientY)}var o,a,i,e,s,l,d,t,c})})(m=t,g=e),i=a=>{c.on(t=>{if(t.dragging){if(n=(e=u).selection.getSel().getRangeAt(0).startContainer,n=3===n.nodeType?n.parentNode:n,r=t.element,n!==r&&!e.dom.isChildOf(n,r)&&!Zx(n)){const o=(()=>{const e=t.element.cloneNode(!0);return e.removeAttribute("data-mce-selected"),e})();u.dispatch("drop",{clientX:a.clientX,clientY:a.clientY}).isDefaultPrevented()||u.undoManager.transact(()=>{tk(t.element),u.insertContent(u.dom.getOuterHTML(o)),u._selectionOverrides.hideFakeCaret()})}u.dispatch("dragend")}var e,r,n}),rk(c)},s=(l=c=t,()=>{l.on(e=>{e.dragging&&d.dispatch("dragend")}),rk(l)});var l,d,c,u,m,g;(d=u=e).on("mousedown",o),e.on("mousemove",a),e.on("mouseup",i),r.bind(n,"mousemove",a),r.bind(n,"mouseup",s),e.on("remove",()=>{r.unbind(n,"mousemove",a),r.unbind(n,"mouseup",s)}),e.on("keydown",e=>{e.keyCode===ie.ESC&&s()})},ok=_,ak=(e,t)=>Vf(e.getBody(),t),ik=d=>{const c=d.selection,u=d.dom,e=u.isBlock,m=d.getBody(),o=dd(d,m,e,()=>Vm(d)),l="sel-"+u.uniqueId(),g="data-mce-selected";let f;const p=e=>e!==m&&(ok(e)||Un(e))&&u.isChildOf(e,m),h=(e,t,r,n=!0)=>d.dispatch("ShowCaret",{target:t,direction:e,before:r}).isDefaultPrevented()?null:(n&&c.scrollIntoView(t,-1===e),o.show(r,t)),t=e=>xo(e)||Eo(e)||No(e),v=e=>t(e.startContainer)||t(e.endContainer),b=(e,t)=>{if(!e)return null;if(e.collapsed){if(!v(e)){const d=t?1:-1,c=Dd(d,m,e),u=c.getNode(!t);if(md(u))return h(d,u,!!t&&!c.isAtEnd(),!1);const l=c.getNode(t);if(md(l))return h(d,l,!t&&!c.isAtEnd(),!1)}return null}let r=e.startContainer,n=e.startOffset;t=e.endOffset;if(3===r.nodeType&&0===n&&ok(r.parentNode)&&(r=r.parentNode,n=u.nodeIndex(r),r=r.parentNode),1!==r.nodeType)return null;if(t===n+1&&r===e.endContainer){const e=r.childNodes[n];if(p(e)){t=e;const o=t.cloneNode(!0),a=d.dispatch("ObjectSelected",{target:t,targetClone:o});if(a.isDefaultPrevented())return null;const i=((e,t)=>{const r=re(d.getBody()),n=d.getDoc(),o=Yn(r,"#"+l).getOrThunk(()=>{var e=yr('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',n);return tr(e,"id",l),on(r,e),e}),a=u.createRng(),i=(sn(o),an(o,[Cr(go,n),re(t),Cr(go,n)]),a.setStart(o.dom.firstChild,1),a.setEnd(o.dom.lastChild,0),Yr(o,{top:u.getPos(e,d.getBody()).y+"px"}),xm(o),c.getSel());return i.removeAllRanges(),i.addRange(a),a})(t,a.targetClone),s=re(t);return Y(Xa(re(d.getBody()),"*[data-mce-selected]"),e=>{S(s,e)||ir(e,g)}),u.getAttrib(t,g)||t.setAttribute(g,"1"),f=t,C(),i;return}}return null},y=()=>{f&&f.removeAttribute(g),Yn(re(d.getBody()),"#"+l).each(ne),f=null},C=()=>{o.hide()};if(!Zv(d)){d.on("click",e=>{var t=ak(d,e.target);t&&ok(t)&&(e.preventDefault(),d.focus())}),d.on("blur NewBlock",y),d.on("ResizeWindow FullscreenStateChanged",o.reposition),d.on("tap",e=>{var t=e.target,r=ak(d,t);ok(r)?(e.preventDefault(),Ay(d,r).each(b)):p(t)&&Ay(d,t).each(b)},!0),d.on("mousedown",t=>{var e,r,n,o,a,i,s=t.target;if((s===m||"HTML"===s.nodeName||u.isChildOf(s,m))&&!1!=(e=d,r=t.clientX,n=t.clientY,i=re(e.getBody()),i=e.inline?i:re(Er(i).dom.documentElement),e=e.inline,r=r,n=n,o=(a=i).dom.getBoundingClientRect(),r={x:r-(e?o.left+a.dom.clientLeft+xb(a):0),y:n-(e?o.top+a.dom.clientTop+wb(a):0)},n=i,e=r.x,o=r.y,a=yb(n),n=Cb(n),0<=e&&0<=o&&e<=a&&o<=n)){y(),C();const l=ak(d,s);ok(l)?(t.preventDefault(),Ay(d,l).each(b)):Qx(m,t.clientX,t.clientY).each(e=>{t.preventDefault(),(e=h(1,e.node,e.position===Zh.Before,!1))&&c.setRng(e),(oe(l)?l:d.getBody()).focus()})}}),d.on("keypress",e=>{ie.modifierPressed(e)||ok(c.getNode())&&e.preventDefault()}),d.on("GetSelectionRange",e=>{let t=e.range;f&&(f.parentNode?((t=t.cloneRange()).selectNode(f),e.range=t):f=null)}),d.on("SetSelectionRange",e=>{e.range=(e=>{const t=d.schema.getVoidElements(),r=u.createRng(),n=e.startContainer,o=e.startOffset,a=e.endContainer,i=e.endOffset;return Q(t,n.nodeName.toLowerCase())?0===o?r.setStartBefore(n):r.setStartAfter(n):r.setStart(n,o),Q(t,a.nodeName.toLowerCase())?0===i?r.setEndBefore(a):r.setEndAfter(a):r.setEnd(a,i),r})(e.range);var t=b(e.range,e.forward);t&&(e.range=t)}),d.on("AfterSetSelectionRange",e=>{var e=e.range,t=e.startContainer.parentNode;v(e)||"mcepastebin"===t.id||C(),e=t,u.hasClass(e,"mce-offscreen-selection")||y()});var r=d;if(nk(r),Sl(r)){var a=r;const s=e=>{var t;e.isDefaultPrevented()||(t=e.dataTransfer)&&(K(t.types,"Files")||0<t.files.length)&&(e.preventDefault(),"drop"===e.type&&Ab(a,"Dropped file type is not supported"))},w=e=>{Im(a,e.target)&&s(e)},x=()=>{const t=ae.DOM,r=a.dom,n=document,o=a.inline?a.getBody():a.getDoc(),e=["drop","dragover"];Y(e,e=>{t.bind(n,e,w),r.bind(o,e,s)}),a.on("remove",()=>{Y(e,e=>{t.unbind(n,e,w),r.unbind(o,e,s)})})};a.on("init",()=>{Dm.setEditorTimeout(a,x,0)})}{var n=d;const k=Ka(()=>{var e;!n.removed&&n.getBody().contains(document.activeElement)&&(e=n.selection.getRng()).collapsed&&(e=Ry(n,e,!1),n.selection.setRng(e))},0);n.on("focus",()=>{k.throttle()}),n.on("blur",()=>{k.cancel()})}(i=d).on("init",()=>{i.on("focusin",e=>{var t=e.target;if(Un(t)){const e=Vf(i.getBody(),t),r=_(e)?e:t;i.selection.getNode()!==r&&Ay(i,r).each(e=>i.selection.setRng(e))}})})}return{showCaret:h,showBlockCaretContainer:e=>{e.hasAttribute("data-mce-caret")&&(Ao(e),c.scrollIntoView(e))},hideFakeCaret:C,destroy:()=>{o.destroy(),f=null}};var i},sk=(t,e,r)=>{if(O(e)&&(r<0||r>e.data.length))return[];const n=[r];let o=e;for(;o!==t&&o.parentNode;){const t=o.parentNode;for(let e=0;e<t.childNodes.length;e++)if(t.childNodes[e]===o){n.push(e);break}o=t}return o===t?n.reverse():[]},lk=(e,t,r,n,o)=>({start:sk(e,t,r),end:sk(e,n,o)}),dk=(e,t)=>{const r=t.slice(),n=r.pop();return he(r,(e,t)=>e.bind(e=>P.from(e.childNodes[t])),P.some(e)).bind(e=>O(e)&&(n<0||n>e.data.length)?P.none():P.some({node:e,offset:n}))},ck=(e,t)=>dk(e,t.start).bind(({node:n,offset:o})=>dk(e,t.end).map(({node:e,offset:t})=>{const r=document.createRange();return r.setStart(n,o),r.setEnd(e,t),r})),uk=(e,t,r)=>{var n;t&&e.isEmpty(t)&&!r(t)&&(n=t.parentNode,e.remove(t),uk(e,n,r))},mk=(e,t,r,n=!0)=>{var o=t.startContainer.parentNode,a=t.endContainer.parentNode;t.deleteContents(),n&&!r(t.startContainer)&&(O(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),O(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),uk(e,o,r),o!==a&&uk(e,a,r))},gk=(e,t)=>P.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),fk=(n,o,t)=>{((e,t)=>{if(O(e)&&e.length<=0)return P.some(a1(e,0));{const r=ci(i1);return P.from(r.forwards(e,0,s1(e),t)).map(e=>a1(e.container,0))}})(o,o).each(e=>{const r=e.container;c1(r,t.start.length,o).each(e=>{const t=n.createRng();t.setStart(r,0),t.setEnd(e.container,e.offset),mk(n,t,e=>e===o)})})},pk=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),hk=(e,t)=>{const r=e.createRng();return r.setStartAfter(t.start),r.setEndBefore(t.end),r},vk=(e,t,r)=>{const n=ck(e.getRoot(),r).getOrDie("Unable to resolve path range"),o=n.startContainer,a=n.endContainer,i=0===n.endOffset?a:a.splitText(n.endOffset),s=0===n.startOffset?o:o.splitText(n.startOffset);return{prefix:t,end:i.parentNode.insertBefore(pk(e,t+"-end"),i),start:s.parentNode.insertBefore(pk(e,t+"-start"),s)}},bk=(e,t,r)=>{uk(e,e.get(t.prefix+"-end"),r),uk(e,e.get(t.prefix+"-start"),r)},yk=e=>0===e.start.length,Ck=(n,t,o,e)=>{const a=t.start;var i;return u1(n,e.container,e.offset,(i=a,(e,t)=>{const r=e.data.substring(0,t),n=r.lastIndexOf(i.charAt(i.length-1)),o=r.lastIndexOf(i);return-1!==o?o+i.length:-1!==n?n+1:-1}),o).bind(r=>{if(r.offset>=a.length){const t=n.createRng();return t.setStart(r.container,r.offset-a.length),t.setEnd(r.container,r.offset),P.some(t)}var e=r.offset-a.length;return d1(r.container,e,o).map(e=>{const t=n.createRng();return t.setStart(e.container,e.offset),t.setEnd(r.container,r.offset),t}).filter(e=>e.toString()===a).orThunk(()=>Ck(n,t,o,a1(r.container,0)))})},wk=(o,a,i)=>{const s=o.dom,l=s.getRoot(),d=i.pattern,c=i.position.container,u=i.position.offset;return d1(c,u-i.pattern.end.length,a).bind(e=>{const n=lk(l,e.container,e.offset,c,u);if(yk(d))return P.some({matches:[{pattern:d,startRng:n,endRng:n}],position:e});{const c=xk(o,i.remainingPatterns,e.container,e.offset,a),u=c.getOr({matches:[],position:e}),t=u.position,r=((e,r,t,n,o,a=!1)=>{if(0!==r.start.length||a)return l1(t,n,o).bind(t=>Ck(e,r,o,t).bind(e=>{if(a){if(e.endContainer===t.container&&e.endOffset===t.offset)return P.none();if(0===t.offset&&e.endContainer.textContent.length===e.endOffset)return P.none()}return P.some(e)}));{const r=e.createRng();return r.setStart(t,n),r.setEnd(t,n),P.some(r)}})(s,d,t.container,t.offset,a,c.isNone());return r.map(e=>{r=l,t=e;var t,r=lk(r,t.startContainer,t.startOffset,t.endContainer,t.endOffset);return{matches:u.matches.concat([{pattern:d,startRng:r,endRng:n}]),position:a1(e.startContainer,e.startOffset)}})}})},xk=(o,a,e,i,s)=>{const l=o.dom;return l1(e,i,l.getRoot()).bind(t=>{const r=l.createRng();r.setStart(s,0),r.setEnd(e,i);var n=r.toString();for(let e=0;e<a.length;e++){const i=a[e];if(it(n,i.end)){const l=a.slice(),r=(l.splice(e,1),wk(o,s,{pattern:i,remainingPatterns:l,position:t}));if(r.isSome())return r}}return P.none()})},kk=(t,e,r)=>{t.selection.setRng(r),"inline-format"===e.type?Y(e.format,e=>{t.formatter.apply(e)}):t.execCommand(e.cmd,!1,e.value)},Sk=(r,n,o)=>{const a=r.selection.getRng();return!1===a.collapsed?[]:gk(r,a).bind(e=>{var t=Math.max(0,a.startOffset-(o?1:0));return xk(r,n,a.startContainer,t,e)}).fold(()=>[],e=>e.matches)},_k=(u,e)=>{if(0!==e.length){const m=u.dom,t=u.selection.getBookmark(),r=((n,e)=>{const o=ai("mce_textpattern"),a=pe(e,(e,t)=>{var r=vk(n,o+("_end"+e.length),t.endRng);return e.concat([{...t,endMarker:r}])},[]);return pe(a,(e,t)=>{var r=a.length-e.length-1,r=yk(t.pattern)?t.endMarker:vk(n,o+"_start"+r,t.startRng);return e.concat([{...t,startMarker:r}])},[])})(m,e);Y(r,e=>{const t=m.getParent(e.startMarker.start,m.isBlock),r=e=>e===t;{var n,o,a,i;yk(e.pattern)?(n=u,o=e.pattern,a=e.endMarker,i=r,a=hk(n.dom,a),mk(n.dom,a,i),kk(n,o,a)):(i=u,n=e.pattern,o=e.startMarker,a=e.endMarker,s=r,l=i.dom,d=hk(l,a),c=hk(l,o),mk(l,c,s),mk(l,d,s),c={prefix:o.prefix,start:o.end,end:a.start},d=hk(l,c),kk(i,n,d))}var s,l,d,c;bk(m,e.endMarker,r),bk(m,e.startMarker,r)}),u.selection.moveToBookmark(t)}},Ek=(o,e)=>{if(!o.selection.isCollapsed()||!(0<e.inlinePatterns.length||0<e.blockPatterns.length))return!1;const i=Sk(o,e.inlinePatterns,!1),s=((r,n)=>{const o=r.dom,e=r.selection.getRng();return gk(r,e).filter(e=>{var t=Ns(r),t=o.is(e,t);return null!==e&&t}).bind(t=>{const r=t.textContent,e=((e,t)=>{const r=t.replace(go," ");return be(e,e=>0===t.indexOf(e.start)||0===r.indexOf(e.start))})(n,r);return e.map(e=>Z.trim(r).length===e.start.length?[]:[{pattern:e,range:lk(o.getRoot(),t,0,t,0)}])}).getOr([])})(o,e.blockPatterns);return(0<s.length||0<i.length)&&(o.undoManager.add(),o.undoManager.extra(()=>{o.execCommand("mceInsertNewLine")},()=>{var a,e,t;o.insertContent(mo),_k(o,i),a=o,0!==(e=s).length&&(t=a.selection.getBookmark(),Y(e,e=>{{var t=a;const r=t.dom,n=e.pattern,o=ck(r.getRoot(),e.range).getOrDie("Unable to resolve path range");return gk(t,o).each(e=>{"block-format"===n.type?(e=>{e=t.formatter.get(e);return le(e)&&Ae(e).exists(e=>Q(e,"block"))})(n.format)&&t.undoManager.transact(()=>{fk(t.dom,e,n),t.formatter.apply(n.format)}):"block-command"===n.type&&t.undoManager.transact(()=>{fk(t.dom,e,n),t.execCommand(n.cmd,!1,n.value)})}),!0}}),a.selection.moveToBookmark(t));const r=o.selection.getRng(),n=l1(r.startContainer,r.startOffset,o.dom.getRoot());o.execCommand("mceInsertNewLine"),n.each(e=>{const t=e.container;t.data.charAt(e.offset-1)===mo&&(t.deleteData(e.offset-1,1),uk(o.dom,t.parentNode,e=>e===o.dom.getRoot()))})}),!0)},Nk=(e,t)=>{if(0<t.length){const r=Sk(e,t,!0);0<r.length&&e.undoManager.transact(()=>{_k(e,r)})}},Ak=(t,r,n)=>{for(let e=0;e<t.length;e++)if(n(t[e],r))return!0;return!1},Rk=r=>{const t=[",",".",";",":","!","?"],n=[32],o=()=>gs(Wl(r));r.on("keydown",e=>{var t;13!==e.keyCode||ie.modifierPressed(e)||Ek(r,(t=Wl(r),{inlinePatterns:gs(t),blockPatterns:(t=t,(e=>Ee(e,(e,t)=>e.start.length===t.start.length?0:e.start.length>t.start.length?-1:1))(T(t,us)))}))&&e.preventDefault()},!0),r.on("keyup",e=>{Ak(n,e,(e,t)=>e===t.keyCode&&!1===ie.modifierPressed(t))&&Nk(r,o())}),r.on("keypress",e=>{Ak(t,e,(e,t)=>e.charCodeAt(0)===t.charCode)&&Dm.setEditorTimeout(r,()=>{Nk(r,o())})})},Tk=ae.DOM,Ok=e=>Ue(e,e=>!1===D(e)),Bk=e=>{const t=e.options.get,r=e.editorUpload.blobCache;return Ok({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),remove_trailing_brs:t("remove_trailing_brs"),inline_styles:t("inline_styles"),root_name:(n=e).inline?n.getElement().nodeName.toLowerCase():void 0,validate:!0,blob_cache:r,document:e.getDoc()});var n},Pk=e=>{const t=e.options.get;return Ok({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html")})},Dk=e=>(e.inline?e.ui:e.dom).styleSheetLoader,Lk=e=>{const t=Dk(e),r=Xs(e),n=e.contentCSS,o=()=>{t.unloadAll(n),e.inline||e.ui.styleSheetLoader.unloadAll(r)},a=()=>{e.removed?o():e.on("remove",o)};if(0<e.contentStyles.length){let t="";Z.each(e.contentStyles,e=>{t+=e+"\r\n"}),e.dom.addStyle(t)}var i=Promise.all(((e,t,r)=>{const n=[Dk(e).loadAll(t)];return e.inline?n:n.concat([e.ui.styleSheetLoader.loadAll(r)])})(e,n,r)).then(a).catch(a),s=Ys(e);if(s){var l=e;const d=re(l.getBody()),c=Vr(jr(d)),u=te("style");tr(u,"type","text/css"),on(u,Cr(s)),on(c,u),l.on("remove",()=>{ne(u)})}return i},Mk=e=>{if(!0!==e.removed){r=e,Zv(r)||r.load({initial:!0,format:"html"}),r.startContent=r.getContent({format:"raw"});{var n;(r=e).bindPendingEventDelegates(),r.initialized=!0,r.dispatch("Init"),r.focus(!0),e=(n=r).dom.getRoot(),n.inline||fu(n)&&n.selection.getStart(!0)!==e||oc(e).each(e=>{const t=e.getNode(),r=An(t)?oc(t).getOr(e):e;n.selection.setRng(r.toRange())}),r.nodeChanged({initial:!0});const o=Tl(r);q(o)&&o.call(r,r);{var t=r;const a=Bl(t);a&&Dm.setEditorTimeout(t,()=>{let e;(e=!0===a?t:t.editorManager.get(a)).destroyed||e.focus()},100)}}}var r},Ik=t=>{var a,r,e=t.getElement();let n=t.getDoc();t.inline&&(Tk.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const o=t.getBody();o.disabled=!0,t.readonly=Cl(t),t.readonly||(t.inline&&"static"===Tk.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,t.editorUpload=Ub(t),t.schema=wa(Pk(t)),t.dom=ae(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:()=>t.inline,schema:t.schema,contentCssCors:Vs(t),referrerPolicy:Hs(t),onSetAttrib:e=>{t.dispatch("SetAttrib",e)}}),t.parser=(s=>{const e=Sv(Bk(s),s.schema);return e.addAttributeFilter("src,href,style,tabindex",(e,t)=>{let r,n,o=e.length;const a=s.dom,i="data-mce-"+t;for(;o--;)if(r=e[o],(n=r.attr(t))&&!r.attr(i)){if(0===n.indexOf("data:")||0===n.indexOf("blob:"))continue;"style"===t?((n=a.serializeStyle(a.parseStyle(n),r.name)).length||(n=null),r.attr(i,n),r.attr(t,n)):"tabindex"===t?(r.attr(i,n),r.attr(t,null)):r.attr(i,s.convertURL(n,t,r.name))}}),e.addNodeFilter("script",e=>{let t=e.length;for(;t--;){const r=e[t],n=r.attr("type")||"no/type";0!==n.indexOf("mce-")&&r.attr("type","mce-"+n)}}),s.options.get("preserve_cdata")&&e.addNodeFilter("#cdata",e=>{let t=e.length;for(;t--;){const r=e[t];r.type=8,r.name="#comment",r.value="[CDATA["+s.dom.encode(r.value)+"]]"}}),e.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",e=>{let t=e.length;for(var r=s.schema.getNonEmptyElements();t--;){const s=e[t];s.isEmpty(r)&&0===s.getAll("br").length&&s.append(new ng("br",1))}}),e})(t),t.serializer=db((e=>{const t=e.options.get;return{...Bk(e),...Pk(e),...Ok({url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}})(t),t),t.selection=ib(t.dom,t.getWin(),t.serializer,t),t.annotator=xu(t),t.formatter=Yb(t),t.undoManager=Qb(t),t._nodeChangeDispatcher=new mx(t),t._selectionOverrides=ik(t);{var i=t;const u=Wa(),m=za(!1),g=Ga(e=>{i.dispatch("longpress",{...e,type:"longpress"}),m.set(!0)},400);i.on("touchstart",t=>{pC(t).each(e=>{g.cancel();e={x:e.clientX,y:e.clientY,target:t.target};g.throttle(t),m.set(!1),u.set(e)})},!0),i.on("touchmove",e=>{g.cancel(),pC(e).each(n=>{u.on(e=>{var t,r;t=n,e=e,r=Math.abs(t.clientX-e.x),t=Math.abs(t.clientY-e.y),(5<r||5<t)&&(u.clear(),m.set(!1),i.dispatch("longpresscancel"))})})},!0),i.on("touchend touchcancel",t=>{g.cancel(),"touchcancel"!==t.type&&u.get().filter(e=>e.target.isEqualNode(t.target)).each(()=>{m.get()?t.preventDefault():i.dispatch("tap",{...t,type:"tap"})})},!0)}(r=e=t).on("click",e=>{r.dom.getParent(e.target,"details")&&e.preventDefault()}),(e=e).parser.addNodeFilter("details",e=>{Y(e,e=>{e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),e.serializer.addNodeFilter("details",e=>{Y(e,e=>{var t=e.attr("data-mce-open");e.attr("open",V(t)?t:null),e.attr("data-mce-open",null)})});{var s=t;const f="contenteditable",p=" "+Z.trim(Gl(s))+" ",h=" "+Z.trim(Kl(s))+" ",v=bC(p),b=bC(h),y=Yl(s);0<y.length&&s.on("BeforeSetContent",r=>{{var n=s,o=y;let e=o.length,t=r.content;if("raw"!==r.format){for(;e--;)t=t.replace(o[e],((o,a,i)=>function(e){var t=arguments,r=t[t.length-2],n=0<r?a.charAt(r-1):"";if('"'===n)return e;if(">"===n){const o=a.lastIndexOf("<",r);if(-1!==o&&-1!==a.substring(o,r).indexOf('contenteditable="false"'))return e}return'<span class="'+i+'" data-mce-content="'+o.dom.encode(t[0])+'">'+o.dom.encode("string"==typeof t[1]?t[1]:t[0])+"</span>"})(n,t,Kl(n)));r.content=t}return}}),s.parser.addAttributeFilter("class",e=>{let t=e.length;for(;t--;){const r=e[t];v(r)?r.attr(f,"true"):b(r)&&r.attr(f,"false")}}),s.serializer.addAttributeFilter(f,e=>{let t=e.length;for(;t--;){const r=e[t];(v(r)||b(r))&&(0<y.length&&r.attr("data-mce-content")?(r.name="#text",r.type=3,r.raw=!0,r.value=r.attr("data-mce-content")):r.attr(f,null))}})}Zv(t)||((a=t).on("click",e=>{if(3<=e.detail){var t=a;const r=t.selection.getRng(),n=B.fromRangeStart(r),o=B.fromRangeEnd(r);if(B.isElementPosition(n)){const t=n.container();Kx(t)&&oc(t).each(e=>r.setStart(e.container(),e.offset()))}if(B.isElementPosition(o)){const t=n.container();Kx(t)&&ac(t).each(e=>r.setEnd(e.container(),e.offset()))}t.selection.setRng(Jf(r))}}),e=t,Rk(e));var e=ux(t);fC(t,e),(e=t).on("NodeChange",N(vC,e));{var l=t;const C=l.dom,w=Ns(l),x=tl(l),k=(e,t)=>{var r,n;r=e,ey(r)&&(n=r.keyCode,!ty(r)&&(ie.metaKeyPressed(r)||r.altKey||112<=n&&n<=123||K(Jb,n)))||(r=l.getBody(),n=e,e=!(ey(n)&&!(ty(n)||"keyup"===n.type&&229===n.keyCode))&&((e,t,r)=>{if(Go(re(t),!1)){const n=t.firstElementChild;return!n||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&r===n.nodeName.toLowerCase()}return!1})(C,r,w),""!==C.getAttrib(r,Zb)===e&&!t||(C.setAttrib(r,Zb,e?x:null),C.setAttrib(r,"aria-placeholder",e?x:null),l.dispatch("PlaceholderToggle",{state:e}),l.on(e?"keydown":"keyup",k),l.off(e?"keyup":"keydown",k)))};x&&l.on("init",e=>{k(e,!0),l.on("change SetContent ExecCommand",k),l.on("paste",e=>Dm.setEditorTimeout(l,()=>k(e)))})}Wx(t);const d=(e=>{const t=e;return r=e,R(r.plugins,"rtc").bind(e=>P.from(e.setup)).fold(()=>(t.rtcInstance=Jv(e),P.none()),e=>(t.rtcInstance=(()=>{var e=W(null),t=W("");return{init:{bindEvents:$},undoManager:{beforeChange:$,add:e,undo:e,redo:e,clear:$,reset:$,hasUndo:A,hasRedo:A,transact:e,ignore:$,extra:$},formatter:{match:A,matchAll:W([]),matchNode:W(void 0),canApply:A,closest:t,apply:$,remove:$,toggle:$,formatChanged:W({unbind:$})},editor:{getContent:t,setContent:W({content:"",html:""}),insertContent:W(""),addVisual:$},selection:{getContent:t},autocompleter:{addDecoration:$,removeDecoration:$},raw:{getModel:W(P.none())}}})(),P.some(()=>e().then(l=>(t.rtcInstance=(()=>{const o=e=>se(e)?e:{},{init:e,undoManager:a,formatter:i,editor:r,selection:n,autocompleter:t,raw:s}=l;return{init:{bindEvents:e.bindEvents},undoManager:{beforeChange:a.beforeChange,add:a.add,undo:a.undo,redo:a.redo,clear:a.clear,reset:a.reset,hasUndo:a.hasUndo,hasRedo:a.hasRedo,transact:(e,t,r)=>a.transact(r),ignore:(e,t)=>a.ignore(t),extra:(e,t,r,n)=>a.extra(r,n)},formatter:{match:(e,t,r,n)=>i.match(e,o(t),n),matchAll:i.matchAll,matchNode:i.matchNode,canApply:e=>i.canApply(e),closest:e=>i.closest(e),apply:(e,t,r)=>i.apply(e,o(t)),remove:(e,t,r,n)=>i.remove(e,o(t)),toggle:(e,t,r)=>i.toggle(e,o(t)),formatChanged:(e,t,r,n,o)=>i.formatChanged(t,r,n,o)},editor:{getContent:e=>r.getContent(e),setContent:(e,t)=>({content:r.setContent(e,t),html:""}),insertContent:(e,t)=>(r.insertContent(e),""),addVisual:r.addVisual},selection:{getContent:(e,t)=>n.getContent(t)},autocompleter:{addDecoration:t.addDecoration,removeDecoration:t.removeDecoration},raw:{getModel:()=>P.some(s.getRawModel())}}})(),l.rtc.isRemote)))));var r})(t);{var c=t;const S=c.getDoc(),_=c.getBody(),E=(c.dispatch("PreInit"),Pl(c)||(S.body.spellcheck=!1,Tk.setAttrib(_,"spellcheck","false")),c.quirks=(a=>{const r=Z.each,n=ie.BACKSPACE,o=ie.DELETE,i=a.dom,s=a.selection,e=a.parser,t=J.browser,l=t.isFirefox(),d=t.isChromium()||t.isSafari(),c=J.deviceType.isiPhone()||J.deviceType.isiPad(),u=J.os.isMacOS()||J.os.isiOS(),m=(e,t)=>{try{a.getDoc().execCommand(e,!1,t)}catch(e){}},g=e=>e.isDefaultPrevented(),f=()=>{a.shortcuts.add("meta+a",null,"SelectAll")},p=()=>{a.inline||i.bind(a.getDoc(),"mousedown mouseup",e=>{var t;e.target===a.getDoc().documentElement&&(t=s.getRng(),a.getBody().focus(),"mousedown"===e.type?xo(t.startContainer)||s.placeCaretAt(e.clientX,e.clientY):s.setRng(t))})},h=()=>{Range.prototype.getClientRects||a.on("mousedown",e=>{if(!g(e)&&"HTML"===e.target.nodeName){const e=a.getBody();e.blur(),Dm.setEditorTimeout(a,()=>{e.focus()})}})},v=()=>{const r=Nl(a);a.on("click",e=>{var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&"false"!==i.getContentEditableParent(t)&&(e.preventDefault(),a.selection.select(t),a.nodeChanged()),"A"===t.nodeName&&i.hasClass(t,r)&&0===t.childNodes.length&&(e.preventDefault(),s.select(t))})},b=()=>{a.on("keydown",e=>{if(!g(e)&&e.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const t=s.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},y=()=>{Cl(a)||a.on("BeforeExecCommand mousedown",()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),Zs(a)||m("enableObjectResizing",!1)})},C=()=>{a.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},w=()=>{a.inline||a.on("keydown",()=>{document.activeElement===document.body&&a.getWin().focus()})},x=()=>{a.inline||(a.contentStyles.push("body {min-height: 150px}"),a.on("click",e=>{"HTML"===e.target.nodeName&&(e=a.selection.getRng(),a.getBody().focus(),a.selection.setRng(e),a.selection.normalize(),a.nodeChanged())}))},k=()=>{u&&a.on("keydown",e=>{!ie.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),a.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))})},S=()=>{a.on("click",e=>{let t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),a.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},_=()=>{a.on("init",()=>{a.dom.bind(a.getBody(),"submit",e=>{e.preventDefault()})})},E=$;if(Zv(a))d&&(p(),v(),_(),f(),c&&(w(),x(),S())),l&&(h(),y(),C(),k());else{a.on("keydown",e=>{let t,r;if(!g(e)&&e.keyCode===ie.BACKSPACE){var e=(t=s.getRng()).startContainer,n=t.startOffset,o=i.getRoot();if(r=e,t.collapsed&&0===n){for(;r&&r.parentNode&&r.parentNode.firstChild===r&&r.parentNode!==o;)r=r.parentNode;"BLOCKQUOTE"===r.tagName&&(a.formatter.toggle("blockquote",null,r),(t=i.createRng()).setStart(e,0),t.setEnd(e,0),s.setRng(t))}}});{const N=e=>{const t=i.create("body"),r=e.cloneContents();return t.appendChild(r),s.serializer.serialize(t,{format:"html"})};a.on("keydown",e=>{var t,r=e.keyCode;g(e)||r!==o&&r!==n||(r=a.selection.isCollapsed(),t=a.getBody(),r&&!i.isEmpty(t)||(r||(e=>{const t=N(e),r=i.createRng();return r.selectNode(a.getBody()),t===N(r)})(a.selection.getRng()))&&(e.preventDefault(),a.setContent(""),t.firstChild&&i.isBlock(t.firstChild)?a.selection.setCursorLocation(t.firstChild,0):a.selection.setCursorLocation(t,0),a.nodeChanged()))})}if(J.windowsPhone||a.on("keyup focusin mouseup",e=>{ie.modifierPressed(e)||s.normalize()},!0),d&&(p(),v(),a.on("init",()=>{m("DefaultParagraphSeparator",Ns(a))}),_(),b(),e.addNodeFilter("br",e=>{let t=e.length;for(;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),c?(w(),x(),S()):f()),l){a.on("keydown",e=>{if(!g(e)&&e.keyCode===n&&a.getBody().getElementsByTagName("hr").length&&s.isCollapsed()&&0===s.getRng().startOffset){const a=s.getNode(),n=a.previousSibling;if("HR"===a.nodeName)return i.remove(a),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(i.remove(n),e.preventDefault())}}),h();{const A=()=>{const e=i.getAttribs(s.getStart().cloneNode(!1));return()=>{const t=s.getStart();t!==a.getBody()&&(i.setAttrib(t,"style",null),r(e,e=>{t.setAttributeNode(e.cloneNode(!0))}))}},R=()=>!s.isCollapsed()&&i.getParent(s.getStart(),i.isBlock)!==i.getParent(s.getEnd(),i.isBlock);a.on("keypress",e=>{let t;if(!g(e)&&(8===e.keyCode||46===e.keyCode)&&R())return t=A(),a.getDoc().execCommand("delete",!1,null),t(),e.preventDefault(),!1}),i.bind(a.getDoc(),"cut",e=>{let t;!g(e)&&R()&&(t=A(),Dm.setEditorTimeout(a,()=>{t()}))})}y(),a.on("SetContent ExecCommand",e=>{"setcontent"!==e.type&&"mceInsertLink"!==e.command||r(i.select("a"),e=>{let t=e.parentNode;var r=i.getRoot();if(t.lastChild===e){for(;t&&!i.isBlock(t);){if(t.parentNode.lastChild!==t||t===r)return;t=t.parentNode}i.add(t,"br",{"data-mce-bogus":1})}})}),C(),k(),b()}}return{refreshContentEditable:E,isHidden:()=>{if(!l||a.removed)return!1;var e=a.selection.getSel();return!e||!e.rangeCount||0===e.rangeCount}}})(c),c.dispatch("PostRender"),void 0!==(e=Qs(c))&&(_.dir=e),Dl(c));E&&c.on("BeforeSetContent",t=>{Z.each(E,e=>{t.content=t.content.replace(e,e=>"\x3c!--mce:protected "+escape(e)+"--\x3e")})}),c.on("SetContent",()=>{c.addVisual(c.getBody())}),c.on("compositionstart compositionend",e=>{c.composing="compositionstart"===e.type})}d.fold(()=>{Lk(t).then(()=>Mk(t))},e=>{t.setProgressState(!0),Lk(t).then(()=>{e().then(e=>{t.setProgressState(!1),Mk(t),tb(t)},e=>{t.notificationManager.open({type:"error",text:String(e)}),Mk(t),tb(t)})})})},Fk=(e,t)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),t||e.inline)Ik(e);else{const t=e.iframeElement,n=(r=re(t),un(r,"load",Pb,()=>{n.unbind(),e.contentDocument=t.contentDocument,Ik(e)}));t.srcdoc=e.iframeHTML}var r},Uk=ae.DOM,zk=ae.DOM,jk=e=>({editorContainer:e,iframeContainer:e,api:{}}),Vk=e=>{var t=e.getElement();{if(e.orgDisplay=t.style.display,V(ol(e)))return e.theme.renderUI();if(q(ol(e))){var t;const r=(t=e).getElement(),n=ol(t)(t,r);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||t.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||t.id+"_iframecontainer"),n.height=n.iframeHeight||r.offsetHeight,n}return e=(t=e).getElement(),t.inline?jk(null):(t=e,e=zk.create("div"),zk.insertAfter(e,t),jk(e))}},Hk=e=>{e.dispatch("ScriptsLoaded");{var r=e;const d=Z.trim(Ms(r)),c=r.ui.registry.getAll().icons,u={...pb.get("default").icons,...pb.get(d).icons};X(u,(e,t)=>{Q(c,t)||r.ui.registry.addIcon(t,e)})}var t=e,n=ol(t);if(V(n)){const m=_b.get(n);t.theme=m(t,_b.urls[n])||{},q(t.theme.init)&&t.theme.init(t,_b.urls[n]||t.documentBaseUrl.replace(/\/$/,""))}else t.theme={};{n=e;const g=il(n),f=hb.get(g);n.model=f(n,hb.urls[g])}{var s=e;const p=[];Y(xl(s),e=>{{var t=s,r=p;e=e.replace(/^\-/,"");const o=Sb.get(e),a=Sb.urls[e]||t.documentBaseUrl.replace(/\/$/,"");if(e=Z.trim(e),o&&-1===Z.inArray(r,e)&&!t.plugins[e])try{const i=o(t,a)||{};t.plugins[e]=i,q(i.init)&&(i.init(t,a),r.push(e))}catch(r){var n=r;e=qa.translate(["Failed to initialize plugin: {0}",e]),_u(t,"PluginLoadError",{message:e}),Ob(e,n),Ab(t,e)}return}})}var o,a,t=Vk(e),n=(o=e,a=P.from(t.api).getOr({}),n={show:P.from(a.show).getOr($),hide:P.from(a.hide).getOr($),isEnabled:P.from(a.isEnabled).getOr(y),setEnabled:t=>{o.mode.isReadOnly()||P.from(a.setEnabled).each(e=>e(t))}},o.ui={...o.ui,...n},{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer});if(e.editorContainer=n.editorContainer||null,(t=e).contentCSS=t.contentCSS.concat((i=t,Bb(i,Gs(i))),(i=t,Bb(i,Xs(i)))),e.inline)return Fk(e);var t=e,i=n;{var l=t,e=i;const h=l.translate("Rich Text Area"),v=or(re(l.getElement()),"tabindex").bind(gt),b=((e,t,r,n)=>{const o=te("iframe");return n.each(e=>tr(o,"tabindex",e)),rr(o,r),rr(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),gr(o,"tox-edit-area__iframe"),o})(l.id,h,Cs(l),v).dom;b.onload=()=>{b.onload=null,l.dispatch("load")},l.contentAreaContainer=e.iframeContainer,l.iframeElement=b,l.iframeHTML=(e=>{let t=ws(e)+"<html><head>";xs(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var r=ks(e),n=Ss(e),o=e.translate(Al(e));return _s(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+_s(e)+'" />'),t+=`</head><body id="${r}" class="mce-content-body ${n}" data-id="${e.id}" aria-label="${o}"><br></body></html>`})(l),Uk.add(e.iframeContainer,b)}i.editorContainer&&(Uk.get(i.editorContainer).style.display=t.orgDisplay,t.hidden=Uk.isHidden(i.editorContainer)),t.getElement().style.display="none",Uk.setAttrib(t.id,"aria-hidden","true"),Fk(t)},qk=ae.DOM,$k=e=>"-"===e.charAt(0),Wk=(t,e,r)=>P.from(e).filter(e=>ut(e)&&!pb.has(e)).map(e=>({url:t.editorManager.baseURL+`/icons/${e}/icons${r}.js`,name:P.some(e)})),Kk=(e,t)=>{const r=Ua.ScriptLoader,n=()=>{!e.removed&&(e=>{e=ol(e);return!V(e)||H(_b.get(e))})(e)&&(e=>{e=il(e);return H(hb.get(e))})(e)&&Hk(e)};{var o=e,a=t;const g=ol(o);if(V(g)&&!$k(g)&&!Q(_b.urls,g)){const f=al(o),p=f?o.documentBaseURI.toAbsolute(f):`themes/${g}/theme${a}.js`;_b.load(g,p).catch(()=>{var e,t,r;e=o,t=p,r=g,Rb(e,"ThemeLoadError",Tb("theme",t,r))})}}{var i=e;a=t;const h=il(i);if("plugin"!==h&&!Q(hb.urls,h)){const v=sl(i),b=V(v)?i.documentBaseURI.toAbsolute(v):`models/${h}/model${a}.js`;hb.load(h,b).catch(()=>{var e,t,r;e=i,t=b,r=h,Rb(e,"ModelLoadError",Tb("model",t,r))})}}{a=r;var s=e;const y=qs(s),C=$s(s);if(!1===qa.hasCode(y)&&"en"!==y){const w=ut(C)?C:`${s.editorManager.baseURL}/langs/${y}.js`;a.add(w).catch(()=>{var e,t,r;e=s,t=w,r=y,Rb(e,"LanguageLoadError",Tb("language",t,r))})}}c=r,u=e,a=t,a=Wk(u,"default",a),m=u,m=P.from(Is(m)).filter(ut).map(e=>({url:e,name:P.none()})).orThunk(()=>Wk(u,Ms(u),"")),Y((t=>{const r=[],n=e=>{r.push(e)};for(let e=0;e<t.length;e++)t[e].each(n);return r})([a,m]),n=>{c.add(n.url).catch(()=>{var e,t,r;e=u,t=n.url,r=n.name.getOrUndefined(),Rb(e,"IconsLoadError",Tb("icons",t,r))})});{var l=e,d=t;const x=(n,o)=>{Sb.load(n,o).catch(()=>{var e,t,r;e=l,t=o,r=n,Rb(e,"PluginLoadError",Tb("plugin",t,r))})};X(kl(l),(e,t)=>{x(t,e),l.options.set("plugins",xl(l).concat(t))}),Y(xl(l),e=>{!(e=Z.trim(e))||Sb.urls[e]||$k(e)||x(e,`plugins/${e}/plugin${d}.js`)})}var c,u,m;r.loadQueue().then(n,n)},Gk=Lt().deviceType,Yk=Gk.isPhone(),Xk=Gk.isTablet(),Qk=e=>{if(de(e))return[];e=le(e)?e:e.split(/[ ,]/),e=C(e,lt);return T(e,ut)},Jk=(e,t)=>Q(e.sections(),t),Zk=(e,t,r,n,o)=>{var a,i,s,l;const d=e?{mobile:(i=null!=(i=o.mobile)?i:{},t=t,{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:R(i,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}})}:{},c=(a=["mobile"],i=i=E1(d,o),t={},o={},Fe(i,(e,t)=>K(a,t),Ie(t),Ie(o)),t=(i={t:t,f:o}).t,o=i.f,{sections:W(t),options:W(o)}),u=Z.extend(r,n,c.options(),(t=c,e&&Jk(t,"mobile")?(e=>{e=e.sections(),e=R(e,"mobile").getOr({});return Z.extend({},{},e)})(c):{}),{external_plugins:((e,t)=>{t=null!=(t=t.external_plugins)?t:{};return e&&e.external_plugins?Z.extend({},e.external_plugins,t):t})(n,c.options())});return o=e,r=c,t=n,e=u,t=Qk(t.forced_plugins),n=Qk(e.plugins),l=r,l=Jk(l,"mobile")?l.sections().mobile:{},o=o,r=r,s=n,l=l.plugins?Qk(l.plugins):n,n=o&&Jk(r,"mobile")?l:s,o=t,r=n,l=[].concat(Qk(o)).concat(Qk(r)),Z.extend(e,{forced_plugins:t,plugins:l})},eS=(e,t)=>{const r=e.selection,n=e.dom;var o,a;return/^ | $/.test(t)?(e=n,o=r.getRng(),a=t,e=re(e.getRoot()),a=Zg(e,B.fromRangeStart(o))?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),ef(e,B.fromRangeEnd(o))?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")):t},tS=(o,e)=>{const{content:t,details:a}="string"!=typeof(e=e)?(r=Z.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:r}):{content:e,details:{}};var r;Av(o,{content:eS(o,t),format:"html",set:!1,selection:!0,paste:a.paste}).each(e=>{n=o,t=e.content,r=a;var t,r,n=eb(n).editor.insertContent(t,r);Rv(o,n,e),o.addVisual()})},rS={"font-size":"size","font-family":"face"},nS=r=>(t,e)=>P.from(e).map(re).filter(Xt).bind(e=>((r,t,e)=>lp(re(e),e=>(t=>Jr(t,r).orThunk(()=>"font"===ee(t)?R(rS,r).bind(e=>or(t,e)):P.none()))(e),e=>S(re(t),e)))(r,t,e.dom).or(((e,t)=>P.from(ae.DOM.getStyle(t,e,!0)))(r,e.dom))).getOr(""),oS=nS("font-size"),aS=g(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),nS("font-family")),iS=e=>oc(e.getBody()).map(e=>{e=e.container();return O(e)?e.parentNode:e}),sS=(e,t)=>((e,t)=>(r=>P.from(r.selection.getRng()).bind(e=>{var t=r.getBody();return e.startContainer===t&&0===e.startOffset?P.none():P.from(r.selection.getStart(!0))}))(e).orThunk(N(iS,e)).map(re).filter(Xt).bind(t))(e,f(P.some,t)),lS=(e,t)=>{var r,n;return/^[0-9.]+$/.test(t)&&1<=(r=parseInt(t,10))&&r<=7?(n=e,n=Z.explode(n.options.get("font_size_style_values")),e=e,(e=Z.explode(e.options.get("font_size_classes")))?e[r-1]||t:n[r-1]||t):t},dS=e=>{g=t=>()=>{Y("left,center,right,justify".split(","),e=>{t!==e&&m.formatter.remove("align"+e)}),"none"!==t&&(m.formatter.toggle("align"+t,void 0),m.nodeChanged())},(m=f=e).editorCommands.addCommands({JustifyLeft:g("left"),JustifyCenter:g("center"),JustifyRight:g("right"),JustifyFull:g("justify"),JustifyNone:g("none")}),g=r=>()=>{const e=u.selection,t=e.isCollapsed()?[u.dom.getParent(e.getNode(),u.dom.isBlock)]:e.getSelectedBlocks();return G(t,e=>H(u.formatter.matchNode(e,r)))},(u=f).editorCommands.addCommands({JustifyLeft:g("alignleft"),JustifyCenter:g("aligncenter"),JustifyRight:g("alignright"),JustifyFull:g("alignjustify")},"state"),(c=e).editorCommands.addCommands({"Cut,Copy,Paste":e=>{const t=c.getDoc();let r;try{t.execCommand(e)}catch(e){r=!0}if((r="paste"!==e||t.queryCommandEnabled(e)?r:!0)||!t.queryCommandSupported(e)){let e=c.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(J.os.isMacOS()||J.os.isiOS())&&(e=e.replace(/Ctrl\+/g,"⌘+")),c.notificationManager.open({text:e,type:"error"})}}}),(d=e).editorCommands.addCommands({mceAddUndoLevel:()=>{d.undoManager.add()},mceEndUndoLevel:()=>{d.undoManager.add()},Undo:()=>{d.undoManager.undo()},Redo:()=>{d.undoManager.redo()}}),(l=e).editorCommands.addCommands({mceSelectNodeDepth:(e,t,r)=>{let n=0;l.dom.getParent(l.selection.getNode(),e=>{if(1===e.nodeType&&n++===r)return l.selection.select(e),!1},l.getBody())},mceSelectNode:(e,t,r)=>{l.selection.select(r)},selectAll:()=>{var e=l.dom.getParent(l.selection.getStart(),In);if(e){const t=l.dom.createRng();t.selectNodeContents(e),l.selection.setRng(t)}}}),(s=e).editorCommands.addCommands({mceCleanup:()=>{var e=s.selection.getBookmark();s.setContent(s.getContent()),s.selection.moveToBookmark(e)},insertImage:(e,t,r)=>{tS(s,s.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{s.execCommand("mceInsertContent",!1,"<hr>")},insertText:(e,t,r)=>{tS(s,s.dom.encode(r))},insertHTML:(e,t,r)=>{tS(s,r)},mceInsertContent:(e,t,r)=>{tS(s,r)},mceSetContent:(e,t,r)=>{s.setContent(r)},mceReplaceContent:(e,t,r)=>{s.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,s.selection.getContent({format:"text"})))},mceNewDocument:()=>{s.setContent("")}}),f=(e,t,r)=>{const n=V(r)?{href:r}:r,o=i.dom.getParent(i.selection.getNode(),"a");se(n)&&V(n.href)&&(n.href=n.href.replace(/ /g,"%20"),o&&n.href||i.formatter.remove("link"),n.href&&i.formatter.apply("link",n,o))},(i=e).editorCommands.addCommands({unlink:()=>{var e;i.selection.isCollapsed()?(e=i.dom.getParent(i.selection.getStart(),"a"))&&i.dom.remove(e,!0):i.formatter.remove("link")},mceInsertLink:f,createLink:f}),(t=e).editorCommands.addCommands({Indent:()=>{var e;e=t,cC(e,"indent")},Outdent:()=>{uC(t)}}),t.editorCommands.addCommands({Outdent:()=>sC(t)},"state"),(a=e).editorCommands.addCommands({insertParagraph:()=>{rx(a)},mceInsertNewLine:(e,t,r)=>{rx(a,r)},InsertLineBreak:(e,t,r)=>{qw(a,r)}}),(n=g=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":e=>{n.getDoc().execCommand(e);var t,r=n.dom.getParent(n.selection.getNode(),"ol,ul");if(r){const e=r.parentNode;/^(H[1-6]|P|ADDRESS|PRE)$/.test(e.nodeName)&&(t=n.selection.getBookmark(),n.dom.split(e,r),n.selection.moveToBookmark(t))}}}),(r=g).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":e=>{var t=r.dom.getParent(r.selection.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state");var o,r,n,a,t,i,s,l,d,c,u,m,g,f=e;{var p=f;const v=(e,t)=>{p.formatter.toggle(e,t),p.nodeChanged()};p.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{v(e)},"ForeColor,HiliteColor":(e,t,r)=>{v(e,{value:r})},BackColor:(e,t,r)=>{v("hilitecolor",{value:r})},FontName:(e,t,r)=>{var n=p;r=lS(n,r),n.formatter.toggle("fontname",{value:(e=>{e=e.split(/\s*,\s*/);return C(e,e=>-1===e.indexOf(" ")||at(e,'"')||at(e,"'")?e:`'${e}'`).join(",")})(r)}),n.nodeChanged()},FontSize:(e,t,r)=>{var n;r=r,(n=p).formatter.toggle("fontsize",{value:lS(n,r)}),n.nodeChanged()},LineHeight:(e,t,r)=>{var n;(n=p).formatter.toggle("lineheight",{value:String(r)}),n.nodeChanged()},Lang:(e,t,r)=>{v(e,{value:r.code,customValue:r.customCode})},RemoveFormat:e=>{p.formatter.remove(e)},mceBlockQuote:()=>{v("blockquote")},FormatBlock:(e,t,r)=>{v(V(r)?r:"p")},mceToggleFormat:(e,t,r)=>{v(r)}})}{var h=f;const b=e=>h.formatter.match(e);h.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>b(e),mceBlockQuote:()=>b("blockquote")},"state"),h.editorCommands.addQueryValueHandler("FontName",()=>(t=>sS(t,e=>aS(t.getBody(),e.dom)).getOr(""))(h)),h.editorCommands.addQueryValueHandler("FontSize",()=>(t=>sS(t,e=>oS(t.getBody(),e.dom)).getOr(""))(h)),h.editorCommands.addQueryValueHandler("LineHeight",()=>(n=>sS(n,r=>{const e=re(n.getBody()),t=lp(r,e=>Jr(e,"line-height"),N(S,e));return t.getOrThunk(()=>{var e=parseFloat(Xr(r,"line-height")),t=parseFloat(Xr(r,"font-size"));return String(e/t)})}).getOr(""))(h))}(o=e).editorCommands.addCommands({mceRemoveNode:(e,t,r)=>{r=null!=r?r:o.selection.getNode();if(r!==o.getBody()){const e=o.selection.getBookmark();o.dom.remove(r,!0),o.selection.moveToBookmark(e)}},mcePrint:()=>{o.getWin().print()},mceFocus:(e,t,r)=>{var n;(n=o).removed||(r?Hm:t=>{const e=t.selection,r=t.getBody();let n=e.getRng();t.quirks.refreshContentEditable(),void 0!==t.bookmark&&!1===Vm(t)&&Bm(t).each(e=>{t.selection.setRng(e),n=e});o=t,a=e.getNode();var o,a=o.dom.getParent(a,e=>"true"===o.dom.getContentEditable(e));if(t.dom.isChildOf(a,r))return jm(a),zm(t,n),void Hm(t);t.inline||(J.browser.isOpera()||jm(r),t.getWin().focus()),(J.browser.isFirefox()||t.inline)&&(jm(r),zm(t,n)),Hm(t)})(n)},mceToggleVisualAid:()=>{o.hasVisual=!o.hasVisual,o.addVisual()}})};class cS{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,t,r,n){const o=this.editor,a=e.toLowerCase(),i=null==n?void 0:n.skip_focus;if(o.removed)return!1;if("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?(s=o,Bm(s).each(e=>s.selection.setRng(e))):o.focus()),o.dispatch("BeforeExecCommand",{command:e,ui:t,value:r}).isDefaultPrevented())return!1;var s;const l=this.commands.exec[a];return!!q(l)&&(l(a,t,r),o.dispatch("ExecCommand",{command:e,ui:t,value:r}),!0)}queryCommandState(e){if(this.editor.quirks.isHidden()||this.editor.removed)return!1;const t=e.toLowerCase(),r=this.commands.state[t];return!!q(r)&&r(t)}queryCommandValue(e){if(this.editor.quirks.isHidden()||this.editor.removed)return"";const t=e.toLowerCase(),r=this.commands.value[t];return q(r)?r(t):""}addCommands(e,r="exec"){const n=this.commands;X(e,(t,e)=>{Y(e.toLowerCase().split(","),e=>{n[r][e]=t})})}addCommand(e,n,o){e=e.toLowerCase();this.commands.exec[e]=(e,t,r)=>n.call(null!=o?o:this.editor,t,r)}queryCommandSupported(e){e=e.toLowerCase();return!!this.commands.exec[e]}addQueryStateHandler(e,t,r){this.commands.state[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}addQueryValueHandler(e,t,r){this.commands.value[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}}const uS="data-mce-contenteditable",mS=(e,t,r)=>{try{e.getDoc().execCommand(t,!1,String(r))}catch(e){}},gS=(e,t)=>{e.dom.contentEditable=t?"true":"false"},fS=e=>e.readonly,pS=t=>{t.parser.addAttributeFilter("contenteditable",e=>{fS(t)&&Y(e,e=>{e.attr(uS,e.attr("contenteditable")),e.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(uS,e=>{fS(t)&&Y(e,e=>{e.attr("contenteditable",e.attr(uS))})}),t.serializer.addTempAttr(uS)},hS=Z.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class vS{constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||A}static isNative(e){return!!hS[e.toLowerCase()]}fire(e,t){return this.dispatch(e,t)}dispatch(e,r){const n=e.toLowerCase(),o=_a(n,null!=r?r:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);var a=this.bindings[n];if(a)for(let e=0,t=a.length;e<t;e++){const r=a[e];if(!r.removed){if(r.once&&this.off(n,r.func),o.isImmediatePropagationStopped())return o;if(!1===r.func.call(this.scope,o))return o.preventDefault(),o}}return o}on(r,e,n,o){if(e=!1===e?A:e){var a={func:e,removed:!1},i=(o&&Z.extend(a,o),r.toLowerCase().split(" "));let t=i.length;for(;t--;){const r=i[t];let e=this.bindings[r];e||(e=[],this.toggleEvent(r,!0)),e=n?[a,...e]:[...e,a],this.bindings[r]=e}}return this}off(r,n){if(r){var o=r.toLowerCase().split(" ");let t=o.length;for(;t--;){var a=o[t];let e=this.bindings[a];if(!a)return X(this.bindings,(e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]}),this;if(e){if(n){const r=fe(e,e=>e.func===n);e=r.fail,this.bindings[a]=e,Y(r.pass,e=>{e.removed=!0})}else e.length=0;e.length||(this.toggleEvent(r,!1),delete this.bindings[a])}}}else X(this.bindings,(e,t)=>{this.toggleEvent(t,!1)}),this.bindings={};return this}once(e,t,r){return this.on(e,t,r,{once:!0})}has(e){return e=e.toLowerCase(),!(!this.bindings[e]||0===this.bindings[e].length)}}const bS=r=>(r._eventDispatcher||(r._eventDispatcher=new vS({scope:r,toggleEvent:(e,t)=>{vS.isNative(e)&&r.toggleNativeEvent&&r.toggleNativeEvent(e,t)}})),r._eventDispatcher),yS={fire(e,t,r){return this.dispatch(e,t,r)},dispatch(t,e,r){if(this.removed&&"remove"!==t&&"detach"!==t)return _a(t.toLowerCase(),null!=e?e:{},this);const n=bS(this).dispatch(t,e);if(!1!==r&&this.parent){let e=this.parent();for(;e&&!n.isPropagationStopped();)e.dispatch(t,n,!1),e=e.parent()}return n},on(e,t,r){return bS(this).on(e,t,r)},off(e,t){return bS(this).off(e,t)},once(e,t){return bS(this).once(e,t)},hasEventListeners(e){return bS(this).has(e)}},CS=ae.DOM;let wS;const xS=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;t=rl(e);return t?(e.eventRoot||(e.eventRoot=CS.select(t)[0]),e.eventRoot):e.getBody()},kS=(e,t,r)=>{var n,o,a,i;(i=e).hidden||fS(i)?fS(e)&&(n=e,"click"!==(o=r).type||ie.metaKeyPressed(o)||(i=re(o.target),a=n,i=i,Xn(i,"a",e=>S(e,re(a.getBody()))).bind(e=>or(e,"href")).each(e=>{if(o.preventDefault(),/^#/.test(e)){const o=n.dom.select(`${e},[name="${t=e,at(t,"#")?t.substring("#".length):t}"]`);o.length&&n.selection.scrollIntoView(o[0],!0)}else window.open(e,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes");var t}))):e.dispatch(t,r)},SS=(o,a)=>{let e;var t;o.delegates||(o.delegates={}),o.delegates[a]||o.removed||(t=xS(o,a),rl(o)?(wS||(wS={},o.editorManager.on("removeEditor",()=>{o.editorManager.activeEditor||wS&&(X(wS,(e,t)=>{o.dom.unbind(xS(o,t))}),wS=null)})),wS[a]||(e=e=>{const t=e.target,r=o.editorManager.get();let n=r.length;for(;n--;){const o=r[n].getBody();o!==t&&!CS.isChildOf(t,o)||kS(r[n],a,e)}},wS[a]=e,CS.bind(t,a,e))):(e=e=>{kS(o,a,e)},CS.bind(t,a,e),o.delegates[a]=e))},_S={...yS,bindPendingEventDelegates(){const t=this;Z.each(t._pendingNativeEvents,e=>{SS(t,e)})},toggleNativeEvent(e,t){var r=this;"focus"===e||"blur"===e||r.removed||(t?r.initialized?SS(r,e):r._pendingNativeEvents?r._pendingNativeEvents.push(e):r._pendingNativeEvents=[e]:r.initialized&&(r.dom.unbind(xS(r,e),e,r.delegates[e]),delete r.delegates[e]))},unbindAllNativeEvents(){const r=this,e=r.getBody(),t=r.dom;r.delegates&&(X(r.delegates,(e,t)=>{r.dom.unbind(xS(r,t),t,e)}),delete r.delegates),!r.inline&&e&&t&&(e.onload=null,t.unbind(r.getWin()),t.unbind(r.getDoc())),t&&(t.unbind(e),t.unbind(r.getContainer()))}},ES=e=>V(e)?{value:e.split(/[ ,]/),valid:!0}:L(e,V)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},NS=(e,t)=>e+(mt(t.message)?"":". "+t.message),AS=e=>e.valid,RS=(e,t,r="")=>{t=t(e);return E(t)?t?{value:e,valid:!0}:{valid:!1,message:r}:t},TS=["design","readonly"],OS=(e,t,r,n)=>{const o=r[t.get()],a=r[n];try{a.activate()}catch(e){return void console.error(`problem while activating editor mode ${n}:`,e)}var i,s,l,d,c;o.deactivate(),o.editorReadOnly!==a.editorReadOnly&&(r=e,i=a.editorReadOnly,c=re(r.getBody()),s=c,l="mce-content-readonly",d=i,hr(s,l)&&!1===d?pr(s,l):d&&gr(s,l),i?(r.selection.controlSelection.hideResizeRect(),r._selectionOverrides.hideFakeCaret(),d=r,P.from(d.selection.getNode()).each(e=>{e.removeAttribute("data-mce-selected")}),r.readonly=!0,gS(c,!1),Y(Xa(c,'*[contenteditable="true"]'),e=>{tr(e,uS,"true"),gS(e,!1)})):(r.readonly=!1,gS(c,!0),Y(Xa(c,'*[data-mce-contenteditable="true"]'),e=>{ir(e,uS),gS(e,!0)}),mS(r,"StyleWithCSS",!1),mS(r,"enableInlineTableEditing",!1),mS(r,"enableObjectResizing",!1),s=r,(Vm(s)||(e=>{var t=jr(re(e.getElement()));return Sm(t).filter(t=>!(()=>{const e=t.dom.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))})()&&Im(e,t.dom)).isSome()})(s))&&r.focus(),r.selection.setRng(r.selection.getRng()),r.nodeChanged())),t.set(n),e.dispatch("SwitchMode",{mode:n})},BS=Z.each,PS=Z.explode,DS={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},LS=Z.makeMap("alt,ctrl,shift,meta,access"),MS=e=>{let t;const r={},n=J.os.isMacOS()||J.os.isiOS(),o=(BS(PS(e.toLowerCase(),"+"),e=>{e in LS?r[e]=!0:/^[0-9]{2,}$/.test(e)?r.keyCode=parseInt(e,10):(r.charCode=e.charCodeAt(0),r.keyCode=DS[e]||e.toUpperCase().charCodeAt(0))}),[r.keyCode]);for(t in LS)r[t]?o.push(t):r[t]=!1;return r.id=o.join(","),r.access&&(r.alt=!0,n?r.ctrl=!0:r.shift=!0),r.meta&&(n?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r};class IS{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const r=this;e.on("keyup keypress keydown",t=>{!r.hasModifier(t)&&!r.isFunctionKey(t)||t.isDefaultPrevented()||(BS(r.shortcuts,e=>{if(r.matchShortcut(t,e))return r.pendingPatterns=e.subpatterns.slice(0),"keydown"===t.type&&r.executeShortcutAction(e),!0}),r.matchShortcut(t,r.pendingPatterns[0])&&(1===r.pendingPatterns.length&&"keydown"===t.type&&r.executeShortcutAction(r.pendingPatterns[0]),r.pendingPatterns.shift()))})}add(e,t,r,n){const o=this,a=o.normalizeCommandFunc(r);return BS(PS(Z.trim(e)),e=>{e=o.createShortcut(e,t,a,n);o.shortcuts[e.id]=e}),!0}remove(e){e=this.createShortcut(e);return!!this.shortcuts[e.id]&&(delete this.shortcuts[e.id],!0)}normalizeCommandFunc(e){const t=this,r=e;return"string"==typeof r?()=>{t.editor.execCommand(r,!1,null)}:Z.isArray(r)?()=>{t.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(e,t,r,n){const o=Z.map(PS(e,">"),MS);return o[o.length-1]=Z.extend(o[o.length-1],{func:r,scope:n||this.editor}),Z.extend(o[0],{desc:this.editor.translate(t),subpatterns:o.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&112<=e.keyCode&&e.keyCode<=123}matchShortcut(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const FS=ae.DOM,US=Z.extend,zS=Z.each;class jS{constructor(e,t,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,US(this,_S);this.id=e,this.hidden=!1,e=r.defaultOptions,a=t;e=Zk(Yk||Xk,Yk,a,e,a);this.options=(a=>{const i={},s={},l=(e,t,r)=>{t=RS(t,r);return AS(t)?(s[e]=t.value,!0):(console.warn(NS(`Invalid value passed for the ${e} option`,t)),!1)},n=e=>Q(i,e);return{register:(t,e)=>{o=e;const r=V(o.processor)?(t=>{const r=(()=>{switch(t){case"array":return le;case"boolean":return E;case"function":return q;case"number":return ce;case"object":return se;case"string":return V;case"string[]":return ES;case"object[]":return e=>L(e,se);case"regexp":return e=>b(e,RegExp)}})();return e=>RS(e,r,`The value must be a ${t}.`)})(e.processor):e.processor,n=((e,t,r)=>{if(!D(t)){t=RS(t,r);if(AS(t))return t.value;console.error(NS(`Invalid default value passed for the "${e}" option`,t))}})(t,e.default,r);var o;i[t]={...e,default:n,processor:r},R(s,t).orThunk(()=>R(a,t)).each(e=>l(t,e,r))},isRegistered:n,get:e=>R(s,e).orThunk(()=>R(i,e).map(e=>e.default)).getOrUndefined(),set:(e,t)=>{var r;return n(e)?(r=i[e]).immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):l(e,t,r.processor):(console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1)},unset:e=>{var t=n(e);return t&&delete s[e],t},isSet:e=>Q(s,e)}})(e);{var n=this;const c=n.options.register;c("id",{processor:"string",default:n.id}),c("selector",{processor:"string"}),c("target",{processor:"object"}),c("suffix",{processor:"string"}),c("cache_suffix",{processor:"string"}),c("base_url",{processor:"string"}),c("referrer_policy",{processor:"string",default:""}),c("language_load",{processor:"boolean"}),c("inline",{processor:"boolean",default:!1}),c("iframe_attrs",{processor:"object",default:{}}),c("doctype",{processor:"string",default:"<!DOCTYPE html>"}),c("document_base_url",{processor:"string",default:n.documentBaseUrl}),c("body_id",{processor:ys(n,"tinymce"),default:"tinymce"}),c("body_class",{processor:ys(n),default:""}),c("content_security_policy",{processor:"string",default:""}),c("br_in_pre",{processor:"boolean",default:!0}),c("forced_root_block",{processor:e=>{var t=V(e)&&ut(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),c("forced_root_block_attrs",{processor:"object",default:{}}),c("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),c("no_newline_selector",{processor:"string",default:""}),c("keep_styles",{processor:"boolean",default:!0}),c("end_container_on_empty_block",{processor:"boolean",default:!1}),c("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),c("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),c("font_size_classes",{processor:"string",default:""}),c("automatic_uploads",{processor:"boolean",default:!0}),c("images_reuse_filename",{processor:"boolean",default:!1}),c("images_replace_blob_uris",{processor:"boolean",default:!0}),c("icons",{processor:"string",default:""}),c("icons_url",{processor:"string",default:""}),c("images_upload_url",{processor:"string",default:""}),c("images_upload_base_path",{processor:"string",default:""}),c("images_upload_base_path",{processor:"string",default:""}),c("images_upload_credentials",{processor:"boolean",default:!1}),c("images_upload_handler",{processor:"function"}),c("language",{processor:"string",default:"en"}),c("language_url",{processor:"string",default:""}),c("entity_encoding",{processor:"string",default:"named"}),c("indent",{processor:"boolean",default:!0}),c("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),c("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),c("indent_use_margin",{processor:"boolean",default:!1}),c("indentation",{processor:"string",default:"40px"}),c("content_css",{processor:e=>{var t=!1===e||V(e)||L(e,V);return t?V(e)?{value:C(e.split(","),lt),valid:t}:!le(e)&&!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:gl(n)?[]:["default"]}),c("content_style",{processor:"string"}),c("content_css_cors",{processor:"boolean",default:!1}),c("font_css",{processor:e=>{var t=V(e)||L(e,V);return t?{value:le(e)?e:C(e.split(","),lt),valid:t}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),c("inline_boundaries",{processor:"boolean",default:!0}),c("inline_boundaries_selector",{processor:"string",default:"a[href],code,.mce-annotation"}),c("object_resizing",{processor:e=>{var t=E(e)||V(e);return t?!1===e||fs.isiPhone()||fs.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!ps}),c("resize_img_proportional",{processor:"boolean",default:!0}),c("event_root",{processor:"object"}),c("service_message",{processor:"string"}),c("theme",{processor:e=>!1===e||V(e)||q(e),default:"silver"}),c("theme_url",{processor:"string"}),c("formats",{processor:"object"}),c("format_empty_lines",{processor:"boolean",default:!1}),c("preview_styles",{processor:e=>{var t=!1===e||V(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),c("custom_ui_selector",{processor:"string",default:""}),c("hidden_input",{processor:"boolean",default:!0}),c("submit_patch",{processor:"boolean",default:!0}),c("encoding",{processor:"string"}),c("add_form_submit_trigger",{processor:"boolean",default:!0}),c("add_unload_trigger",{processor:"boolean",default:!0}),c("custom_undo_redo_levels",{processor:"number",default:0}),c("disable_nodechange",{processor:"boolean",default:!1}),c("readonly",{processor:"boolean",default:!1}),c("plugins",{processor:"string[]",default:[]}),c("external_plugins",{processor:"object"}),c("forced_plugins",{processor:"string[]"}),c("model",{processor:"string",default:n.hasPlugin("rtc")?"plugin":"dom"}),c("model_url",{processor:"string"}),c("block_unsupported_drop",{processor:"boolean",default:!0}),c("visual",{processor:"boolean",default:!0}),c("visual_table_class",{processor:"string",default:"mce-item-table"}),c("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),c("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),c("setup",{processor:"function"}),c("init_instance_callback",{processor:"function"}),c("url_converter",{processor:"function",default:n.convertURL}),c("url_converter_scope",{processor:"object",default:n}),c("urlconverter_callback",{processor:"function"}),c("allow_conditional_comments",{processor:"boolean",default:!1}),c("allow_html_data_urls",{processor:"boolean",default:!1}),c("allow_svg_data_urls",{processor:"boolean"}),c("allow_html_in_named_anchor",{processor:"boolean",default:!1}),c("allow_script_urls",{processor:"boolean",default:!1}),c("allow_unsafe_link_target",{processor:"boolean",default:!1}),c("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),c("fix_list_elements",{processor:"boolean",default:!1}),c("preserve_cdata",{processor:"boolean",default:!1}),c("remove_trailing_brs",{processor:"boolean"}),c("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),c("element_format",{processor:"string",default:"html"}),c("entities",{processor:"string"}),c("schema",{processor:"string",default:"html5"}),c("convert_urls",{processor:"boolean",default:!0}),c("relative_urls",{processor:"boolean",default:!0}),c("remove_script_host",{processor:"boolean",default:!0}),c("custom_elements",{processor:"string"}),c("extended_valid_elements",{processor:"string"}),c("invalid_elements",{processor:"string"}),c("invalid_styles",{processor:bs}),c("valid_children",{processor:"string"}),c("valid_classes",{processor:bs}),c("valid_elements",{processor:"string"}),c("valid_styles",{processor:bs}),c("verify_html",{processor:"boolean",default:!0}),c("auto_focus",{processor:e=>V(e)||!0===e}),c("browser_spellcheck",{processor:"boolean",default:!1}),c("protect",{processor:"array"}),c("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),c("deprecation_warnings",{processor:"boolean",default:!0}),c("a11y_advanced_options",{processor:"boolean",default:!1}),c("api_key",{processor:"string"}),c("paste_block_drop",{processor:"boolean",default:!1}),c("paste_data_images",{processor:"boolean",default:!0}),c("paste_preprocess",{processor:"function"}),c("paste_postprocess",{processor:"function"}),c("paste_webkit_styles",{processor:"string",default:"none"}),c("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),c("paste_merge_formats",{processor:"boolean",default:!0}),c("smart_paste",{processor:"boolean",default:!0}),c("paste_as_text",{processor:"boolean",default:!1}),c("paste_tab_spaces",{processor:"number",default:4}),c("text_patterns",{processor:e=>L(e,se)||!1===e?{value:(e=>{e=(e=>{const t=[],r=[];return Y(e,e=>{e.fold(e=>{t.push(e)},e=>{r.push(e)})}),{errors:t,values:r}})(C(e,ms));return Y(e.errors,e=>console.error(e.message,e.pattern)),e.values})(!1===e?[]:e),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),c("noneditable_class",{processor:"string",default:"mceNonEditable"}),c("editable_class",{processor:"string",default:"mceEditable"}),c("noneditable_regexp",{processor:e=>L(e,vs)?{value:e,valid:!0}:vs(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),c("table_tab_navigation",{processor:"boolean",default:!0}),n.on("ScriptsLoaded",()=>{c("directionality",{processor:"string",default:qa.isRtl()?"rtl":void 0}),c("placeholder",{processor:"string",default:hs.getAttrib(n.getElement(),"placeholder")})})}const o=this.options.get;if(o("deprecation_warnings")){var a=t;t=e;{var i=a,s=t;const u=(t=>{const e=T(ub,e=>Q(t,e)),r=t.forced_root_block;return!1!==r&&""!==r||e.push("forced_root_block (false only)"),Ee(e)})(i),m=(e=>{const t=Z.makeMap(e.plugins," "),r=T(mb,e=>Q(t,e));return Ee(r)})(s),g=0<m.length,f=0<u.length,p="mobile"===s.theme;if(g||f||p){const i="\n- ",s=p?`

Themes:
- mobile`:"",h=g?`

Plugins:
- `+m.join(i):"",v=f?`

Options:
- `+u.join(i):"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+s+h+v)}}}e=o("suffix"),e&&(r.suffix=e),this.suffix=r.suffix,a=o("base_url"),a&&r._setBaseUrl(a),this.baseUri=r.baseURI,t=Hs(this);t&&(Ua.ScriptLoader._setReferrerPolicy(t),ae.DOM.styleSheetLoader._setReferrerPolicy(t)),$a.languageLoad=o("language_load"),$a.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new fv(xs(this),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=gl(this),this.shortcuts=new IS(this),this.editorCommands=new cS(this),dS(this);const l=o("cache_suffix"),d=(l&&(J.cacheSuffix=l.replace(/^[\?\&]+/,"")),this.ui={registry:{addAutocompleter:(i=(()=>{const e={},t={},r={},n={},o={},a={},i={},s=(r,n)=>(e,t)=>r[e.toLowerCase()]={...t,type:n};return{addButton:s(e,"button"),addGroupToolbarButton:s(e,"grouptoolbarbutton"),addToggleButton:s(e,"togglebutton"),addMenuButton:s(e,"menubutton"),addSplitButton:s(e,"splitbutton"),addMenuItem:s(t,"menuitem"),addNestedMenuItem:s(t,"nestedmenuitem"),addToggleMenuItem:s(t,"togglemenuitem"),addAutocompleter:s(r,"autocompleter"),addContextMenu:s(o,"contextmenu"),addContextToolbar:s(a,"contexttoolbar"),addContextForm:s(a,"contextform"),addSidebar:s(i,"sidebar"),addIcon:(e,t)=>n[e.toLowerCase()]=t,getAll:()=>({buttons:e,menuItems:t,icons:n,popups:r,contextMenus:o,contextToolbars:a,sidebars:i})}})()).addAutocompleter,addButton:i.addButton,addContextForm:i.addContextForm,addContextMenu:i.addContextMenu,addContextToolbar:i.addContextToolbar,addIcon:i.addIcon,addMenuButton:i.addMenuButton,addMenuItem:i.addMenuItem,addNestedMenuItem:i.addNestedMenuItem,addSidebar:i.addSidebar,addSplitButton:i.addSplitButton,addToggleButton:i.addToggleButton,addGroupToolbarButton:i.addGroupToolbarButton,addToggleMenuItem:i.addToggleMenuItem,getAll:i.getAll},styleSheetLoader:void 0,show:$,hide:$,setEnabled:$,isEnabled:y},this.mode=(a=>{const i=za("design"),s=za({design:{activate:$,deactivate:$,editorReadOnly:!1},readonly:{activate:$,deactivate:$,editorReadOnly:!0}});return(e=a).serializer?pS(e):e.on("PreInit",()=>{pS(e)}),(t=a).on("ShowCaret",e=>{fS(t)&&e.preventDefault()}),t.on("ObjectSelected",e=>{fS(t)&&e.preventDefault()}),{isReadOnly:()=>fS(a),set:e=>{var t=a,r=s.get(),n=i,o=e;if(o!==n.get()){if(!Q(r,o))throw new Error(`Editor mode '${o}' is invalid`);t.initialized?OS(t,n,r,o):t.on("init",()=>OS(t,n,r,o))}},get:()=>i.get(),register:(e,t)=>{s.set(((e,t,r)=>{if(K(TS,t))throw new Error("Cannot override default mode "+t);return{...e,[t]:{...r,deactivate:()=>{try{r.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}}}})(s.get(),e,t))}};var t,e})(this),r.dispatch("SetupEditor",{editor:this}),Rl(this));q(d)&&d.call(this,this)}render(){{var t=this,e,r,n=t.id;qa.setCode(qs(t));const o=()=>{qk.unbind(window,"ready",o),t.render()};if(Ta.Event.domLoaded){if(t.getElement()){const a=re(t.getElement()),i=sr(a);t.on("remove",()=>{ge(a.dom.attributes,e=>ir(a,e.name)),rr(a,i)}),t.ui.styleSheetLoader=(e=a,r=t,Jn.forElement(e,{contentCssCors:wl(r),referrerPolicy:Hs(r)})),gl(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const s=t.getElement().form||qk.getParent(n,"form");s&&(t.formElement=s,fl(t)&&!Tn(t.getElement())&&(qk.insertAfter(qk.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=e=>{t.dispatch(e.type,e)},qk.bind(s,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!pl(t)||s.submit.nodeType||s.submit.length||s._mceOldSubmit||(s._mceOldSubmit=s.submit,s.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),s._mceOldSubmit(s)))),t.windowManager=Eb(t),t.notificationManager=kb(t),"xml"===t.options.get("encoding")&&t.on("GetContent",e=>{e.save&&(e.content=qk.encode(e.content))}),hl(t)&&t.on("submit",()=>{t.initialized&&t.save()}),vl(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),Kk(t,t.suffix)}}else qk.bind(window,"ready",o);return}}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return Vm(this)}translate(e){return qa.translate(e)}getParam(e,t,r){const n=this.options;return n.isRegistered(e)||(H(r)?n.register(e,{processor:r,default:t}):n.register(e,{processor:y,default:t})),n.isSet(e)||D(t)?n.get(e):t}hasPlugin(e,t){return!(!K(xl(this),e)||t&&void 0===Sb.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,r){this.editorCommands.addCommand(e,t,r)}addQueryStateHandler(e,t,r){this.editorCommands.addQueryStateHandler(e,t,r)}addQueryValueHandler(e,t,r){this.editorCommands.addQueryValueHandler(e,t,r)}addShortcut(e,t,r,n){this.shortcuts.add(e,t,r,n)}execCommand(e,t,r,n){return this.editorCommands.execCommand(e,t,r,n)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(FS.show(this.getContainer()),FS.hide(this.id)),this.load(),this.dispatch("show"))}hide(){var e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(FS.hide(e.getContainer()),FS.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(e){var t;let r,n=this.getElement();return this.removed?"":n?((e=e||{}).load=!0,t=Tn(n)?n.value:n.innerHTML,r=this.setContent(t,e),e.element=n,e.no_events||this.dispatch("LoadContent",e),e.element=n=null,r):void 0}save(e){const t=this;let r,n,o=t.getElement();if(o&&t.initialized&&!t.removed)return(e=e||{}).save=!0,e.element=o,r=e.content=t.getContent(e),e.no_events||t.dispatch("SaveContent",e),"raw"===e.format&&t.dispatch("RawSaveContent",e),r=e.content,Tn(o)?o.value=r:(!e.is_removing&&t.inline||(o.innerHTML=r),(n=FS.getParent(t.id,"form"))&&zS(n.elements,e=>{if(e.name===t.id)return e.value=r,!1})),e.element=o=null,!1!==e.set_dirty&&t.setDirty(!1),r}setContent(e,t){return cb(this,e,t)}getContent(e){return[n,e={}]=[this,e],t=e.format||"html",e={...e,format:t,get:!0,getInner:!0},Ev(n,e).fold(p,e=>{r=n,t=e;var t,r=eb(r).editor.getContent(t);return Nv(n,r,e)});var n,t}insertContent(e,t){t&&(e=US({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?cb(this,this.startContent,{format:"raw"}):cb(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){return this.container||(this.container=FS.get(this.editorContainer||this.id+"_parent")),this.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=FS.get(this.id)),this.targetElm}getWin(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow}getDoc(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument}getBody(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)}convertURL(e,t,r){const n=this.options.get,o=Ol(this);return q(o)?o.call(this,e,r,!0,t):!n("convert_urls")||r&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length?e:n("relative_urls")?this.documentBaseURI.toRelative(e):this.documentBaseURI.toAbsolute(e,n("remove_script_host"))}addVisual(e){var t;t=t=this,e=e,h(t).editor.addVisual(e)}remove(){var e,t,r,n,o;(e=this).removed||({_selectionOverrides:t,editorUpload:r}=e,n=e.getBody(),o=e.getElement(),n&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&gb.remove(o.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&n&&(o=e,gb.setStyle(o.id,"display",o.orgDisplay)),e.dispatch("detach"),gb.remove(e.getContainer()),fb(t),fb(r),e.destroy())}destroy(e){var t=this,{selection:r,dom:n}=t;if(!t.destroyed)if(e||t.removed){e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),fb(r),fb(n));{const o=(e=t).formElement;o&&(o._mceOldSubmit&&(o.submit=o._mceOldSubmit,o._mceOldSubmit=null),gb.unbind(o,"submit reset",e.formEventDelegate))}(r=t).contentAreaContainer=r.formElement=r.container=r.editorContainer=null,r.bodyElement=r.contentDocument=r.contentWindow=null,r.iframeElement=r.targetElm=null,r.selection&&(r.selection=r.selection.win=r.selection.dom=r.selection.dom.doc=null),t.destroyed=!0}else t.remove()}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const VS=ae.DOM,HS=Z.each;let qS,$S=!1,WS=[];const KS=t=>{const r=t.type;HS(QS.get(),e=>{switch(r){case"scroll":e.dispatch("ScrollWindow",t);break;case"resize":e.dispatch("ResizeWindow",t)}})},GS=e=>{if(e!==$S){const t=ae.DOM;e?(t.bind(window,"resize",KS),t.bind(window,"scroll",KS)):(t.unbind(window,"resize",KS),t.unbind(window,"scroll",KS)),$S=e}},YS=t=>{var e=WS;return WS=T(WS,e=>t!==e),QS.activeEditor===t&&(QS.activeEditor=0<WS.length?WS[0]:null),QS.focusedEditor===t&&(QS.focusedEditor=null),e.length!==WS.length},XS="CSS1Compat"!==document.compatMode,QS={...yS,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"0.1",releaseDate:"2022-03-23",i18n:qa,activeEditor:null,focusedEditor:null,setup(){const t=this;let r,e,n="";e=fv.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)r=o.base||o.baseURL,n=o.suffix;else{const t=document.getElementsByTagName("script");for(let e=0;e<t.length;e++){const o=t[e].src||"";if(""!==o){const a=o.substring(o.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!==a.indexOf(".min")&&(n=".min"),r=o.substring(0,o.lastIndexOf("/"));break}}}if(!r&&document.currentScript){const t=document.currentScript.src;-1!==t.indexOf(".min")&&(n=".min"),r=t.substring(0,t.lastIndexOf("/"))}}var a;t.baseURL=new fv(e).toAbsolute(r),t.documentBaseURL=e,t.baseURI=new fv(t.baseURL),t.suffix=n,(a=t).on("AddEditor",N(Fm,a)),a.on("RemoveEditor",N(Um,a))},overrideDefaults(e){var t=e.base_url,t=(t&&this._setBaseUrl(t),e.suffix),t=(e.suffix&&(this.suffix=t),(this.defaultOptions=e).plugin_base_urls);void 0!==t&&X(t,(e,t)=>{$a.PluginManager.urls[t]=e})},init(s){const l=this;let r;const d=Z.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let c=e=>{r=e};const n=()=>{let o=0;const a=[];let i;VS.unbind(window,"ready",n);{const t=s.onpageload;t&&t.apply(l,[])}var e;i=(r=>{const n=[],o=q(void 0)?t=>G(n,e=>(void 0)(e,t)):e=>K(n,e);for(let e=0,t=r.length;e<t;e++){var a=r[e];o(a)||n.push(a)}return n})((e=s,J.browser.isIE()||J.browser.isEdge()?(Ob("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):XS?(Ob("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):V(e.selector)?VS.select(e.selector):H(e.target)?[e.target]:[])),Z.each(i,e=>{(e=l.get(e.id))&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(YS(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)}),0===(i=Z.grep(i,e=>!l.get(e.id))).length?c([]):HS(i,e=>{if(r=e,s.inline&&r.tagName.toLowerCase()in d)Ob("Could not initialize inline editor on invalid inline target element",e);else{r=(e=>{let t=e.id;return t||(t=R(e,"name").filter(e=>!VS.get(e)).getOrThunk(VS.uniqueId),e.setAttribute("id",t)),t})(e);var t=s;const n=new jS(r,t,l);a.push(n),n.on("init",()=>{++o===i.length&&c(a)}),n.targetElm=n.targetElm||e,n.render()}var r})};return VS.bind(window,"ready",n),new Promise(t=>{r?t(r):c=e=>{t(e)}})},get(t){return 0===arguments.length?WS.slice(0):V(t)?be(WS,e=>e.id===t).getOr(null):ce(t)&&WS[t]?WS[t]:null},add(e){const r=this,t=r.get(e.id);return t!==e&&(null===t&&WS.push(e),GS(!0),r.activeEditor=e,r.dispatch("AddEditor",{editor:e}),qS||(qS=e=>{var t=r.dispatch("BeforeUnload");if(t.returnValue)return e.preventDefault(),e.returnValue=t.returnValue,t.returnValue},window.addEventListener("beforeunload",qS))),e},createEditor(e,t){return this.add(new jS(e,t,this))},remove(e){const t=this;let r,n;if(e){if(!V(e))return n=e,d(t.get(n.id))?null:(YS(n)&&t.dispatch("RemoveEditor",{editor:n}),0===WS.length&&window.removeEventListener("beforeunload",qS),n.remove(),GS(0<WS.length),n);HS(VS.select(e),e=>{(n=t.get(e.id))&&t.remove(n)})}else for(r=WS.length-1;0<=r;r--)t.remove(WS[r])},execCommand(e,t,r){var n,o=se(r)?null!=(n=r.id)?n:r.index:r;switch(e){case"mceAddEditor":if(!this.get(o)){const e=r.options;new jS(o,e,this).render()}return!0;case"mceRemoveEditor":{const e=this.get(o);return e&&e.remove(),!0}case"mceToggleEditor":{const e=this.get(o);return e?e.isHidden()?e.show():e.hide():this.execCommand("mceAddEditor",!1,r),!0}}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,r)},triggerSave:()=>{HS(WS,e=>{e.save()})},addI18n:(e,t)=>{qa.add(e,t)},translate:e=>qa.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new fv(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new fv(this.baseURL)}},JS=(QS.setup(),(()=>{const t=Wa();return{FakeClipboardItem:t=>({items:t,types:Be(t),getType:e=>R(t,e).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})()),ZS=Math.min,e_=Math.max,t_=Math.round,r_=(e,t,r)=>{let n=t.x,o=t.y;var a=e.w,e=e.h,i=t.w,t=t.h,r=(r||"").split("");return"b"===r[0]&&(o+=t),"r"===r[1]&&(n+=i),"c"===r[0]&&(o+=t_(t/2)),"c"===r[1]&&(n+=t_(i/2)),"b"===r[3]&&(o-=e),"r"===r[4]&&(n-=a),"c"===r[3]&&(o-=t_(e/2)),"c"===r[4]&&(n-=t_(a/2)),n_(n,o,a,e)},n_=(e,t,r,n)=>({x:e,y:t,w:r,h:n}),o_={inflate:(e,t,r)=>n_(e.x-t,e.y-r,e.w+2*t,e.h+2*r),relativePosition:r_,findBestRelativePosition:(e,t,r,n)=>{let o,a;for(a=0;a<n.length;a++)if((o=r_(e,t,n[a])).x>=r.x&&o.x+o.w<=r.w+r.x&&o.y>=r.y&&o.y+o.h<=r.h+r.y)return n[a];return null},intersect:(e,t)=>{var r=e_(e.x,t.x),n=e_(e.y,t.y),o=ZS(e.x+e.w,t.x+t.w),e=ZS(e.y+e.h,t.y+t.h);return o-r<0||e-n<0?null:n_(r,n,o-r,e-n)},clamp:(e,t,r)=>{let n=e.x,o=e.y,a=e.x+e.w,i=e.y+e.h;var e=t.x+t.w,s=t.y+t.h,l=e_(0,t.x-n),t=e_(0,t.y-o),e=e_(0,a-e),s=e_(0,i-s);return n+=l,o+=t,r&&(a+=l,i+=t,n-=e,o-=s),a-=e,i-=s,n_(n,o,a-n,i-o)},create:n_,fromClientRect:e=>n_(e.left,e.top,e.width,e.height)},a_=(()=>{const r={},s={};return{load:(n,o)=>{const a=`Script at URL "${o}" failed to load`,i=`Script at URL "${o}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==r[n])return r[n];var e=new Promise((e,t)=>{const r=((e,t)=>{let r=!1,n=null;const o=t=>(...e)=>{r||(r=!0,null!==n&&(clearTimeout(n),n=null),t.apply(null,e))},a=o(e),i=o(t);return{start:(...e)=>{r||null!==n||(n=setTimeout(()=>i.apply(null,e),1e3))},resolve:a,reject:i}})(e,t);s[n]=r.resolve,Ua.ScriptLoader.loadScript(o).then(()=>r.start(i),()=>r.reject(a))});return r[n]=e},add:(e,t)=>{void 0!==s[e]&&(s[e](t),delete s[e]),r[e]=Promise.resolve(t)},unload:e=>{delete r[e]}}})();let i_;try{const n="__storage_test__";(i_=window.localStorage).setItem(n,n),i_.removeItem(n)}catch(n){i_=(()=>{let r={},n=[];var e={getItem:e=>r[e]||null,setItem:(e,t)=>{n.push(e),r[e]=String(t)},key:e=>n[e],removeItem:t=>{n=n.filter(e=>e===t),delete r[t]},clear:()=>{n=[],r={}},length:0};return Object.defineProperty(e,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),e})()}var t={geom:{Rect:o_},util:{Delay:Dm,Tools:Z,VK:ie,URI:fv,EventDispatcher:vS,Observable:yS,I18n:qa,LocalStorage:i_,ImageUploader:r=>{const e=Db(),n=Fb(r,e);return{upload:(e,t=!0)=>n.upload(e,t?Ib(r):void 0)}}},dom:{EventUtils:Ta,TreeWalker:Zn,TextSeeker:ci,DOMUtils:ae,ScriptLoader:Ua,RangeUtils:nm,Serializer:db,StyleSheetLoader:Qn,ControlSelection:Ou,BookmarkManager:ku,Selection:ib,Event:Ta.Event},html:{Styles:xa,Entities:ua,Node:ng,Schema:wa,DomParser:Sv,Writer:cg,Serializer:ug},Env:J,AddOnManager:$a,Annotator:xu,Formatter:Yb,UndoManager:Qb,EditorCommands:cS,WindowManager:Eb,NotificationManager:kb,EditorObservable:_S,Shortcuts:IS,Editor:jS,FocusManager:Pm,EditorManager:QS,DOM:ae.DOM,ScriptLoader:Ua.ScriptLoader,PluginManager:Sb,ThemeManager:_b,ModelManager:hb,IconManager:pb,Resource:a_,FakeClipboard:JS,trim:Z.trim,isArray:Z.isArray,is:Z.is,toArray:Z.toArray,makeMap:Z.makeMap,each:Z.each,map:Z.map,grep:Z.grep,inArray:Z.inArray,extend:Z.extend,walk:Z.walk,resolve:Z.resolve,explode:Z.explode,_addCacheSuffix:Z._addCacheSuffix},fh=Z.extend(QS,t),s_=(t=fh,window.tinymce=t,window.tinyMCE=t,fh);if("object"==typeof module)try{module.exports=s_}catch(s_){}}(),function(){"use strict";function e(r){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t)===r;var t}}function a(e){return function(){return e}}function t(e){return e}function r(){return u}function n(e,t){return{isRequired:e,applyPatch:t}}function o(n,o){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=o.apply(this,e);return n.apply(this,void 0===r?e:r)}}var i="undefined"!=typeof window?window:Function("return this;")(),s=e("object"),l=e("array"),M=function(e){return void 0===e},d=a(!1),c=a(!void 0),u={fold:function(e,t){return e()},isSome:d,isNone:c,getOr:t,getOrThunk:m,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:a(null),getOrUndefined:a(void 0),or:t,orThunk:m,map:r,each:function(){},bind:r,exists:d,forall:c,filter:function(){return u},toArray:function(){return[]},toString:a("none()")};function m(e){return e()}function g(e,t){for(var r=function(e,t){for(var r=e.length,n=new Array(r),o=0;o<r;o++){var a=e[o];n[o]=t(a,o)}return n}(e,t),n=[],o=0,a=r.length;o<a;++o){if(!l(r[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+r);z.apply(n,r[o])}return n}function f(e,t){for(var r=x(e),n=0,o=r.length;n<o;n++){var a=r[n];t(e[a],a)}}function p(r){return function(e,t){r[t]=e}}function h(e,t){return k(e,t)?F(e[t]):I()}function v(i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var r={},n=0;n<e.length;n++){var o,a=e[n];for(o in a)k(a,o)&&(r[o]=i(r[o],a[o]))}return r}}function b(e){if(M(e)||""===e)return[];e=l(e)?g(e,function(e){return e.split(/[\s+,]/)}):e.split(/[\s+,]/);return g(e,function(e){return 0<e.length?[e.trim()]:[]})}function y(e){var t;return null!=(t=e.defaultOptions)?t:e.defaultSettings}function C(e,t){var r,n,o,e=S(e,t),a=b(t.plugins),i=h(e,"custom_plugin_urls").getOr({}),i=(r=function(e,t){return-1<U.call(a,t)},n=p(s={}),o=p(d={}),f(i,function(e,t){(r(e,t)?n:o)(e,t)}),{t:s,f:d}),s=h(e,"external_plugins").getOr({}),l={},d=(f(i.t,function(e,t){l[t]=e}),_(l,s));return _(t,0===x(d).length?{}:{external_plugins:d})}function w(r){function e(){return o}function t(e){return e(r)}var n=a(r),o={fold:function(e,t){return t(r)},isSome:c,isNone:d,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(e){return w(e(r))},each:function(e){e(r)},bind:t,exists:t,forall:t,filter:function(e){return e(r)?o:u},toArray:function(){return[r]},toString:function(){return"some("+r+")"}};return o}var I=r,F=function(e){return null==e?u:w(e)},U=Array.prototype.indexOf,z=Array.prototype.push,x=Object.keys,j=Object.hasOwnProperty,k=function(e,t){return j.call(e,t)},S=v(function(e,t){return s(e)&&s(t)?S(e,t):t}),_=v(function(e,t){return t}),V={getCustomPluginUrls:C,patch:n(function(){return!0},function(r){r.EditorManager.init=o(r.EditorManager.init,function(e){return[C(y(r),e)]}),r.EditorManager.createEditor=o(r.EditorManager.createEditor,function(e,t){return[e,C(y(r),t)]})})};function E(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function N(e,t){for(var r=e.split("."),n=null!=t?t:i,o=0;o<r.length&&null!=n;++o)n=n[r[o]];return n}function A(e){return parseInt(e,10)}function R(e,t){e-=t;return 0==e?0:0<e?1:-1}function T(e,t,r){return{major:e,minor:t,patch:r}}function O(e){e=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(e);return e?T(A(e[1]),A(e[2]),A(e[3])):T(0,0,0)}function B(e,t){return!!e&&-1===function(e,t){var r=R(e.major,t.major);if(0!==r)return r;r=R(e.minor,t.minor);if(0!==r)return r;r=R(e.patch,t.patch);return 0!==r?r:0}(O([e.majorVersion,e.minorVersion].join(".").split(".").slice(0,3).join(".")),O(t))}function H(o){return function(e){var t=N("tinymce.util.Tools",i),r=b(e.plugins),n=y(o).forced_plugins||[],n=0<n.length?r.concat(n):r;return[t.extend({},e,{plugins:n})]}}function q(){return(new Date).getTime()}function $(e){e.parentNode.removeChild(e)}function W(e){var t,r=N("tinymce.util.URI",i);(t=e.base_url)&&(this.baseURL=new r(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new r(this.baseURL)),t=e.suffix,e.suffix&&(this.suffix=t),this.defaultSettings=e}function K(e){return[N("tinymce.util.Tools",i).extend({},this.defaultSettings,e)]}function G(e,t){(r=document.createElement("div")).style.display="none",r.className="mce-floatpanel";var r,n,o=r;document.body.appendChild(o),Q((n=o,function(){var e=((n.currentStyle?n.currentStyle:window.getComputedStyle(n,null)).position||"").toLowerCase();return"absolute"===e||"fixed"===e}),function(){$(o),e()},function(){$(o),t()},10,5e3)}function Y(e){e.EditorManager.on("AddEditor",function(e){var r=e.editor,n=r.settings.service_message;n&&G(function(){var e,t;t=n,(e=r).notificationManager?e.notificationManager.open({text:t,type:"warning",timeout:0,icon:""}):e.windowManager.alert(t)},function(){alert(n)})})}var X={patch:n(function(e){return B(e,"4.7.0")},function(r){r.EditorManager.init=o(r.EditorManager.init,H(r.EditorManager)),r.EditorManager.createEditor=o(r.EditorManager.createEditor,function(e,t){return E([e],H(r.EditorManager)(t),!0)})})},Q=function(e,t,r,n,o){var a=q(),i=setInterval(function(){e()&&(clearInterval(i),t()),q()-a>o&&(clearInterval(i),r())},n)},J={patch:n(function(e){return"function"!=typeof e.overrideDefaults},function(r){Y(r),r.overrideDefaults=W,r.EditorManager.init=o(r.EditorManager.init,K),r.EditorManager.createEditor=o(r.EditorManager.createEditor,function(e,t){return E([e],K.call(r,t),!0)})})},Z={patch:n(function(e){return B(e,"4.5.0")},function(e){var n;e.overrideDefaults=o(e.overrideDefaults,(n=e,function(e){var t,r=e.plugin_base_urls;for(t in r)n.PluginManager.urls[t]=r[t]}))})},P=i.tinymce,D=[J.patch,Z.patch,X.patch,V.patch];if(P)for(var L=0;L<D.length;L++)D[L].isRequired(P)&&D[L].applyPatch(P)}(),tinymce.overrideDefaults({rtc_tenant_id:"no-api-key",editimage_api_key:"no-api-key",imagetools_proxy:"https://imageproxy.tiny.cloud/2/image",suffix:".min",linkchecker_service_url:"https://hyperlinking.tiny.cloud",spellchecker_rpc_url:"https://spelling.tiny.cloud",spellchecker_api_key:"no-api-key",tinydrive_service_url:"https://catalog.tiny.cloud",api_key:"no-api-key",imagetools_api_key:"no-api-key",tinydrive_api_key:"no-api-key",export_image_proxy_service_url:"https://imageproxy.tiny.cloud",forced_plugins:["chiffer"],referrer_policy:"origin",content_css_cors:!0,custom_plugin_urls:{},chiffer_snowplow_service_url:"https://sp.tinymce.com/i",mediaembed_api_key:"no-api-key",rtc_service_url:"https://rtc.tiny.cloud",editimage_proxy_service_url:"https://imageproxy.tiny.cloud",linkchecker_api_key:"no-api-key",mediaembed_service_url:"https://hyperlinking.tiny.cloud",service_message:'This domain is not registered with Tiny Cloud.  Please see the <a target="_blank" href="https://www.tiny.cloud/docs/quick-start/">quick start guide</a> or <a target="_blank" href="https://www.tiny.cloud/auth/signup/">create an account</a>.'}),tinymce.baseURL="https://cdn.tiny.cloud/1/no-api-key/tinymce/6.0.1-3",function(){"use strict";function n(e){return null!=e}function t(){}function o(e,t){return u.call(e,t)}function a(){return(new Date).getTime()}var i,s,l,r,e,d,c,u=Object.hasOwnProperty,m={mceInsertToc:"toc_insert",mceUpdateToc:"toc_update"},g={mceEditImage:"imagetools_open_dialog",mceImageRotateLeft:"imagetools_rotate",mceImageRotateRight:"imagetools_rotate",mceImageFlipVertical:"imagetools_flip",mceImageFlipHorizontal:"imagetools_flip"},f={InsertUnorderedList:!0,InsertOrderedList:!0},p={mceInsertTemplate:"template_insert",mceInsertDate:"insertdatetime_insert",mceInsertTime:"insertdatetime_insert",mcePreview:"preview_open_dialog",mceAnchor:"anchor_open_dialog"},h=null!=(v=tinymce.defaultOptions)?v:tinymce.defaultSettings,v={load:t};e=h.api_key,d=typeof(c=d=e),v=void 0===(c="string"===(null===c?"null":"object"==d&&(Array.prototype.isPrototypeOf(c)||c.constructor&&"Array"===c.constructor.name)?"array":"object"==d&&(String.prototype.isPrototypeOf(c)||c.constructor&&"String"===c.constructor.name)?"string":d)?e:void 0)?v:(s=h,l=c,r={send:function(e,t,r){var e="?aid="+l+"&tna=tinymce_cloud&p=web&dtm="+t+"&stm="+a()+"&tz="+("undefined"!=typeof Intl?encodeURIComponent(Intl.DateTimeFormat().resolvedOptions().timeZone):"N%2FA")+"&e=se&se_ca="+e,n=document.createElement("img");n.src=s.chiffer_snowplow_service_url+e,n.onload=(e=function(e){return function(){n.onload=null,n.onerror=null,r(e)}})(!0),n.onerror=e(!1)}},(i={sendStat:function(e){r.send(e,a(),t)}}).sendStat("script_load"),{load:function(e){e.once("init",function(){return i.sendStat("init")}),e.once("focus",function(){return i.sendStat("focus")}),e.on("ExportPdf",function(){return i.sendStat("export_pdf")}),e.on("PastePreProcess PowerPasteTempStats",function(e){n(e=e.source)&&i.sendStat("powerpaste_"+e)}),e.on("VisualChars",function(e){!0===e.state&&i.sendStat("visualchars_true")}),e.on("RtcSessionConnected",function(e){var t=e.time;switch(t){case 0:i.sendStat("rtc_started");break;case 5:case 10:case 20:i.sendStat("rtc_connected_"+t+"min")}}),e.on("RtcSessionError",function(){return i.sendStat("rtc_error")}),e.on("RtcSessionDirty",function(){return i.sendStat("rtc_edited")}),e.on("SpellcheckerLanguageChanged",function(e){e=e.language,i.sendStat("spellcheckerpro_language_changed_"+e)}),e.on("ExecCommand",function(e){var t,r;r=(t=e).command,void 0!==(e=o(f,r)?n((r=t).value)&&o(r.value,"list-style-type")?"advlist_"+(""===(r=r.value["list-style-type"])?"default":r):void 0:o(g,r)?g[r]:o(m,r)?m[r]:o(p,r)?p[r]:void 0)&&i.sendStat(e)})}}),tinymce.PluginManager.add("chiffer",v.load)}(),tinymce.addI18n("es_MX",{Redo:"Rehacer",Undo:"Deshacer",Cut:"Cortar",Copy:"Copiar",Paste:"Pegar","Select all":"Seleccionar todo","New document":"Nuevo documento",Ok:"Aceptar",Cancel:"Cancelar","Visual aids":"Ayudas visuales",Bold:"Negrita",Italic:"Cursiva",Underline:"Subrayado",Strikethrough:"Tachado",Superscript:"Superíndice",Subscript:"Subíndice","Clear formatting":"Limpiar formato",Remove:"Remover","Align left":"Alinear a la izquierda","Align center":"Alinear al centro","Align right":"Alinear a la derecha","No alignment":"Sin alineación",Justify:"Justificado","Bullet list":"Lista de viñetas","Numbered list":"Lista numerada","Decrease indent":"Reducir sangría","Increase indent":"Aumentar sangría",Close:"Cerrar",Formats:"Formatos","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":"Su navegador no admite el acceso directo al portapapeles. En su lugar, use los métodos abreviados Ctrl+X/C/V del teclado",Headings:"Encabezados","Heading 1":"Encabezado 1","Heading 2":"Encabezado 2","Heading 3":"Encabezado 3","Heading 4":"Encabezado 4","Heading 5":"Encabezado 5","Heading 6":"Encabezado 6",Preformatted:"Con formato previo",Div:"División",Pre:"Antes de",Code:"Código",Paragraph:"Párrafo",Blockquote:"Bloque de citar",Inline:"En línea",Blocks:"Bloques","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":"Pegar ahora está en modo de texto sin formato. El contenido ahora se pegará como texto sin formato hasta que desactive esta opción",Fonts:"Fuentes","Font sizes":"Tamaños de fuente",Class:"Clase","Browse for an image":"Buscar una imagen",OR:"O","Drop an image here":"Soltar una imagen aquí",Upload:"Subir","Uploading image":"Subiendo imagen",Block:"Bloque",Align:"Alinear",Default:"Predeterminado",Circle:"Círculo",Disc:"Disco",Square:"Cuadrado","Lower Alpha":"Alfabético en minúsculas","Lower Greek":"Griego en minúsculas","Lower Roman":"Romano en minúsculas","Upper Alpha":"Alfabético en mayúsculas","Upper Roman":"Romano en mayúsculas","Anchor...":"Ancla...",Anchor:"Ancla",Name:"Nombre",ID:"ID","ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.":"El ID debe comenzar con una letra, seguido solo de letras, números, guiones, puntos, dos puntos o guiones bajos","You have unsaved changes are you sure you want to navigate away?":"No se han guardado los cambios. Estas seguro que desea abandonar la página?","Restore last draft":"Restaurar último borrador","Special character...":"Carácter especial...","Special Character":"Caracteres especiales","Source code":"Código de origen","Insert/Edit code sample":"Insertar o editar ejemplo de código",Language:"Idioma","Code sample...":"Ejemplo de código...","Left to right":"De izquierda a derecha","Right to left":"De derecha a izquierda",Title:"Título",Fullscreen:"Pantalla completa",Action:"Acción",Shortcut:"Atajo",Help:"Ayuda",Address:"Dirección","Focus to menubar":"Centrarse en la barra de menú","Focus to toolbar":"Centrarse en la barra de herramientas","Focus to element path":"Centrarse en la ruta del elemento","Focus to contextual toolbar":"Centrarse en la barra de herramientas contextual","Insert link (if link plugin activated)":"Insertar enlace (si el enlace de los complemento estan activado)","Save (if save plugin activated)":"Guardar (si guardar complemento está activado)","Find (if searchreplace plugin activated)":"Buscar (si buscar y reemplazar complemento está activado)","Plugins installed ({0}):":"Complementos instalados ({0})","Premium plugins:":"Complementos premium","Learn more...":"Más información...","You are using {0}":"Estas utilizando {0}",Plugins:"Complementos","Handy Shortcuts":"Atajos útiles","Horizontal line":"Línea horizontal","Insert/edit image":"Insertar o editar imagen","Alternative description":"Descripción alternativa",Accessibility:"Accesibilidad","Image is decorative":"La imagen es decorativa",Source:"Origen",Dimensions:"Dimensiones","Constrain proportions":"Restringir proporciones",General:"General",Advanced:"Avanzado",Style:"Estilo","Vertical space":"Espacio vertical","Horizontal space":"Espacio horizontal",Border:"Borde","Insert image":"Insertar imagen","Image...":"Imagen...","Image list":"Lista de imágenes",Resize:"Redimensionar","Insert date/time":"Insertar fecha y hora","Date/time":"Fecha y hora","Insert/edit link":"Insertar o editar enlace","Text to display":"Texto a mostrar",Url:"Url","Open link in...":"Abrir enlace en...","Current window":"Ventana actual",None:"Ninguno","New window":"Nueva ventana","Open link":"Abrir enlace","Remove link":"Remover enlace",Anchors:"Anclajes","Link...":"Enlace...","Paste or type a link":"Pegar o escribir un enlace","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"La URL que ha introducido parece ser una dirección de correo electrónico. Desea agregar el prefijo requerido mailto:?","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"La URL que introdujo parece ser un enlace externo. Desea agregar el prefijo requerido http://?","The URL you entered seems to be an external link. Do you want to add the required https:// prefix?":"La URL que ha introducido parece ser un enlace externo. Desea agregar el prefijo requerido https://?","Link list":"Lista de enlaces","Insert video":"Insertar video","Insert/edit video":"Insertar o editar video","Insert/edit media":"Insertar o editar elemento multimedia","Alternative source":"Origen alternativo","Alternative source URL":"URL de origen alternativo","Media poster (Image URL)":"Póster multimedia (URL de la imagen)","Paste your embed code below:":"Pegar su código de inserción abajo",Embed:"Inserción ","Media...":"Elemento multimedia...","Nonbreaking space":"Espacio sin separación","Page break":"Salto de página","Paste as text":"Pegar como texto",Preview:"Vista previa",Print:"Imprimir","Print...":"Imprimir...",Save:"Guardar",Find:"Buscar","Replace with":"Remplazar con",Replace:"Remplazar","Replace all":"Remplazar todo",Previous:"Anterior",Next:"Siguiente","Find and Replace":"Buscar y reemplazar","Find and replace...":"Buscar y reemplazar...","Could not find the specified string.":"No se ha encontrado la cadena indicada","Match case":"Coincidir mayúsculas y minúsculas","Find whole words only":"Buscar solo palabras completas","Find in selection":"Buscar en la selección","Insert table":"Insertar tabla","Table properties":"Propiedades de tabla","Delete table":"Eliminar tabla",Cell:"Celda",Row:"Fila",Column:"Columna","Cell properties":"Propiedades de celda","Merge cells":"Combinar celdas","Split cell":"Dividir celdas","Insert row before":"Insertar fila antes","Insert row after":"Insertar fila después","Delete row":"Eliminar fila","Row properties":"Propiedades de fila","Cut row":"Cortar fila","Cut column":"Cortar columna","Copy row":"Copiar fila","Copy column":"Copiar columna","Paste row before":"Pegar fila antes","Paste column before":"Pegar columna antes","Paste row after":"Pegar fila después","Paste column after":"Pegar columna después","Insert column before":"Insertar columna antes","Insert column after":"Insertar columna después","Delete column":"Eliminar columna",Cols:"Columnas",Rows:"Filas",Width:"Ancho",Height:"Alto","Cell spacing":"Espaciado de celda","Cell padding":"Relleno celda","Row clipboard actions":"Acciones de fila del portapapeles","Column clipboard actions":"Acciones de columna del portapapeles","Table styles":"Estilos de tabla","Cell styles":"Estilos de celda","Column header":"Encabezado de columna","Row header":"Encabezado de fila","Table caption":"Subtítulo de tabla",Caption:"Subtítulo","Show caption":"Mostrar subtítulo",Left:"Izquierda",Center:"Centro",Right:"Derecha","Cell type":"Tipo de celda",Scope:"Alcance",Alignment:"Alineación","Horizontal align":"Alineación horizontal","Vertical align":"Alineación vertical",Top:"Arriba",Middle:"Centro",Bottom:"Abajo","Header cell":"Celda de encabezado","Row group":"Grupo de filas","Column group":"Grupo de columnas","Row type":"Tipo de fila",Header:"Encabezado",Body:"Cuerpo",Footer:"Pie de página","Border color":"Color de borde",Solid:"Sólido",Dotted:"Punteado",Dashed:"Discontinuo",Double:"Doble",Groove:"Ranura",Ridge:"Rugosidad",Inset:"Recuadro",Outset:"Inicial",Hidden:"Oculto","Insert template...":"Insertar plantilla...",Templates:"Plantillas",Template:"Plantilla","Insert Template":"Insertar plantilla","Text color":"Color de texto","Background color":"Color de fondo","Custom...":"Personalizar...","Custom color":"Color personalizado","No color":"Sin color","Remove color":"Remover color","Show blocks":"Mostrar bloques","Show invisible characters":"Mostrar caracteres invisibles","Word count":"Cantidad de palabras",Count:"Cantidad",Document:"Documento",Selection:"Selección",Words:"Palabras","Words: {0}":"Palabras {0}","{0} words":"{0} palabras",File:"Archivo",Edit:"Editar",Insert:"Insertar",View:"Vista",Format:"Formato",Table:"Tabla",Tools:"Herramientas","Powered by {0}":"Desarrollado por {0}","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"Área de texto enriquecido. Pulse ALT-F9 para el menú. Pulse ALT-F10 para la barra de herramientas. Pulse ALT-0 para obtener ayuda.","Image title":"Título de la imagen","Border width":"Ancho de borde","Border style":"Estilo de borde",Error:"Error",Warn:"Advertencia",Valid:"Válido","To open the popup, press Shift+Enter":"Para abrir la ventana emergente, presione Mayús+Intro","Rich Text Area":"Área de texto enriquecido","Rich Text Area. Press ALT-0 for help.":"Área de texto enriquecido. Pulse ALT-0 para obtener ayuda","System Font":"Fuente del sistema","Failed to upload image: {0}":"Error al cargar la imagen {0}","Failed to load plugin: {0} from url {1}":"Error al cargar el complemento {0} desde la url {1}","Failed to load plugin url: {0}":"Error al cargar la url del complemento {0}","Failed to initialize plugin: {0}":"Error al inicializar el complemento {0}",example:"ejemplo",Search:"Buscar",All:"Todo",Currency:"Moneda",Text:"Texto",Quotations:"Comillas",Mathematical:"Matemáticos","Extended Latin":"Latín extendido",Symbols:"Símbolos",Arrows:"Flechas","User Defined":"Definido por el usuario","dollar sign":"signo de dólar","currency sign":"signo de moneda","euro-currency sign":"signo de euro","colon sign":"signo del colón","cruzeiro sign":"signo del cruzeiro","french franc sign":"signo del franco francés","lira sign":"signo de la lira","mill sign":"signo de mil","naira sign":"signo del naira","peseta sign":"signo de la peseta","rupee sign":"signo de la rupia","won sign":"signo del won","new sheqel sign":"signo de nuevo shequel","dong sign":"signo del dong","kip sign":"signo del kip","tugrik sign":"signo del tugrik","drachma sign":"signo del dracma","german penny symbol":"signo del penique alemán","peso sign":"signo del peso","guarani sign":"signo del guaraní","austral sign":"signo del austral","hryvnia sign":"signo de hryvnia","cedi sign":"signo de cedi","livre tournois sign":"signo de livre tournois","spesmilo sign":"signo de spesmilo","tenge sign":"signo de tenge","indian rupee sign":"signo de la rupia india","turkish lira sign":"signo de la lira turca","nordic mark sign":"signo del marco nórdico","manat sign":"signo de manat","ruble sign":"signo de rublo","yen character":"carácter del yen","yuan character":"carácter del yuan","yuan character, in hong kong and taiwan":"carácter del yuan, en Hong Kong y Taiwán","yen/yuan character variant one":"variante uno del carácter del yen/yuan",Emojis:"Emojis","Emojis...":"Emojis...","Loading emojis...":"Cargando emojis...","Could not load emojis":"No se pudieron cargar los emojis",People:"Personas","Animals and Nature":"Animales y naturaleza","Food and Drink":"Comida y bebida",Activity:"Actividad","Travel and Places":"Viajes y lugares",Objects:"Objetos",Flags:"Banderas",Characters:"Caracteres","Characters (no spaces)":"Caracteres (sin espacios)","{0} characters":"{0} caracteres","Error: Form submit field collision.":"Error: colisión del campo para el envío de formulario","Error: No form element found.":"Error: no se encontró ningún elemento de formulario","Color swatch":"Muestra de color","Color Picker":"Selector de color","Invalid hex color code: {0}":"El código de color hexadecimal {0} no es válido","Invalid input":"Entrada no válida",R:"Rojo","Red component":"Componente rojo",G:"Verde","Green component":"Componente verde",B:"Azul","Blue component":"Componente azul","#":"#","Hex color code":"Código de color hexadecimal","Range 0 to 255":"Range 0 al 255",Turquoise:"Turquesa",Green:"Verde",Blue:"Azul",Purple:"Morado","Navy Blue":"Azul marino","Dark Turquoise":"Turquesa oscuro","Dark Green":"Verde oscuro","Medium Blue":"Azul medio","Medium Purple":"Morado medio","Midnight Blue":"Azul noche",Yellow:"Amarillo",Orange:"Anaranjado",Red:"Rojo","Light Gray":"Gris claro",Gray:"Gris","Dark Yellow":"Amarillo oscuro","Dark Orange":"Anaranjado oscuro","Dark Red":"Rojo oscuro","Medium Gray":"Gris medio","Dark Gray":"Gris oscuro","Light Green":"Verde claro","Light Yellow":"Amarillo claro","Light Red":"Rojo claro","Light Purple":"Morado claro","Light Blue":"Azul claro","Dark Purple":"Morado oscuro","Dark Blue":"Azul oscuro",Black:"Negro",White:"Blanco","Switch to or from fullscreen mode":"Cambiar a o desde el modo de pantalla completa","Open help dialog":"Abrir diálogo de ayuda",history:"historial",styles:"estilos",formatting:"formato",alignment:"alineación",indentation:"sangría",Font:"Fuente",Size:"Tamaño","More...":"Más...","Select...":"Seleccionar...",Preferences:"Preferencias",Yes:"Sí",No:"No","Keyboard Navigation":"Navegación con el teclado",Version:"Versión","Code view":"Vista de código","Open popup menu for split buttons":"Abrir menú emergente para separar botones","List Properties":"Propiedades de lista","List properties...":"Propiedades de lista...","Start list at number":"Iniciar lista con número","Line height":"Altura de línea","Dropped file type is not supported":"El tipo de archivo descartado no es soportado","Loading...":"Cargando...","ImageProxy HTTP error: Rejected request":"Error HTTP de ImageProxy, solicitud rechazada","ImageProxy HTTP error: Could not find Image Proxy":"Error HTTP de ImageProxy. No se pudo encontrar el proxy de imagen","ImageProxy HTTP error: Incorrect Image Proxy URL":"Error HTTP de ImageProxy. La URL de proxy de imagen es incorrecta","ImageProxy HTTP error: Unknown ImageProxy error":"Error de ImageProxy HTTP. Error de ImageProxy desconocido"}),tinymce.init({selector:"#post-body",height:500,plugins:["a11ychecker","advcode","advlist","anchor","autolink","codesample","fullscreen","help","image","editimage","tinydrive","lists","link","media","powerpaste","preview","searchreplace","table","template","tinymcespellchecker","visualblocks","wordcount"],toolbar:"insertfile a11ycheck undo redo | bold italic | forecolor backcolor | template codesample | alignleft aligncenter alignright alignjustify | bullist numlist | link image",theme:"silver",language:"es_MX"});